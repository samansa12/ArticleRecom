algebraic foundations broadcasting algorithms wormholerouted allport tori abstractthe onetoall broadcast primary collective communication pattern multicomputer network consider problem wormholerouted torus uses allport dimensionordered routing model derive routing algorithms based concept span vector spaces linear algebra instance 3d torus nodes receiving broadcast message spanned source node line nodes plane nodes cube nodes results require 2k1 steps optimal number steps square kd torus existing results compared applied tori restricted dimensions sizes either rely undesirable nondimensionordered routing require numbers steps b introduction onetoall broadcast essential communication operator multicomputer networks many applications algebraic problems barrier syn chronization parallel graph matrix algorithms cache coherence distributedsharememory systems data redistribution hpf wormhole routing 1 4 characterized low communication latency due pipelined nature quite insensitive routing distance absence link contention machines adopting technology include intel touchstone delta intel paragon mit jmachine caltech mosaic ncube 3 cray t3d t3e paper study scheduling message distribution onetoall broadcast wormhole work supported national science council republic china grant nsc872213e008012 nsc872213e008016 routed torus type architecture adopted parallel machines cray t3d t3e 3d tori network assumed use allport model 1 popular dimensionordered routing following formulation many works 2 6 8 10 12 13 achieved constructing sequence steps step consists set communication paths indicating message delivery goal minimize total number steps used problem studied several works 9 10 schedules following dimensionordered routing proposed 2d 2 n theta 2 n 3d 2 n theta 2 n theta z tori using n respectively numbers steps used least log 4 5 log 6 7 times ie 16 86 optimal numbers steps respectively refer lower bounds lemma 1 schedule using optimal number steps proposed 8 2d torus size 5 p theta 5 p 2 theta 5 p theta 2 theta 5 p p integer works 6 7 remain op timal applied square kd torus nodes side however disadvantages 6 7 8 include tori must square ii network sizes solvable eg 2d tori possible sizes 5 theta 5 10 theta 10 25 theta 25 50 theta 50 125 theta 125 250 theta 250 etc iii routing dimensionordered comment unfortunately current torus machines use dimension ordered routing drawbacks would greatly limit applicability 6 7 8 generalization tori supporting multiport capability shown 3 however routing still nondimensionordered recently deficiencies eliminated 11 1 reverse oneport model case broadcast problem trivially solved recursivedoubling technique applied 2d tori size using dimension ordered routing 2 resp 5 communication steps optimum required torus square resp nonsquare however still remains open problem extend scheme higherdimensional tori one interesting technique used 11 concept diagonal 2d torus paper extend work 11 show perform onetoall broadcast torus dimension practical consideration routing still follow dimensionordered restriction extension turns need mathematical foundations higherdimensional tori considered schemes based concept span vector spaces linear al gebra instance 3d torus nodes receiving broadcast message spanned source node line nodes plane nodes cube nodes develop algebraic foundations solve problem kd torus size n dimension results require optimal scheduling existing results compared applied tori restricted dimensions sizes either rely undesirable nondimensionordered routing require numbers steps 2 preliminaries kd torus size n undirected graph denoted tnthetadeltadeltadeltathetan node denoted p x1x2 node degree 2k node p x1 x2 edge connecting along dimension one edge along dimension two hereafter omit saying mod n whenever context clear map torus euclidean integer space z k note instead normal integer set z domain f0 1g node torus regarded point vector z k ktuple convention ith positive negative elementary vector e resp e gammai z k 1k one entries 0 except ith entry 1 resp gamma1 may write e 1 similarly instance e e linear combination vectors say 1 integers follows directly typical definition vector addition except mod n operation implicitly applied z k given node x mtuple vectors mtuple integers span x vectors b distances n note definition different typical definition span linear algebra 5 main purpose identify portion torus instances main diagonals tnthetan tnthetanthetan written spanp 00 e 12 n spanp 000 e 123 n respectively xy plane passing node p 00i tnthetanthetan written onetoall broadcast problem source node needs send message rest network allport model assumed node simultaneously send receive messages along outgoing incoming channels since node degree 2k best case one may multiply number nodes owning broadcast message 2k step leads following lemma lemma 1 kd allport torus tnthetadeltadeltadeltathetan lower bound number steps achieve onetoall broadcast dlog 2k1 n k e 3 broadcasting 2d tori section review broadcasting scheme 2d tori 11 helpful understand algorithms higherdimensional tori later consider 2d torus tnthetan network symmetric let without loss generality source node denote message broadcast scheme derived two stages stage 1 stage message sent main diagonal spanp 00 e 12 n achieved two parts stage 11 distribution part recursively distributed one nodes row easy representation let 5t first regard 00 center torus horizontally evenly slice torus five strips one step let p 00 send four copies nodes p 0gamma2t p gammatgammat five nodes located center rows five strips routing clearly congestionfree illustrated fig 1a regarding five nodes source node five strips recursively send rows fig 1b illustrates routing second step repeated height strip reduces one zero end along row torus figure 1 stage 11 broadcast 2d torus first step b second step figure 2 stage 2 broadcast 2d torus first step b second step note clarity typical communication paths shown exactly one node received overall stage takes dlog 5 ne steps complete stage 12 alignment node p ij holding message p ij sends along first dimension nodes main diagonal requires one step stage 2 stage torus viewed n diagonals evenly partition torus 5 strips gamma22 contains diagonals illustrated fig 2a first step sent 4 diagonals done node p ii l 0 send nodes p igamma2ti p iit communication illustrated fig 2a clearly congestionfree second step regard diagonal l source strip recursively perform diagonaltodiagonal message distribution refer fig 2b recursion terminates strips contains one zero di agonal stage takes dlog 5 ne steps complete hence broadcast done 2dlog 5 ne number steps 2 steps lower bound lemma 1 4 broadcasting 3d tori develop algorithm tnthetanthetan n without loss generality let p 000 source node basic idea distribute broadcast message three stages p 000 line spanp 000 e 13 n ii line plane spanp 000 e 13 e 12 n n iii plane whole torus stages use dlog 7 ne ne ne steps respectively simplicity may use x zaxes refer first second third dimensions respectively 41 stage 1 source node line stage divided two parts first part distributed one representative node n xy planes second part forwarded line 411 stage 11 distribution simplicity let n multiple 7 7t view torus consisting following planes partition torus horizontally 7 cubes gamma33 first cube consists first xy planes eq 2 second cube next xy planes etc lets identify following nodes one step node 0 forward congestion communication paths illustrated fig 3a observe located central xy plane cube c gamma33 regard source c recursively perform broadcasting c cube reduces one figure 3 stage 11 broadcast 3d torus first step b second step zero xy plane second step illustrated fig 3b point would introduce notations later presentation consider kd torus routing matrix matrix entries gamma1 0 1 row indicates message delivery r resp gamma1 corresponding message travel along positive resp negative direction dimension j r message travel along dimension j distance matrix integer diagonal matrix nondiagonal elements 0 ii represents distance traveled ith message described r along dimension instance six message deliveries fig 3a three directions thus represented routing matrix e 23 e general six nodes receiving note ff sigmai sigma deriving ff sigmai use two distance matrices represent 6 message deliveries fig 3a matrix multiplication row represents one routing path 412 stage 12 alignment goal align nodes receiving line n done one step every p xyz holding send p z0z along figure 4 stage 2 broadcast 3d torus viewing torus perspective partitioning torus 7 cubes c gamma33 stage 3 broadcast 3d torus c viewing torus perspective partitioning torus 7 cubes c gamma33 path congestionfree communications happen individual xy planes 42 stage 2 line plane stage view torus different perspective fig 4a illustration view partition network along direction e 1 following message sent line lines spanned along direction e 13 located different plane eq 6 finally align lines plane spanp 000 e 13 e 12 n n easy send messages line nodes another parallel line one communication step instance deliver messages line spanp 000 e 13 n line simply let p i0i former line send p i23i4 latter line one easily generalize line sending six parallel lines one step 421 stage 21 distribution stage based recursive structure follows simplicity let 7t partition torus 7 figure 5 stage 2 broadcast 3d torus first step b second step cubes gamma33 c gamma3 consists first planes eq 6 c gamma2 next planes etc refer fig 4b line already owning p i0i 2 l 0 send following six nodes distribute six lines one step communication step illustrated fig 5a congestionfree resulting line l central plane c see lets prove case l 2t indeed central plane c 2 cases proved similarly routing matrix written using distance matrices eq 4 six routing paths fig 5a described six rows next recursively perform similar line toline distribution c using l source next step shown fig 5b 422 stage 22 alignment stage 21 plane line owns goal align n lines plane n done node 2 l send along second dimension hops obviously congestionfree forward lines lines constitute plane one step used stage 43 stage 3 plane planes stage view torus another perspective illustrated fig 4c view partition torus along direction e 1 n planes simplicity let 7t following philosophy divide torus 7 cubes gamma33 first cube consists first planes second cube next planes etc shown fig 4d central plane eq 8 already owns message stage planetoplane message distribution performed instance every node plane sends along zaxes nodes 3 5 hops way respectively two planes receive gamma3 gamma5 planes next source plane specifically use routing matrix distance gamma remain resulting 6 routing paths represented 6 rows following matrices next planes next 2t planes next 3t planes next gammat planes next gamma2t planes next gamma3t planes 7 planes owning centers cubes recursion proceeded c reduces one zero plane totally dlog 7 ne steps used stage theorem 1 3d tnthetanthetan torus dimension ordered routing allport capability broadcast done 3dlog 7 ne number steps 4 steps optimum 5 broadcasting kd tori section extend broadcasting algorithm kd tnthetadeltadeltadeltathetan torus following philosophy broadcasting z k kd torus achieved distributing broadcast message k stages source line line plane plane cube cube 4d cube etc following discuss general stage 1k still two parts distribution alignment throughout section 00 source node n vector length equal n 51 distribution substage first need define set nodes receiving broadcast message stage definition 3 set nodes receiving message stage defined number nodes u n times u also think u n copies u expanding along vector e 1kgammai1 ie vector v plus set nodes v means translation operation moves node node relative former vector v following lemma guarantees really received nodes stage k selected insure following two lemmas important later guarantee routing congestionfree following two lemmas simply proved gaussian elimination method lemma 3 j 1 union ofomega vector e j linearly independent lemma 4 ofomega linearly independent figure 6 partitioning v along super linear path expand u igamma1 u need view torus different perspective defined follows definition 4 stage view torus delta means concatenation two sequences earlier perspectives fig 3a fig 4a c 3d torus derived based formula perspective provides us way partition torus seen earlier partitioning used solve problem recursive manner definition 5 stage v partitioned along direction following n subnetworks j gammab partitioning illustrated fig 6 examples partitioning 3d torus different stages seen fig 3b fig 4b imagine j supernode connected vector two supernodes w j1 wraparound manner supernodes actually form super linear path length n also note u already message resident central supernode w 0 distribution sub stage try send w 0 1 supernodes sets nodes receiving supernode shape isomorphic u igamma1 done based following recursive structure partition linear path 2k send representative supernode segment iii perform distribution segment recursively given segment supernodes length use routing matrix two distance matrices describe routing one recursive step definition 6 stage routing matrix k theta k matrix defined e 1k e 2k e kgamma1k e 2gammak e kgammai1gammak gammae kgammai2 kgammai1 definition 7 stage given segment supernodes length distance matrices respect intuitively ff sigmai sigma im derived 14 ff gamma2 e 2 gammam using matrices intuitive meanings routing paths one recursive step described 2k rows following matrix multiplication theta r routing paths w routing paths w routing paths w routing paths w theta r routing paths w routing paths w ff gamma2 ff gamma2 gamma2m routing paths w ff gamma3 routing paths w ff gammak ff gammak gammakm consider first communication step u resident w following second row equal ff 2 e 2gammak message sent meanings routing paths rows proved similarly omit details figure 7 aligning 0 w lemma 5 14in distribution substage stage communication step congestionfree 52 alignment substage supernode w already set nodes shape isomorphic u next job align n sets form u following show routing w suppose set nodes owning distribution substage isomorphic u igamma1 write v 1 also recall u consists n copies u spanned along direction e 1kgammai1 set nodes expect w see illustration fig 7 need alignment otherwise alignment may necessary intuitively take difference two vectors resulting vector used represent routing paths leading 0 however routing may congestionfree following lemma shows fact rewritten different form lemma 6 u means dont care using new form lemma 6 perform following subtractions resulting vectors indicate align 0 alignment may go along dimensions observing locations appear eq 12 e 1 routing happens inside w 1 thus need prove routing alignment inside individual congestionfree proof similar lemma 5 omit details similarly alignment may go along dimensions observing locations appear eq 13 e routing happens inside w also note reduces zero vector means need alignment substage stage k leads following theorem theorem 2 kd tnthetadeltadeltadeltathetan torus dimension ordered routing allport capability broadcast done kdlog 2k1 ne number steps 2k gamma 1 steps optimum 6 conclusions compare scheme 3d tori two known schemes tsai mckinley 10 works 2 theta2 thetaz requires d1 dm2 steps 2 z 7 7 theta 6 respectively ii park et al 6 7 works steps fig 8 draw numbers communication steps required schemes tnthetanthetan torus make following observations first terms numbers steps uses park scheme best always coincides lower bound tm scheme better n small outperformed n becomes larger second terms network sizes allowed broadest applicability n allowed tm park schemes quite limited applicability situation getting worse especially n becomes larger third terms communication capability tm schemes assume dimensionordered routing park scheme assumes stronger non dimensionordered routing currently trying extend result port models 3 r torus routing chip optimal broadcasting allport wormholerouted hypercubes optimal broadcast ffport wormholerouted mesh networks survey wormhole routing techniques directed network linear algebra applications broadcasting algorithm allport wormholerouted torus networks broadcasting algorithm allport wormholerouted torus networks dilateddiagonalbased scheme broadcast wormholerouted 2d torus algebraic foundations broadcasting algorithms wormholerouted tori tr ctr xiaotong zhuang vincenzo liberatore recursionbased broadcast paradigm wormhole routed networks ieee transactions parallel distributed systems v16 n11 p10341052 november 2005 olivier beaumont arnaud legrand loris marchal yves robert pipelining broadcasts heterogeneous platforms ieee transactions parallel distributed systems v16 n4 p300313 april 2005 yuanyuan yang new conference network group communication ieee transactions computers v51 n9 p9951010 september 2002 yuhshyan chen chaoyu chiang cheyi chen multinode broadcasting allported 3d wormholerouted torus using aggregationthendistribution strategy journal systems architecture euromicro journal v50 n9 p575589 september 2004 sanyuan wang yuchee tseng szeyao ni jangping sheu circuitswitched broadcasting multiport multidimensional torus networks journal supercomputing v20 n3 p217241 november 2001