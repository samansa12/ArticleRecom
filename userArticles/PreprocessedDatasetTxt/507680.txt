impact link failures voip performance use active passive traffic measurements identify issues involved deployment voice service tier1 ip backbone network findings indicate specific handling voice packets ie qos differentiation needed current backbone new protocols mechanisms need introduced provide better protection link failures discover link failures may followed long periods routing instability packets dropped forwarded along invalid paths also identify need new family quality service mechanisms based fast protection traffic high availability service rather performance terms delay loss b introduction recently tier1 internet service providers isps shown ever increasing interest providing voice telephone services current internet infrastructures voiceoverip voip appears cost effective solution provide alternative services traditional telephone networks however isps need provide comparable quality terms voice quality availability service identify three major causes potential degradation performance telephone services internet network congestion link failures routing instabilities goal study frequency events assess impact voip performance permission make digital hard copies part work personal classroom use granted without fee provided copies made distributed profit commercial advantage copies bear notice full citation first page copy otherwise republish post servers redistribute lists requires prior specific permission andor fee nossdav02 may 1214 2002 miami florida usa use passive monitoring backbone links evaluate occurrence impact network congestion data traffic passive measurements carried different locations us sprint ip backbone allow us study transmission delay voice packets evaluate degree congestion however kind measurement cannot provide information related link failures routing instabilities purpose deployed active measurement infrastructure two locations well connected backbone capture timestamp probe packets ends quantify losses observe impact route changes voice traffic performed many weeklong experiments order observe different link failure scenarios given measurements take place autonomous system also complement data isis routing information 9 collected one backbone points presence pops additional information give us fairly complete view events occur experiments indeed active probes routing information give us capability identifying precisely links routers even interfaces responsible failures instabilities network findings indicate sprint ip backbone network ready provide tollquality voice service level congestion backbone always negligible impact voice quality hand link failures impact availability voip services discovered link failures may followed long periods routing instability packets dropped forwarded along invalid paths instabilities last tens minutes resulting loss reachability large set endhosts paper structured follows section 2 briefly presents related work section 3 provides detailed information measurement approaches followed study section 4 describes model used assess subjective quality voice calls transport level measurable quantities section 5 finally discuss findings section 6 presents concluding remarks 2 related work past literature endtoend internet measurements often focused study network loss patterns delay characteristics 6 8 16 26 24 example kostas 18 studied feasibility realtime voice internet discussed measured delay loss characteristics order evaluate quality internet telephony 14 provided network performance data terms delay losses collected wide range geographically distributed sites studies based roundtrip delay measurements information delay losses give valuable insights quality voip characterize actual subjective quality experienced voip users 11 cole et al propose method monitoring quality voip applications based upon reduction emodel 3 measurable transport level quantities delay losses markopoulou et al 19 use subjective quality measures also based emodel assess ability internet backbones support voice communications work uses collection gps synchronized packet traces results indicate backbones able provide toll quality voip today addition report even good paths exhibit occasional long loss periods could attributed routing changes however investigate causes network failures neither impact voice traffic 3 measurements section describe two measurement approaches used study ie passive measurement system deployed sprint ip backbone network active measurement system uses probe packets study routing protocols stability link failures 31 passive measurements infrastructure developed monitor sprint ip backbone consists passive monitoring systems collect packet traces links located three pops network details passive monitoring infrastructure found 13 study use traces collected various oc12 intra pop links july 24th 2001 september 5th 2001 november 8th 2001 packet trace contains first 44 bytes every ip packet traverses monitored link every packet record also timestamped using gps reference signal synchronize timing information different systems 20 use technique described 23 compute oneway delays across sprint backbone basic idea behind technique identify packets enter sprint backbone one monitored pops leave network another one packets identified computing delays simply requires compute difference recorded timestamps 32 active measurements passive measurements provide valuable information network characteristics data collected depend traffic generated parties completely control moreover given monitor links backbone network able measure jitter loss rates simple passive monitoring packets may leave network monitored links 23 therefore passive measurements alone cannot provide results quality voice calls motivations behind use active measurements complement passive ones active measurement environment perfectly control amount characteristics traffic inject network thus draw precise conclusions impact network monitored traffic 321 measurement infrastructure deployed active measurement systems two locations us reston va san francisco ca well connected sprint backbone ie one router away backbone network figure 1 shows architecture testbed way sites connected sprint network thick lines indicate path followed traffic note access router pop connected two backbone routers reliability usually perdestination prefix load balancing implemented access links backbone chosen unloaded order introduce additional delay end experiment verified packet losses induced last hops paths site four systems running freebsd generate traffic made 200 byte udp packets constant rate 50 packets per second choose rate probes could easily used emulate voice call compliant g711 standard 2 additional system captures timestamps probe packets using dag32e card 10 dag cards provide accurate timestamping packets synchronized using gps cdma receiver 20 probe packets recorded timestamped right access links two locations directions experiment discuss probes sent reston va san francisco ca duration 25 days starting 0400 utc november 27th 2001 run active measurements several weeks chosen specific trace exhibits interesting network failure event terms delay loss voice call quality measured instead significant difference among many different experiments 322 routing data integrate measurement data isis routing information collected pop2 see figure 1 use isis listener 21 record routing messages exchanged ex periment isis messages permit correlate loss delay events changes routing information order illustrate kind data collected listener give brief description isis protocol isis 22 link state routing protocol used intradomain routing isis link network assigned metric value weight every router 1 broadcasts information direct connectivity routers information conveyed messages called link state pdus lsp lsp contains information identity metric value adjacencies router originated lsp general router generates transmits lsps periodically lsps also generated whenever network topology changes eg link router goes thus lsps provide valuable information occurrence events loss connectivity route changes etc router received path information routers constructs forwarding database using dijkstras shortest path first spf algorithm determine best route destina tion operation called decision process transitory conditions eg rebooting decision process take considerable amount time several minutes since requires lsps received order complete transitory period router responsible make sure routers network forward packets towards order router generate flood lsps infinite hippity cost bit set 2 way routers consider valid node forwarding paths 1 isis designed within isoosi standardization effort using osi terminology paper instead decided avoid use osi terms bit also referred overload ol bit figure 1 topology active measurement systems thick lines indicate primary path 4 voice call rating even though active measurements may provide accurate information network delay losses statistics always appropriate infer quality voice calls addition mea surements use methodology emulate voice calls packet traces assess quality using emodel standard 3 4 5 41 voice quality measure emodel emodel predicts subjective quality experienced average listener combining impairment caused transmission parameters loss delay single rat ing rating used predict subjective user reactions mean opinion score mos according itut recommendation g107 every rating value corresponds speech transmission category shown table 1 rating unacceptable quality values 70 correspond pstn quality values 90 corresponding good qual ity rvalue range mos speech transmission quality 100 90 450434 best 90 low poor table 1 speech transmission quality classes corresponding rating value ranges emodel rating r given r0 groups effects noise represents impairment occur simultaneously voice signal quantization impairment associated mouthtoear delay ie impairment associated signal distortion caused low bit rate codecs packet losses advantage factor deterioration callers willing tolerate access advantage certain systems traditional wirebound telephony eg advantage factor mobile telephony assumed 10 since agreement reached case voip services drop advantage factor study 42 reduction emodel transport level quantities although analytical expression given 4 values ie provided appendix 5 different loss con ditions standards give fully analytical expression rfactor work use simplified analytic expression rfactor proposed 11 describes rfactor function observable transport level quantities section briefly describe reduction equation 1 transport level quantities proposed 11 introduce assumptions made voip connections study 421 signaltonoise impairment factors r0 r0 effect background circuit noise effect quantization describe impairment signal since none depend underlying transport net work rely upon set default values recommended 4 parameters choosing defaults values rating r reformulated 422 delay impairment itut recommendation g107 4 gives fully analytical expression terms various delay measures mouth toear delay delay receive side point signal coupling occurs delay four wire loop parameters describing various circuit switched packet switch interworking scenarios since focus work pure voip scenarios make following simplifications various delay measures collapse single one mouthtoear delay ii default values proposed 4 used parameters expression delay particular influence echo supposed negligible curve obtained describing id function mouthtoear delay approximated piecewise linear function 11 mouthtoear delay h heavyside func tion composed encoding delay algorithmic packetization delay network delay transmission propagation queuing delay playout delay introduced playout buffer order cope delay variations heavyside function defined follows 423 equipment impairment ie impairment introduced distortion brought together ie currently analytical expression allows compute ie function parameters encoding rate packet loss rate estimates ie must obtained subjective measurements values ie given appendix 5 several codecs ie g711 g729 several packet loss conditions work focus g711 coder introduce distortion due compression hence leads smallest equipment impairment value absence losses ad dition assume g711 coder use implements packet loss concealment algorithm conditions evolution equipment impairment factor ie function average packet loss rate well approximated logarithmic func tion particular assume presence random losses equipment impairment expressed follows 11 e total loss probability ie encompasses losses network losses due arrival packet playout time summary following expression used compute rfactor function observable transport quantities 0024d mouthtoear delay e total loss probability h heavyside function defined equation 4 43 call generation rating order assess quality voice calls placed random times measurement period emulate arrival short business calls pick call arrival times according poisson process mean interarrival time 60 seconds draw call durations according exponential distribution mean 35 minutes 17 randomly generated calls applied packet traces quality assessment since ip telephony applications often use silence suppression reduce sending rate simulate talkspurt silence periods within voice call using periods exponential distribution average 15s 15 packets belonging silence period simply ignored receiver end assume playout buffer used absorb delay variations network playout delay defined difference arrival playout time first packet talkspurt within talkspurt playout times subsequent packets scheduled regular intervals following playout time first one packets arriving 2835 284 2845 285 2855 286 2865 2871357delay msec frequency figure 2 passive measurements distribution oneway transmission delay east west coast us playout time considered lost playout buffer operate fixed adaptive mode fixed mode playout delay always constant adaptive mode adjusted talkspurts work opt fixed playout strategy measured delays jitters small fixed playout strategy would represent worst case scenario thus implement fixed playout delay 75ms quite high still leads excellent results described section 5 quality calls described computed fol lows talkspurt within call compute number packet losses network playback buffer statistics deduce total packet loss rate e talkspurt addition measure mouthtoear delay sum packetization delay 20ms case network delay first packet talkspurt playout delay order assess quality call apply equation 6 talkspurt define rating call average ratings talkspurts 5 results section discuss findings derived experiments measurements first compare results obtained via passive active measurements focus impact link failures voip traffic conclude discussion call rating using methodology proposed section 4 51 delay measurements figure 2 show oneway delay two sprint pops located east west coast united states data shown refers trace collected passive measurement system july 24th 2001 however systematically observed similar delay distributions traces collected sprint monitoring project 13 delay two pops around 2850ms maximum delay variation less 200s delay figures show packets experience almost queueing delay element dominates transmission delay propagation optical fiber 23 performed delay measurements udp packets sent every 20ms reston va san francisco ca period 25 days figure 3 shows distribution oneway east coast west coast delay ms empirical density function figure 3 active measurements distribution oneway transmission delay reston va san francisco ca transmission delay minimum delay 3095ms average delay 3138ms 999 probes experience delay 3285ms see figures results obtained active measurements consistent ones derived passive measurements low delays direct result overprovisioning design strategies followed tier1 isps tier1 backbones designed way link utilization remains 50 absence link failures strategy dictated need commercial isps highly resilient network failures always capable handling shortterm variations traffic demands delay distribution figure 3 shows also another interesting feature rerouting event occurred experiment distribution shows two spikes overlap thus identify two minima 3096ms 3146ms represent propagation delays two routes 3 difference two minima relatively high around 500s difference router hops one derived ttl values found ip packets one additional router along path cannot justify 500s delay increase 23 hand sprint backbone engineered pair pops two ip routhat use disjoint fiber paths experiment 500s increase delay introduced 100km difference fiber path pops rerouting occurred 52 impact failures data traffic section investigate rerouting event best knowledge experimental study failures impact traffic operational ip backbone network explained difficulties involved collecting data traffic time failure within several weeks experi ments voip traffic suffered single failure nevertheless believe fundamental researchers practitioners study failure events order validate behaviors per 3 delay distribution derived passive measurements also shows spikes case however cannot distinguish delays due packet sizes 23 due routing given lack routing information would let us unambiguously identify cause peaks formance routing protocols routing equipment identify appropriate traffic engineering practices deal failures failure perturbed traffic 50 minutes period 0720 utc november 28th 2002 failure event traffic experienced various periods 100 losses rerouted rest experiment 33 hours provide indepth analysis series events related failure identify causes loss periods complement active measurements routing data collected isis listener figure 4 shows delay voice probe packets experienced time failure dot plot represents average delay fivesecond interval figure 5 provides average packet loss rate fivesecond intervals time 0634 link failure detected packets rerouted along alternative path results longer delay takes 100ms complete rerouting packets sent lost although quality voice call would certainly affected loss 100ms worth traffic total impact voice traffic minimal given short time needed rerouting 100ms small jitter induced 500s minute original route restored series 100 loss periods follows lasts several seconds figure 6 shows oneway delay experienced packets one 100 loss periods behavior observed periods see figure packets buffered routers short outages packets experience long delays dropped forwarded along invalid path figure 7 shows sequence numbers packets received end host west coast losses reorderings occur periods clear indication packet drops due congestion events due kind interface router failure time 0648 traffic experiences 100 losses period 12 minutes surprisingly period alternative path identified voice traffic time 0704 secondary path found still successive 100 loss periods fi nally 0719 original path operational time 0736 alternative path chosen used remaining part experiment analysis corresponds observed active measurements routing data provide us information cause events figure 8 illustrates portion network topology routers involved failure routers r1 r5 located 2 different pops solid arrows show primary path used traffic dashed arrows show alternative path used failure table summarizes messages collected isis listener experiment time column indicates time lsps received listener central column isis lsps describes lsps format third column describes impact traffic event reported isis time first rerouting routers via isis loss adjacency r4 fact links r4 signaled strong indication failure router failure opposed link failure said earlier network reacts first event expected 100ms r5 routes traffic along alternative path period 0635 0659 isis listener receives several periodic lsps five routers reporting time utc delay ms east coast west coast figure 4 average delay failure dot corresponds fivesecond interval packet loss rate east coast west coast figure 5 average packet loss rate failure computed fivesecond intervals links fully operational time though traffic suffers successive 100 loss periods 13 minutes r4 oscillates normal operational state ie forwards packets without loss additional delay faulty state traffic dropped however faulty state never lasts long enough give chance routers detect failure time 0648 r4 finally reboots starts collecting lsp messages routers network order build routing table operation usually cpu intensive network size sprint backbone may require minutes complete router collect lsp messages routers periodically send collecting routing information r4 routing table therefore capable handling packet described section 3 router expected send lsp messages infinity hippity cost bit set case r4 set bit r5 means know r4 ready route packets forwards voice traffic r4 dropped time utc delay ms east coast west coast figure oneway delay voice packets first 100 loss period sequence number east coast west coast figure 7 sequence numbers received voice packets first 100 loss period time 0659 r4 builds first routing table traffic partially restored links flapping resulting succession 100 loss periods note traffic restored along alternative path hence longer delays link r1 r4 reported conjecture 100 loss periods due r5 forwarding traffic r4 every time link r4 r5 although r4 route r1 likely links flapping hardware problem r4 starting receiving first bgp updates 4 force frequent recomputations routing table add new destination prefixes finally time 0717 routers report links r4 routing remains stable rest experiment traffic however rerouted along alternative path even original path operational due fact r5 modifies load balancing policy ther4 setup ibgp sessions run tcp peers valid routing table ie received lsp updates time isis lsps impact traffic rerouted link r4 r3 100ms rerouted adjacency r4 recovered r4 loss periods 0706 link r4 flaps 7 times rerouted r3 0700 loss periods 0717 link r4 flaps 5 times rerouted r3 0704 r5 100 loss periods 0717 link r4 flaps 4 times rerouted r3 rerouted link r4 restored link r4 definitely original path table 2 summary events occurred failure event two equal cost paths solid dashed arrows figure 8 routers perform perdestination prefix load balancing r5 case periodically modify criteria ie flow follows path order avoid specific traffic patterns defeat load balancing eg packets belong destination prefixes one path may result utilized order summarize findings divide failure observed two phases first phase time 0634 0659 characterized instabilities packet forwarding router r4 lsps generated traffic experience periods 100 packet loss flapping phase due particular type failure involved entire router likely operating system router effect packet forwarding routing thus unpredictable difficult control protocolwise second phase goes time 0648 0719 instead characterized long outage followed routing instabilities periods 100 loss phase caused router r4 set infinity hip pity cost bit cannot explain problem arised resetting hippity bit collection bgp updates common engineering practice within sprint backbone network important observe first second phase figure 8 routers involved failure solid arrows indicate primary path traffic dashed arrows indicate alternative path r3 time utc call rating east coast west coast figure 9 voice call ratings excluding failure event failure event due isis routing protocol fore expect use different routing protocol eg circuitbased routing mechanisms mpls 25 would mitigate impact failures traffic instead opinion router vendors isps focus efforts improvement reliability routing equipment intended terms better hardware architectures stable software implementations another important direction improvement certainly introduction automatic validation tools router configurations however tools would require first simplify router configuration proce dures side note introducing circuits labelswitched paths top ip routing help simplification effort 53 voice quality section devoted study quality experienced voip user figure 9 shows rating voice calls 25 days experiment place call failure event 50 minutes 25 days emodel applies completed calls capture events loss connectivity figure shows distribution call quality 25 days experiment results derived assuming fixed playout buffer one notice quality calls deviate much mean value fairly 9027 among 3364 calls placed one experiences quality rating 70 lower threshold tollquality currently process investigating caused low quality calls moreover 99 calls experiencing quality 8468 results confirm sprint ip backbone support voice service pstn quality standards good quality voice traffic direct consequence low delays jitter loss rates probes experience without taking account 50 minutes failure average loss rate 019 also studied probability long bursts losses goal verify assumptions distribution packet losses section 4 assumed losses bursty performance packet loss concealment techniques well suited experiment purpose define loss burst length number packets dropped two packets correctly received call rating r frequency east coast west coast figure 10 distribution voice call ratings excluding failure loss burst length frequency occurence 4 016 table 3 repartition loss burst lengths excluding failure end hosts table 3 shows repartition burst length among losses observed period experiment vast majority loss events burst length 1 9984 events burst length less 4 tends indicate packet loss process bursty moreover large majority isolated losses conjecture packet loss concealment techniques would efficient attenuating impact packet losses results shown table 3 line previous work bolot et al 7 suggest distribution burst length approximately geometric least small loss burst lengths future work include indepth study packet loss process 6 conclusion studied feasibility voip backbone network active passive measurements run several weeks experiments derive following conclusions pstn quality voice service delivered sprint ip backbone network delay loss figures indicate quality voice calls would comparable traditional telephone networks pointed voice quality metric interest evaluating feasibility voip service availability service also covers fundamental role major cause quality degradation currently link router failures even though failures occur often inside backbone observed despite careful ip route protec tion link failures significantly although unfrequently impact voip service impact due routing protocols ie isis ospf instead reliability routing equip ment therefore network size increases number nodes links reliable hardware architectures software implementations required well automatic validation tools router configurations investigation needed identify interactions various protocols eg isis ibgp ebgp define proper semantics validation tools introduction circuit label switching networks help mitigating impact failures failure event described section 5 clear example long failure reported consistent way routers network isis protocol efficiently identify alternative routes first rerouting event completed 100ms mpls fastreroute would provide recovery time hand failing unstable router sends invalid messages would cause mpls fail addition routing protocol future work involve experiments longterm measurements aim evaluate likelihood link node failures tier1 ip backbone also intend address problem voip traffic traversing multiple autonomous systems another important area study metrics compare telephone network availability internet availability telephone networks notion availability based downtime individual switches access lines objective metric measure impact network outages customers federal communications commission requires telephone operators report outage affects 90000 lines least minutes rule however difficult apply internet reasons definition line applied ii difficult count many customers affected failure iii customer standpoint difference outages due network due servers eg dns servers web servers etc 7 r advanced topics mplste deployment transmission quality aspects stq provisional planning values equipment impairment factor ie case fecbased error control packet audio internet measurement interpretation internet packet loss use osi isis routing tcpip dual environments design principles accurate passive measurements voice ip performance measuring internet telephony quality today qos measurement internet realtime multimedia services modeling packet loss delay effect realtime multimedia service quality engineering approach computer networking assessment voip quality internet backbones precision timestamping network packets python routeing toolkit analysis measured singlehop delay operational backbone network multiprotocol label switching architecture measurement modelling temporal dependence packet loss tr endtoend packet delay loss behavior internet engineering approach computer networking endtoend routing behavior internet precision timestepping network packets voice ip performance monitoring ctr baekyoung choi sue moon rene cruz zhili zhang christophe diot quantile sampling practical delay monitoring internet backbone networks computer networks international journal computer telecommunications networking v51 n10 p27012716 july 2007 baekyoung choi sue moon rene cruz zhili zhang christophe diot practical delay monitoring isps proceedings 2005 acm conference emerging network experiment technology october 2427 2005 toulouse france feng wang zhuoqing morley mao jia wang lixin gao randy bush measurement study impact routing events endtoend internet path performance acm sigcomm computer communication review v36 n4 october 2006 adjusting forward error correction temporal scaling tcpfriendly streaming mpeg acm transactions multimedia computing communications applications tomccap v1 n4 p315337 november 2005 nate kushman srikanth kandula dina katabi hear must bgp acm sigcomm computer communication review v37 n2 april 2007 athina p markopoulou fouad tobagi mansour j karam assessing quality voice communications internet backbones ieeeacm transactions networking ton v11 n5 p747760 october