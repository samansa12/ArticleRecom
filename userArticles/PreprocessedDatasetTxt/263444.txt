affine structure line correspondences uncalibrated affine cameras abstractthis paper presents linear algorithm recovering 3d affine shape motion line correspondences uncalibrated affine cameras algorithm requires minimum seven line correspondences three views key idea introduction onedimensional projective camera converts 3d affine reconstruction line directions 2d projective reconstruction points addition linebased factorization method also proposed handle redundant views experimental results simulated real image sequences validate robustness accuracy algorithm b introduction using line segments instead points features attracted attention many researchers 1 2 3 4 5 6 7 8 9 various tasks pose estima tion stereo structure motion paper interested structure motion using line correspondences across mutiple images linebased algorithms generally difficult pointbased ones following two reasons parameter space lines non linear though lines linear subspaces linetoline correspondence contains less information pointtopoint one provides one component image plane displacement instead two point correspondence minimum three views essential line correspondences whereas two views suffice point ones case calibrated perspective cameras main results structure line correspondences established 4 10 5 least six line correspondences three views nonlinear algorithms possible least thirteen lines three views linear algorithm possible basic idea thirteenline linear algorithm similar eightpoint one 11 based introduction redundant set intermediate parameters significant overparametrization problem leads instability algorithm reported 4 thirteenline algorithm extended uncalibrated camera case 12 9 situation might expected better free parameters introduced however 27 tensor components introduced intermediate parameters still subject 8 complicated algebraic constraints algorithm long quan cnrsgravirinria zirst 655 avenue de leurope 38330 montbonnot france email longquanimagfr takeo kanade robotics institute carnegie mellon university pittsburgh pa 15213 usa email tkcscmuedu hardly stable subsequent nonlinear optimization step almost unavoidable refine solution 5 4 parallel lot work 13 14 15 16 17 18 19 20 21 22 14 16 23 17 24 25 structure motion simplified camera models varing orthographic projections via weak paraperspective affine cameras almost exclusively point features simplified camera models provide good approximation perpsective projection width depth object small compared viewing distance importantly expose ambiguities arise perspective effects diminish cases easier use simplified models also advisable explicitly eliminating ambiguities algorithm one avoids computing parameters inherently illconditioned another important advantage working uncalibrated affine cameras reconstruction affine rather projective uncalibrated projective cameras motivated one hand lack satisfactory linebased algorithms projective cameras fact affine camera good model many practical cases investigate properties projection lines affine cameras propose linear algorithm affine structure line correspondences key idea introduction onedimensional projective camera converts 3d affine reconstruction line direc tions 2d projective reconstruction points linear algorithm requires minimum seven lines three images also prove seven lines three images strict minimum data needed affine structure uncalibrated affine cameras always two possible solutions result extends previous results koenderink van doorn 14 affine structure minimum two views five points deal redundant views also present linebased factorisation algorithm extends previous pointbased factorisation methods 18 21 22 preliminary version work presented 26 paper organized follows section ii affine camera model briefly reviewed investigate properties projection lines affine camera introduce onedimensional projective camera section iii section iv focused study uncalibrated onedimensional camera section present also linear algorithm 2d projective reconstruction equivalent 3d affine reconstruction ieeepami vol 199 line directions later linear estimation translational component uncalibrated affine camera given section v affine shape recovery described section vi handle redundant views linebased factorisation method proposed section ix passage metric structure affine structure using known camera parameters described section xi finally section xiii discussions concluding remarks given throughout paper tensors matrices denoted upper case boldface vectors lower case boldface scalars either plain letters lower case greek ii review affine camera model projective pinhole camera projection point p 3 point described 3 theta 4 homogeneous projection matrix restricted class camera models setting third row perspective camera p 3theta4 0 0 0 obtain affine camera initially introduced mundy zisserman 27 affine camera 3theta4 encompasses uncalibrated versions orthographic weak perspective paraperspective projection models reduced camera models provide good approximation perspective projection model depth object small compared viewing distance detailed relations applications one refer 20 22 28 29 13 points affine spaces ir 3 ir 2 naturally embedded mappings w 7 thus use relative coordinates points respect given reference point instance centroid set points vector 0 cancelled obtain following linear mapping space points image points deltaw basic equation affine camera points iii affine camera lines consider line ir 3 point x 0 direction affine camera 3theta4 projects image line 3theta4 passing image point direction equation describes linear mapping direction vectors 3d lines 2d lines reflects key property affine camera lines parallel 3d remain parallel image derived even directly using projective geometry considering line direction x point infinity projective line p 3 line direction dw point infinity projective line equation 4 immediately follows affine camera preserves points infinity definition comparing equation 4 equation 1a projection p 3 p 2 see equation 4 nothing projective projection p 2 p 1 consider 3d 2d line directions 2d 1d projective points key observation allows us establish following affine reconstruction line directions twodimensional affine camera equivalent projective reconstruction points onedimensional projective camera one major remaining efforts concerned projective reconstruction points p 1 many recent works 30 31 32 33 34 35 36 37 38 39 40 41 10 42 43 projective reconstruction geometry multiviews two dimensional uncalibrated projective cameras particularly tensorial formalism developed triggs 36 interesting powerful extend study case onedimensional camera turns nice properties absent 2d case iv uncalibrated onedimensional camera trilinear tensor three views first rewrite equation 4 following form use dw x stress dealing points quan affine structure line correspondences 3 projective spaces p 2 p 1 rather line direc tions vector spaces ir 3 ir 2 examine matching constraints multiple views point since two viewing lines projective plane always intersect point constraint possible less three views one constraint case 3 views let three views point x given follows rewritten matrix form u x basic reconstruction equation onedimensional camera vector zero fi fi fi fi fi fi expansion determinant produces trilinear constraint three viewsx short homogeneous tensor whose components ijk 3 theta 3 minors following 6 theta 3 joint projection matrix components tensor made explicit 2 11 bracket ij 0 k 00 denotes 3 theta 3 minor row vector joint projection matrix bar j k denotes dualization easily seen constraint obtained adding views reduces trilinearity proves uniqueness trilinear constraint moreover homogeneous tensor 2theta2theta2 dof minimal parametrization three views since three views exactly 3 theta 2 theta 3 gamma dof projective transformation p 2 point correspondence three views gives one linear constraint tensor components ijk establish following tensor components ijk estimated linearly least 7 points p 1 point obtained remarkable result onedimensional projective camera trilinear tensor encapsulates exactly information needed projective reconstruction p 2 namely unique matching constraint minimally parametrizes three views estimated linearly contrast 2d projective camera case multilinear constraints algebraically redundant linear estimation approximation based overparametrization b retrieving normal forms projection matrices geometry three views conveniently completely represented projection matrices associated view previous section trilinear tensor expressed terms projection matrices seek map trilinear tensor representation back projection matrix representation three views without loss generality always take following normal forms three projection matrices actually set projection matrices fmm parametrized way minimum 7 constraints imposed observe projective transformation p 2 2theta2 0 arbitrary 2vector v leaves invariant transforms c c cannot zero vector normalized c c 1 choose arbitrary vector v gammaa c easily verified amounts saying 4 ieeepami vol 199 0 taken rank 1 matrix projective transformation ie 1 aea 1 nonzero scalar ae 2vector c gammaa 2 1 hence 0 represented two parameters ratio 1 2 ae therefore minimal 7 parameter representation set projection matrices obtained projection matrices given 13 trilinear tensor ijk defined 11 becomes represents dulization 12 consider tensor ijk 8vector eight homogeneous equations 15 rearranged 7 nonhomogeneous ones taking ratios l 8 7 separating entries 0 g 7theta6 e matrix g 7theta6 given since parameter vector cannot zero 7 theta 6 matrix equation 16 rank 5 thus 6 theta 6 minors must vanish minors algebraically independent gives quadratic polynomial 1 2 ae follows ae eliminating ae obtain homogeneous quadratic equation 1 quadratic equation may easily solved 1 2 ae given following linear equation two solutions 1 2 thus obtain two possible solutions projection finally 6vector projection matrix 00 linearly solved equation 16 instance using svd terms 0 c 2d projective reconstruction3d affine line direction reconstruction complete determination projection matrices three views projective reconstruction points p 2 equivalent affine reconstruction line directions ir 3 performed projection equation point view homogeneous linear equation unknown point x p 2 2 first second row vector matrix one point correspondence three views following homogeneous linear equation system designates constant entry equation system easily solved x either considered point affine line direction ir 3 v uncalibrated translations recover full affine structure lines still need find vectors 3theta1 affine cameras defined 2 represent image translations magnification components camera recall line correspondences two viewsnow 2d view instead 1d viewdo impose constraints camera motion minimum number views required three interpretation plane image line given view defined plane going line projection center wellknown geometric interpretation constraint available line correspondence across three views cf 3 5 interpretation planes different views must intersect common line space quan affine structure line correspondences 5 equation line image given l substituting produces equation interpretation plane l space l 3theta4 plane therefore given 4vector p also expressed normal vector plane image line direction nw written interpretation plane 2 theta 3 submatrices 2theta3 representing uncalibrated camera orientations already obtained twodimensional projective reconstruction proceed recover uncalibrated translations interpretation plane n x p image line direction component completely determined previously computed fmm fourth component remains undetermined depends linearly notice direction vector still arbitrarily individually rescaled interpretation plane properly written hence ratio significant justifies homogenization vector far made explicit equation interpretation planes lines terms image line projection matrix geometric constraint line correspondences camera motion gives 3 theta 4 matrix whose rows three interpretation planes rank two hence 3 theta 3 minors vanish two total four minors algebraically independent connected quadratic identities 44 vanishing two minors provides two constraints camera motion given line correspondence three views minor formed first three columns contains known quantities provides constraint directions easy show equivalent tensor using suitable onedimensional projective transformations taking two first three columns say first two last column obtain following vanishing determinant fi fi fi fi fi fi l l 0t 0 l 00t 00 designates constant entry expanding minor cofactors last column gives homogeneous linear equation 0 theta theta theta theta designates constant 3vector row collecting vanishing minors together obtainb theta theta theta theta theta thetac ntheta9 n line correspondences three views stage since origin coordinate frame space yet fixed may take scaling factor say final homogeneous linear equations solve theta theta theta thetac ntheta7 0 system homogeneous linear equations nicely solved svd factorisation least squares solution subject jjt right singular vector corresponding smallest singular value vi affine shape projection matrices three views completely determined common scaling factor relatively easy task compute affine shape two methods obtain shape described one based projective representation lines another minimal representation lines inspired 5 method 1 projective representation projective line space defined either pencil planes pencil planes defined two projective planes two points matrix wp 6 ieeepami vol 199 rank 2 kernel must also dimension 2 range wp defines pencil planes null space defines projective line space using svd factorize wp gives us everything want let svd wp ordered singular values two points line might taken v 3 v 4 line given one advantage method using subset selection 45 near singular views detected discarded b method 2 minimal representation space line 4 dof minimally represented four parameters one possibility suggested 5 uses 4vector l line defined intersection two planes 1 0 gammaa gammax 0 1 gammab gammay 0 equations geometrically minimal representation gives 3d line direction b 1 passing point representation excludes therefore lines direction b parallel xy plane two representations needed excluding either directions 0 b c 0 c 3 representations together completely describe line space case problem automatically selecting one three representations directions lines obtained first step factorisation allowing us switch one three representations remain two unknown parameters x 0 0 line get solution x 0 0 two planes defining line belong pencil planes defined wp still stack two planes top wp get matrix since matrix still rank 2 3 theta 3 minors vanish minor involving x 0 0 gives linear equation x 0 0 n views linear equation system obtained antheta2 nicely solved using least squares line vii affinestructurefromlines theorem summarizing results obtained established following recovery affine shape affine motion line correspondences uncalibrated affine camera minimum number views needed three minimum number lines required seven linear solu tion always two solutions recovered affine structure result compared koenderink doorn 14 affine structure minimum two views five points also note difference wellknown results established calibrated uncalibrated projective cameras 3 4 5 39 minimum 13 lines three views required linear solution important note affine camera method presented paper number line correspondences achieving linear solution reduced 13 7 great practical importance viii outline 7line theta 3view algorithm linear algorithm recover 3d affine shapemotion least 7 line correspondences three views uncalibrated affine cameras may outlined follows 1 image line segment represented endpoints direction vector line homogeneous coordinates point p 1 2 compute tensor components ijk defined equation linearly least 7 lines 3 views 3 retrieve projection matrices fmm onedimensional camera estimated tensor using equations 17 18 16 always two solutions 4 perform 2d projective reconstruction using equation recovers directions affine lines space uncalibrated rotations camera motion 5 solve uncalibrated translation vector using equation 20 linear least squares 6 compute final affine lines space using equation 21 22 ix linebased factorisation method image stream linear affine reconstruction algorithm described deals redundant lines limited three views section discuss redundant views extending algorithm minimum three number n 3 views past years family algorithms structure motion using highly redundant image sequences called factorisation methods extensively studied quan affine structure line correspondences 7 18 19 20 21 22 point correspondences affine cameras algorithms family directly decompose feature points image stream object shape camera motion recently factorisation based algorithm proposed triggs sturm 36 37 3d projective reconstruction accomodate linebased algorithm projective factorisation schema handle redundant views 2d projective reconstruction rescaling according 36 37 3d projective reconstruction equivalent rescaling 2d image points already proven recovering directions affine lines space equivalent 2d projective reconstruction onedimensional projective images therefore reconstruction line directions 3d obtained rescaling direction vectors viewed points p 1 1d image point three views cf equation 6 scale factors 0 00 taken individuallyare ar bitrary however taken whole projective structure points x p 2 one way recover scale factors use basic reconstruction equation 7 directly alternatively observe following matrix identity u rank left matrix therefore 3 4 theta 4 minors vanish three algebraically independent instance u expanded cofactors last column obtain linear homogeneous equation therefore solved linearly using designate known constant entry matrix triplet views image points consistently rescaled according equation 23 case n 3 views take appropriate triplets among n views view contained least two triplets rescaling equations triplets views given point chained together n views give consistent b direction factorisationstep 1 suppose given line correspondences n views view number indexed superscript line number subscript create 2n theta measurement matrix wd lines views stacking direction vectors j properly rescaled j lines n views follows wm n since following matrix equation holds measurement rank wd three factorisation method applied wd let svd factorisation cf 45 46 wd 3 theta 3 diagonal matrix sigma d3 obtained keeping first three singular values assuming singular values ordered sigma ud3 vd3 first 3 columns rows u v product ud3 sigma d3v d3 gives best rank 3 approximation wd one possible solution may taken nonsingular 3 theta 3 matrix 3theta3 either considered projective transformation p 2 affine transformation 3theta3 also valid solutions means recovered direction matrix rotation matrix defined affine transformation c translation factorisationstep 2 stack interpretation planes different views given line form following n theta 4 measurement matrix planes l l 0t 0 8 ieeepami vol 199 matrix wp geometrically represents pencil planes still rank 2 three rows wp taking minor involving obtain fi fi fi fi fi fi fi l l j j l 0 expanding minor cofactors last column gives homogeneous linear equation j theta theta theta delta theta designates constant 3vector row collecting minors together theta theta theta 0 0 may take scaling factor say final homogeneous linear equations solve theta theta 0 0 system equations nicely solved svd factorisation w least squares solution subject jjt singular vector corresponding smallest singular value w note efficiency computation improved block diagonal structure w exploited shape factorisationstep 3 shape reconstruction method developed three views extends directly 3 views given n views line across n views augment matrix w p 3 theta 4 n theta 4 matrix apply exactly method x outline linebased factorisation algorithm linebased factorisation algorithm outlined follows 1 triplets views compute tensor ijk associated triplet rescale directions lines triplet using equation 23 2 chain together rescaling factors line across sequence 3 factorise rescaled measurement matrix direction get uncalibrated rotations directions affine lines 4 factorise measurement matrix using constraints motion get uncalibrated translation vector 5 factorise measurement matrix interpretation planes line correspondence views get two points line xi euclidean structure calibrated affine camera far worked uncalibrated affine camera recovered shape motion defined affine transformation space cameras calibrated affine structure converted euclidean one unknown global scale factor following decomposition submatrix 2theta3 affine camera 3theta4 introduced 22 metric information calibrated affine camera completely contained affine intrinsic parameters kk view associated uncalibrated rotation subject unknown affine transformation x upgrades affine structure euclidiean one linear solution may expected soon three views quan affine structure line correspondences 9 solve entries xx however may happen linear estimate xx positivedefinite due noise alternative nonlinear solution using cholesky parametrization ensures positivedefiniteness found 22 obtain appropriate carry rotations camera directions lines remaining steps uncalibrated affine camera case take weak perspective particular affine camera model aspect ratio camera euclidean structure obtained way xii experimental results simulation setup first use simulated images validate theoretical development algorithm preserve realism simulation set follows first real camera calibrated placing known object 50 cm 3 front camera camera moved around object different positions calibration procedure gives projection matrices different positions projection matrices rounded affine projection matrices three different positions cover roughly 45 field view selected set 3d line segments within cube generated synthetically projected onto different image planes affine projection matrices simulated images size 512 theta 512 3d 2d line segments represented endpoints noisefree line segments perturbed follows take advantage relatively higher accuracy line position obtained line fitting process practice 2d line segment first resampled list evenly spaced points line segment position point perturbed varying levels noise uniform distribution final perturbed line obtained least squares fit perturbed point data reconstruction performed 21 line segments two different resample rates average residual error defined average distance midpoint image line segment reprojected line image plane 3d reconstructed line table average residual errors reconstruction given various noise levels number points used fit line length line segment pixels resample rate corresponds roughly digitization process table ii shows results number points used fit line equal one fourth length line segment notice degradation increasing noise level graceful reconstruction results remain acceptable sigma55 pixel noise good results show reconstruction algorithm numerically stable comparing table ii shows higher resample rate gives better results confirms importance line fitting procedurethe key advantage line features point features another influential factor stability algorithm number lines used table iii confirms lines used better results obtained test pixel error set sigma15 lines 8 13 17 21 average residual error 19 16 059 026 iii average residual errors reconstruction sigma 15 pixel noise various number lines b experiment real images fujinonphotometrics ccd camera used aquire sequence images box size 12 theta 12 theta 1265cm image resolution 576 theta 384 three frames sequence used experiments shown figure 1 cannylike edge detector first applied image contour points linked fitted line segments least squares line correspondences across three views selected hand total 46 lines selected shown figure 2 fig 2 line segments selected across image sequence reconstruction algorithm generates infinite 3d lines defined two arbitrary points 3d line segments obtained follows reproject 3d lines one image plane image plane selected corresponding original image line segments orthogonally projected onto reprojected lines obtain reprojected line segments finally backprojecting reprojected line segments space obtain 3d line segments defined two endpoints excellent reconstruction results obtained average residual error one tenth pixel achieved figure 3 shows two views reconstructed 3d line segments notice affine structure box almost perfectly recovered table iv shows influence number line segments average residual error 0045 0061 010 015 020 025 average residual errors various noise levels reconstruction 21 lines three views number points fit line length line segment pixels average residual error 0077 026 031 044 065 11 ii average residual errors reconstruction various noise levels number points fit line segment one fourth length line segment fig 1 three original images box used experiments used algorithm reconstruction results degrade gracefully decreasing number lines average residual error 13 088 028 012 iv table residual errors reconstruction different number line segments table v shows influence distribution line segments space instance one degenerate case structure motion line segments space lie plane actually images line segments lie three different planespentagon face star shape face rectangle faceof box also performed experiments line segments lying two planes table v shows results various different twoplane configu rations compared threeplane configuration reconstruction algorithm almost equally well illustrate effect using affine camera model approximation perspective camera used bigger cube size 30 theta 30 theta 30cm two half times size first smaller cube affine approximation perspective camera becoming less accurate smaller cube sequence images cube aquired almost conditions smaller cube perspective effect big cube slightly pronounced shown figure 4 configuration line segments preserved total 39 line segments three views used perform recon struction figure 5 illustrates two reprojected views reconstructed 3d line segments compared figure 3 reconstruction slightly degraded top view figure 5 notice one segment falls little apart pentagon face cube globally degradation quite graceful average residual error 03 pixels compared 012 pixels smaller cube affine structures obtained converted euclidean ones global scaling factor soon know aspect ratio 22 actually 1 camera used figure 6 shows rectified affine shape illustrated figure 3 two sides box accurately orthogonal xiii discussion linear linebased structure motion algorithm uncalibrated affine cameras presented algorithm requires minimum seven line correspondences three views also proven seven lines three views strict minimum data needed recover affine structure uncalibrated affine cameras words contrast projective cameras linear algorithm based overparametrization gives algorithm intrinsic stability previous results koenderink van doorn 14 affine structure motion using point correspondences therefore extended line correspondences handle case redundant views factorisation method also developed experimental results based real simulated image sequences demonstrate accuracy stability algorithms algorithms presented paper developed within framework suggested 22 points straightforward integrate points lines framework quan affine structure line correspondences 11 line configuration starrectpent starrect pentrect starpent average residual error 012 0078 014 028 table residual errors reconstruction different data fig 3 reconstructed 3d line segments general view top view fig 4 one original image big cube image sequence fig 5 two views reconstructed line segments big box general view top view fig 6 side view euclidean shape obtained using known aspect ratio camera acknowledgement work supported cnrs french min istere de leducation gratefully acknowledged would like thank morris n chiba b triggs help development work r deter mination attitude 3d objects sigle perspective view stereovision sensor fusion estimation rigid body motion using straight line correspondences linear algorithm motion estimation using straight line correspondences motion structure point line matches 3d dynamique scene analysis motion structure line correspondences closedform solution uniqueness op timization optimal estimation object pose single perspective view motion points lines uncalibrated case unified theory structure motion computer program reconstructing scene two projections projective reconstruction line correspon dences interpretation visual motion affine structure mo tion affine shape representation motion reference points finding point correspondences determining motion rigid object two weak perspective views recursive affine structure motion image sequences shape motion image streams orthography factorization method linear incremental acquisition invariant shape models image sequences 3d motion recovery via affine epipolar geometry paraperspective factorization method shape motion recovery selfcalibration affine camera multiple views object pose link weak perspective para perspective full perspec tive phd thesis recognition linear combinations models factorization method affine structure line correspondences geometric invariance computer vision obtaining surface orientation texels perspective projection perspective approximations seen three dimensions uncalibrated stereo rig stereo uncalibrated cameras matrice fondamentale et autocalibration en vision par ordinateur canonic representations geometries multiple projective views relative 3d reconstruction using multiple uncalibrated images invariants six points projective reconstruction three uncalibrated images matching constraints joint image factorization based algorithm multiimage projective structure motion geometry algebra point line correspondences n images lines points three views integrated approach algebraic functions recognition structure motion using line correspondences dual computation projective shape camera positions multiple images ac tive visual navigation using nonmetric structure algorithms invariant theory matrix computation numerical recipes c tr ctr nassir navab yakup genc mirko appel lines one orthographic two perspective views ieee transactions pattern analysis machine intelligence v25 n7 p912917 july jongseung park interactive 3d reconstruction multiple images primitivebased approach pattern recognition letters v26 n16 p25582571 december 2005 fredrik kahl anders heyden affine structure motion points lines conics international journal computer vision v33 n3 p163180 sept 1999 long quan twoway ambiguity 2d projective reconstruction three uncalibrated 1d images ieee transactions pattern analysis machine intelligence v23 n2 p212216 february 2001 yichen wei eyal ofek long quan heungyeung shum modeling hair multiple views acm transactions graphics tog v24 n3 july 2005 adrien bartoli peter sturm structurefrommotion using lines representation triangulation bundle adjustment computer vision image understanding v100 n3 p416441 december 2005 magnus oskarsson kalle strm niels chr overgaard minimal structure motion problems missing data 1d retina vision journal mathematical imaging vision v26 n3 p327343 december 2006 kalle strm magnus oskarsson solutions ambiguities structure motion problem 1dretinal vision journal mathematical imaging vision v12 n2 p121135 april 2000 olivier faugeras long quan peter strum selfcalibration 1d projective camera application selfcalibration 2d projective camera ieee transactions pattern analysis machine intelligence v22 n10 p11791185 october 2000 kalle strm fredrik kahl ambiguous configurations 1d structure motion problem journal mathematical imaging vision v18 n2 p191203 march loongfah cheong chinhwee peh depth distortion calibration uncertainty computer vision image understanding v93 n3 p221244 march 2004 ben tordoff david murray reactive control zoom fixating using perspective affine cameras ieee transactions pattern analysis machine intelligence v26 n1 p98112 january 2004 hayman torfi thrhallsson david murray tracking zooming using affine transfer multifocal tensors international journal computer vision v51 n1 p3762 january