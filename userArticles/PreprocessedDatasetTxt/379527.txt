performance fluid simulations novel shared buffer management system consider switching system multiple ports share common buffer fifo logical queue port port may support large number flows connections approximately homogeneous statistical characteristics common qos requirements cell loss maximum delay heterogeneity may exist across ports first contribution buffer management scheme based buffer admission control integrated connection admission control switch time scheme fair efficient robust sharing buffer resources across ports scheme based resourcesharing technique virtual partitioning second major contribution advance practice discreteevent fluid simulations simulations approximations celllevel simulations offer orders magnitude speedup third contribution paper formulation solution problem optimal allocation bandwidth buffers port specific delay bounds lossless multiplexing framework finally report extensive simulation results scheme found effective efficient robust b introduction paper considers model switching node shown figure 1 multiplen ports bandwidths share common buffer size b shared buffer fifo logical queue implemented linkedlist port port may support large number flows connections envision less homogeneous statistical characteris tics heterogeneity existing across ports view compatible qos requirements common delay bound connections port bound probability either violating delay bound losing cells specific port shared buffer management interest time see instance irl78 fgo83 hbo93 cha93 gcg95 wma95 cha96 approach taken rather different work shares objectives recent work virtual queueing see swr97 references therein pervc behavior emulated shared fifo buffer however algorithms different work necessary make linkages explicit work three main contributions first propose shared buffer management scheme based buffer admission control bac integrated connection admission control cac switch time fair efficient robust sharing buffer resource across multiple ports recent work cac single port systems emw95 emi97 lzt97 lzi97 rrr97 used crucially idea trading bandwidth buffer arrive designs allocate specific amounts bandwidth buffer per connection approach followed multiport shared buffer systems imperative cac bac work tandem dual objectives satisfying qos requires protecting isolating connections extracting multiplexing gains sharing buffer resources need balanced shared memory architectures mind base scheme virtual partitioning mzi96 bmi97 mzi97 technique fair efficient robust resource point time ports using less nominal allocations may called underloaded accorded higher priority conversely ports exceeding nominal alloca tions may called overloaded given lower priority finally priority mechanism implemented dynamic adaptation classical technique trunk reservation aki84 key90 rei91 wherein cells port admitted buffer free capacity buffer exceeds reservation parameter specific ports loading status role reserved capacity protect underloaded ports dynamic reservation mechanism forces traffic overloaded ports backoff event underloaded ports need claim allocated share note pushout mechanism explicitly used scheme ease implementa tion may easily added also note state information required implement bac port consists current queue port current total buffer occupancy traffic classesports differentiated qos also degree isolation protection required csz93 realized nominal allocations reservation parameters instance greedy best effort classport relatively large reservation parameters working classical trunk reservation displays extraordinary robustness properties also optimal reservation parameters scale slowly eg logarithmically sub linearly size problem rei91 mgh91 observe similar properties suffices reserved capacities small broad ranges reservation parameters offer desirable perfor mance former key efficiency latter robustness scheme fluid simulation bac sample path total buffer occupancy qt exhibits persistence stick iness thresholds determined nominal allocations reservation parameters thresholds points bac active admits fractional amounts fluid generated affected ports determination fractions based particular notion fairness wherein affected ports treated equally alternative notions fairness may readily sub stituted fractions called fairshare computed onset sticky period simulations solving equation point similar issues arise fair queueing generalized processor sharing maxmin fair abr services techniques fluid simulation developed expected extend applications traffic source models considered work adversarial extent permitted dual leaky bucket regulators assumed typically present police sources case lossless multiplexing sources permitted collude worst case sources synchronize burst peak rates time contrasting less conservative statistical multiplexing approach sources assumed noncollusive burst activity asynchronous ie phases independent uniformly distributed random variables addition allow small probabilities bound possibility qos requirements delay andor loss satisfied note design statistical multiplexing relies design lossless mul tiplexing complete treatment composite phase 1 lossless phase 2 statistical approach taken emw95 lopresti et al lzt97 important recent paper formulated general bandwidthbuffer tradeoff problem lossless multiplexing framework addition treating buffers bandwidth two resources analysis statistical multiplexing contrast conservative device emw95 allowed reduction singleresource problem extension resource allocation problem lossless multiplexing shared buffer multiport system integrates notion traffic class profile input generated exogenously possibly market conditions also delay bounds traffic class solution general problem classifies bandwidthbuffer systems new way sheds light desired mix resources match traffic mixes le boudec leb96 also considered problem optimal resource allocation inhomogeneous flows lossless framework optimization criterion quite different shown mmo95 singleresource problem chernoff estimate loss probability asynchronous independent sources maximized source rate waveforms onoff periodic extremal result used emi97 formalize choice onoff waveforms extremal bounding approach followed emw95 recently rajagopal reisslein ross rrr97 important work shown extremal source rate processes tworesource formulation statistical multiplexing problem since numerical results lzt97 rrr97 system capacity statistical multiplexing show marked increase obtained approach emw95 emi97 based reduction single resource onoff waveforms adopt latter since substantially easier implement section 2 gives details system model buffer admission control section 3 formulates solves problem optimally allocating buffers bandwidth ports lossless multiplexing framework section 4 describes issues fluid simulation bac section 5 describes numerical results based statistical multiplexing concluding remarks sec6 ii description system model buffer management system model nport system shown figure 1 term con nection used interchangeably source shared buffer capacity b let denote aggregate output bandwidth note port workconserving workconservation apply source rate time fig 2 rate aggregate output bandwidth unlike generalized processor sharing gps possible ports fully utilized ports backlogged port logical virtual fifo queue implemented linkedlist cell addresses data ram epa97 note situations may arise buffer full queue one ports case incoming data port without queue may access port directly blocked let denote logical queue port time denotes total buffer occupancy assume k connections port tacit assumption made connections port share common qos requirements policed dual leaky bucket regulators similar iden tical specifications analysis next section assumed connections port homogeneous dual leaky bucket regulators specified succeeding section fluid simulations allow additional generality heterogeneous traffic classes port qos requirement probability loss connections going port delay bound dual leaky bucket regulator specifications mean sustainable rate token rate b burst tolerance token buffer size p peak rate connection traffic rate regulated device assumed onoff periodic extremal sense source rate maximum permitted rate p amount data theta generated period also maximum given mean rate period r extremal rate process denoted omegagamma shown figure 2 b description buffer admission control let b denote nominal allocation buffer capacity port assume b calculated technique appropriate single port systems emw95 lzt97 rrr97 takes account thus process nominal buffer allocation cac intimately coupled typically extent buffer overallocation subject design influenced issues multiplexing gain across ports degree isolation desired000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111111111111111 traffic admission block admission traffic block admit admit r r u n bn port n port 1 port 1 traffic port n traffic fig 3 illustration buffer admission control nport system ports 1 n carrying guaranteed service best effort traffic respectively ports ports misbehaving due say breakdown policing regulators presence best effort traffic ports issues probed section 5 numerical investigations define status port overloaded underloaded q port define pair reservation parameters r u superscripts u denoting underloaded overloaded respectively parameters chosen r u typically r u shall see main reason r u give traffic port lower priority accessing buffer buffer admission control bac algorithm follows admit traffic port buffer one following conditions satisfied fflport underloaded ie fflport overloaded ie q fluid flow point view bac complete policy global thresholds specified important aspect bac principle adopt based particular notion fairness admits fluid affected ports rates correspond equal fractions rate total fluid generated sources port principle may readily substituted another admitting fractions proportional prespecified weights celllevel control scheme rwm95 treating admitted fractions control variables meet qos requirements illustrate application bac scenario port 1 carrying guaranteed service traffic port n carrying best effort traffic tacit assumption traffic port 1 tightly regulated admissioncontrolled traffic port n loosely regulated perhaps peak rate policed qos constraints cac slack hence flow port 1 given priority accessing buffer port n one level control buffer management reflected selection nominal allocations b 1 bn yet another level control exercised reservation pa rameters set n figure 3 illustrates bac two ports consider instant time port n overloaded port 1 underloaded 4and sources become activebesides reserved buffer capacity made available port 1 mechanism working favor every departing cell port n systematically replaced arriving cell port 1 iii bandwidth buffer allocations design problem first phase design problem considered lossless multiplexing framework second phase statistical multiplexing antecedents work emw95 lzt97 emi97 lossless multiplexing problem follows given see figure 1 c shared buffer capacity aggregate output bandwidth respectively connections port subject dual leaky bucket regulation parameters furthermore sources onoff periodic extremal see figure 2 also given traffic class profile j represents relative mix connections various traffic classes desired operating point desired operating point kj scalar k hence proxy capacity system specified traffic mix qos requirements zero loss delay bound classport problem obtain bufferbandwidth allocations b port capacity k maximized subject resource constraints shown shortly problem equivalent following lossless multiplexing design problem b c j subject burst size time theta oni given 1 2 solution problem given following subsection lossless multiplexing begin briefly reviewing notion virtual buffertrunk system single source emw95 consider single source class periodic onoff rate pro cessomegagamma supplies initially empty infinite buffer output port bandwidth c c r stability let b denote maximum buffer content time easy see f fig 4 two cases class minmax design problem k sources class connected port constraint implied lossless multiplexing constraint implied bound maximum delay thus obtain design problem stated 47 next systematically normalize respect b c k let resource constraints 5 translate also note fq g ft g fd g dimensionless parameters hence design problem equivalent following subject analyze problem help first consider two cases class 1 1 reasons become clear shortly former may called bandwidth constrained latter balanced see figure 4 case delay requirement necessitates disproportionate amount bandwidth expended clearly point e locally attractive allocation point case ii delay requirement stringent makes balanced allocation point locally attractive however shall see global considerations lead allocations different local optima minmax problem 1618 little thought shows classport globally optimum allocation lie segment shown figure 4 hence constraint 18 may replaced following using 19 may eliminate problem obtain following version ae p subject two cases 22 correspond whether limiting resource bandwidth buffer respectively note feasible solution always exists two cases consider depending upon location corner point fq respect separating hyperplane flspace 22 first simpler case may referred globally bandwidth constrained case analogy previously discussed classification single class certainly case holds class bandwidth constrained ie 1 24 holds easy see solution minmax problem consider alternative 24 namely e 0 may termed globally balanced case case may deduced solution minmax problem stated 2123 must lie separating hyperplane buffer bandwidth simultaneously exhausted ie follows minmax problem reduces min subject 26 inequality constraints 23 also problem lp simple solution also exploited lzt97 solution incorporated summary given design problem 47 stated terms original variables proposition 1 let globally bandwidthconstrained case e 0 case maximum capacity obtained following buffer bandwidth allocations ii globally balanced case e 0 let classes indexed decreasing order periods ie let k smallest integer capacity k maximized following allocations k eb tonj bc tonkbc tonj jk theta k tonkdk maximum capacity k obtained relation c buffer allocations obtained relation satisfies differences two cases result noteworthy globally bandwidthconstrained case sum allocated bandwidths equals given aggregate bandwidth case buffers contrast globally balanced case buffers bandwidth totally consumed allocations dichotomy broad implications briefly touch upon suppose former case classport n best effort generous delay require ments say dn bc clearly giving greater weight best effort class trafficclass profile j ie increasing jn perhaps induced tariffs quantity e 28 made change negative positive would make system globally balanced resulting full utilization resources proper allocations b statistical multiplexing objective take bufferbandwidth allocation maximize number connections k exploiting statistical multiplexing loss probability particular mentioned section 1 consider sharing buffer resources across ports governed bac technique given computing loss probability given k based chernoff asymptotic approximation technique due emw95 key observation allocation b based behavior virtual buffertrunk system single source peak buffer utilization b peak bandwidth utilization c see 10 relation key reduction singleresource may take bandwidth bandwidth utilization single connection k denoted u ik account assumption sources phases independent uniformly distributed period loss probability port bandwidth load port u k1 u ik since distribution random variables bino mial straightforward obtain following chernoff asymptotic approximation p lossi proposition 2 log log capacity k maxi value k iv fluid simulations section investigate technical issues fluid simulation proposed buffer admission control scheme simulation also allow additional generality possibly several classes connections port class corresponding dual regulator note fluid flow representation approximation celllevel behavior celllevel details behavior sources trunks buffers smoothed steady rate fluid flow sources causing piecewise linear changes buffer oc cupancy events admissionremoval connections startsends bursts connections key events fluid simulations coincide jumps fluid rates addition source related events buffer control related events example buffer becomes empty full rate flow buffer undergoes discontinuous change high speed system atm advantage fluid simulation accrues fact events occur much slower timescale compared cell arrivals depar tures thereby requiring much less simulation time cover given amount actual system time obviously fluid simulations must eventdriven order realize advantage eventdriven simulations event set system determines logical complexity larger event set complex simulation since necessary determine earliest next event among larger number possibilities simulations described source model traffic individual connection class j going port consists onoff periodic rate waveforms extremal respect dual leaky bucket regulator class see figure 2 phases independent random variables uniformly distributed period waveform rate process aggregate traffic offered port superposition rate processes connections port important feature fluid simulations described reflection bac logical queues fq g ports computed monitored course queues individual connections set events relevant fluid simulation two types source events ii buffer events buffer events threshold crossings subdivided portspecific ii global proceed enumerate describe events type 1 source state changes state changes discrete events corresponding discontinuities piecewise constant aggregate rate process port ffl type 2 port threshold crossings logical queue port empties port uses nominal allocation ie q incoming fluid treated differently control scheme hence rate change port buffer occupancy dq dt encounters discontinuity result discontinuous well postpone detailed discussion event except note change port status caused event causes changes admitted fluid rates classes feeding port ffl type 3 global threshold crossings events characterized ij class j status indicator one thresholds encountered jump dqdt since r ij traffic class j admitted buffer immediately 0 b later discuss detail behavior system following event event types 2 3 correspond instants bac active stickiness associated thresholds ie thresholds behave like attractors holding queue fixed next source state change similar feature shown exist analyzed loss priority control scheme emi94 stickiness result control policy thresholds requires admitting fraction fluid belonging affected classes exact composition admitted fluid various classes controlled different ways depending qos considerations motivated fair ness equal fractions flows admitted characterization analysis events proceed describe aforementioned events processed simulation events triggers computations determine acceptance buffer usage loss rates port source class till next event occurs scheduling future events also dependent computations set ports grouped subsets based status ports zero occupancy denotes underloaded ports nonzero occupancy denotes border ports ie ports overload thresholds denotes strictly overloaded ports a1 single threshold system benefit reader first consider simple case reservation parameters common ports ie r u thus one global threshold b gamma r buffer occupancy however even case inhomogeneity exists account diverse character number connections ports qos specifications diversity reflected possibly different nominal allocations b different ports piecewise constant rate fluid generated port following cases 1 active case fluid going system accepted ie dt dt 2 case bac blocks flows overloaded ports however ports border overload underload ie q must treated carefully fluid system start avoid complication assume border ports q instant define following rate function ffi terms fraction admitted fluid overloaded ports i2o note ffi monotonically increases fi following cases 0 case underloaded ports cause net increase buffer occupancy hence fluid overloaded ports admitted ie b f1 0 fluid coming system admitted control exercised ie c case operating value net occupancy exhibits stickiness consider case queue one ports nominal occupancy say q going port admitted port subsequently becomes underloaded case ternatively fairshare fi causes port stay overloaded fairshare admitted neither conditions true occupancy port stays unchanged q portlevel stickiness induced notion port status undergoes discontinuous change condition q crossed thus contribution port net drift given dt 0 case modified rate function i2o rate function used instead 40 determine fi net rate change buffer occupancy dqdt case fluid ports admitted however fraction fluid ports q admitted keep dq dt 0 thus dt 4 entire buffer occupied uniform fraction fi fluid going underloaded border ports admitted net drift non positive define rate function clearly satisfies cases f1 0 fluid underloaded ports border ports admitted ie 0 admitted fraction fi satisfies net occupancy sticks till next event a2 general case extend analysis events general case reservation parameters arbitrary number classes connections indexed port let ij denote piecewise constant rate fluid class j offered port time total rate fluid generated port time given strictly admissible legal component rate given l superscript r ij denotes status port time type 1 events simply processed since merely involve changing values legal fluid rates assume time total occupancy global threshold ie qt r r one reservation parameters r ij port occupancies nominal values ie q rates change quantities instant expressed simply dt dt l l i2o l indicator function 1 argument true 0 otherwise note since assumed port queue nominal value later modify equations 46 include terms ports assumption 46 determines evolution port occupancies till event type 2 type 3 occurs ie one thresholds encountered type 2 events occur one port queues nominal allocations fb g case set b nonempty need include ports rate calculations assume initially total occupancy qt global threshold ports b define following aggregate rate border 1 flows legal flow rates ports computed using 45 superscript reservation parameters following cases 1 l case dq positive none border fluid admitted since port becomes strictly overloaded instant 2 l case dq strictly negative border fluid admitted since port becomes underloaded instant 3 l case demonstrates stickiness port level fluid system cell behavior experiences fluctuations longterm adherence condi tion case contention various classes fluid going port following notion fairness propose fraction ff border fluid border class admitted fraction determined equation dt gives cases combined following pair equations determine dq dt ff ports b would like distinguish portlevel border superscript bp globally border flows defined later dt l information system evolution determined next event equation dt dt l l l i2o l type 3 events computationally involved also impact control scheme simplicity begin case instant j one reservation parameters port define globally border flow rate bg superscript represents port statusu possibilities system evolution follows 1 dqdt possible legal flows cause total occupancy increase since would strictly disallowed thus require dt 1 l l i2o l 2 condition occurs admitting legal border flows still causes total occupancy decrease implies dt 2 l l i2o l 3 case occurs dqdt 1 0 dqdt 2 0 admit fraction fi border fluid would keep total occupancy unchanged fraction determined equation dt l l i2o l form equation 53 generic computation fairshare various contexts fair queueing generalized processor sharing maxmin fairness solution procedure described appendix b 6 must make distinctions flows ports events divide flows following four classes l rate equations must include ports admitting fraction fi border fluid results following rate changes dt l l l l dt dt possibilities follows 1 legal flows admitted 2 unrestricted access 3 fraction fi border flows admitted determined equation solved using procedure outlined appendix v numerical investigation section present simulation results case studies efficacy bac influence schemes parameters system performance cases studied involve statistical multiplexing fact shall see cases number connections considered significantly supported buffer sharing among ports also cell loss ratios clr given results ratios lost cells cells offered buffer also computed fraction time losses occur reported finally consider two classes connections rather different characteristics results reported dupli cate one set class results grouped five subsections sec 51 giving background data benchmarks whole section background data benchmarks study standard sources connections either class 1 2 specifications given table classes studied earlier emw95 lzt97 rrr97 note non regulated sources rogue besteffort also considered study table ii contains basic data class rmbps pmbps thetacells tonms tms dual leaky bucket parameters statistical multiplexing gain capacity may expected sharing buffer single port 4port systems considered cases clr range choice made keep burden simulations acceptable buffer management multiport system table ii complete sharing case virtual partitioning reservation parameters null thus multiport system consideration given selective isolation protection purposes qos hence multiplexing gain reported optimistic table ii class single port system 4port system sharing gain ii buffer requirements single multiport systems complete sharing speed15mbps kmax maximum admissible number connections single port system given l 15mbps thus kmax takes account statistical multiplexing across connections port following experiments take multiplexing advantage ports account connections system belong guaranteed service category assume multiplexing advantage ports buffer shared best effort greedy rogue connections b bac performance homogeneous loading provide basic performance data bac case considered four ports numbers connections port see figure 5 reservation parameters common ports r u parameter r varied figures 5a 6a k connections figures 5b 6b k connections port figure plots unconditional conditional clr great importance clr conditional port load port ratio cells lost cells offered periods port underloaded quantity small bac working effectively conjunction cac figures 5 6 show effect reservation parameters conditional unconditional clr values two different nominal buffer allocations b figure 5 set aggressively 333 cells per port figure 6 b set conservatively class 1 connections high value pr 40 reservation mechanism helps substantially reduce clr conditional underload conservative setting fb g class 2 connections benign pr 10 reservation uniformly effective restricting underloaded clr cases clr conditional underload uniformly lower unconditional clr reservation effectively trades overloaded clr underloaded clr unconditional clr increases slowly r thus cost small amount throughput reservation mechanism bac enforces compliance resource allocations cac even allowing effective sharing buffers across ports c inhomogeneity among objective investigate capabilities reservation mechanism support diverse qos individual ports see figure 7 single variable r controls reservation parameters four ports r u nominal allocations ports set conservatively figure 7 number connections ports case selected ports isolated buffer allocations matching nominal allocations qos experienced ports would substantially different figure 7a intended difference clr completely diluted clr experienced ports roughly similar figure 7b shows similar dilution lesser extent main observation experiment small value r eg introduces wide separation qos cost small amount throughput minimize slowly varying difference throughput design select smallest value r satisfies clr ports selection usually determined stringent clr requirement effect besteffort traffic consider case one ports port 4 4port system dedicated carrying traffic regulated dual leaky buckets traffic port4 called besteffort designed detrimental ports carrying regulated traffic multiplexing point view assume aggregate source traffic port 4 offered buffer constant rate slightly excess bandwidth port queue initially empty indeed good implementation besteffort service would restrict peak rate exceed port speed however objective test bac presence greedy source takes buffer space permitted chose fig 8a 59 fig 8b 60 reservation applied best effort port ie r u ports r u results figure 8 show scheme hence provides substantial protection isolation regulated sources carrying substantial best effort traffic e effect misbehaving connection figure 9 show effect rogue connection port 4 4port system ideal conditions system described section 52 reservation parameters nominal allocations however expect multiplexing advantage across ports scenario set cells bac intended protect wellbehaved ports 13 model misbehaving guaranteed service connection connection defective dual bucket regulator fails regulate mean rate hence connection pumps fluid system steadily peak rate case differs besteffort case section 54 reservation applied uniformly ports also port misbehaving connection wellbehaved connections thus reservation restricts wellbehaved ports well rogue port always backlogged account multiplexing bandwidth connections port 4 results figure 9 reveal benefits reservation mechanism ports carrying regulated traffic effectively protected effects rogue connection difference cases b due part fact former peak rate one source significant fraction 615 port speed vi conclusions paper proposed evaluated shared buffer management scheme buffer admission control coupled connection admission control also a1e05000101 clr clr conditional port underload clr conditional port overload clr b clr clr conditional port underload clr conditional port overload clr fig 5 effect reservation parameter unconditional conditional cell loss ratios 4port system see sec 52 k class 1 connections port connections port problem optimal allocation buffers bandwidth ports shared memory multiport system formulated solved lossless multiplexing framework scheme found efficient robust extensions work include first analytical technique evaluate benefits statistically multiplexing buffer resource across ports second development fluid simulation techniques generalized processor sharing discipline multiport system r overload performance engineered networks nonhierarchical hierarchical rout ing virtual partitioning resource sharing statedependent priorities analysis space priority management shared memory atm switch dynamic queue length thresholds shared memory atm switch traffic shaping network node theory new approach allocating buffers bandwidth heterogenous advances sharedmemory designs gigabit atm switching sharing memory opti mally optimal buffer sharing simulation simple lossdelay priority scheme shared memory atm fabrics buffer management packet switch optimal control trunk reservation loss networks network calculus made easy cac algorithm vbr connections vbr trunk source time scale optimal bufferbandwidthtradeoff regulated traffic atm node analysis optimal design aggregatedleastbusyalternative routing symmetrical lossless networks trunk reservations multiple time scale regulation worst case processes atm network con trol virtual partitioning dynamic priorities fair efficient resource sharing several services hierarchical virtual partitioning algorithms virtual private networking optimal trunk reservation critically loaded link packet multiplexers adversarial regulated traffic dynamic call admission control atm multiplexer onoff sources virtual queueing techniques ubr buffer allocation scheme atm networks complete sharing based virtual partition tr supporting realtime applications integrated services packet network buffer allocation scheme atm networks virtual partitioning dynamic priorities traffic shaping network node source time scale optimal bufferbandwidth tradeoff regulated traffic atm node ctr david nicol guanhua yan discrete event fluid modeling background tcp traffic acm transactions modeling computer simulation tomacs v14 n3 p211250 july 2004