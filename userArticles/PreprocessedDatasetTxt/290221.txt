downward separation fails catastrophically limited nondeterminism classes beta hierarchy consists classes betakrm nplogknsubseteq rm np unlike collapses polynomial hierarchy boolean hierarchy collapses beta hierarchy seem translate closure complement seem cause hierarchy collapse consistent set collapses separations levels hierarchy respects rm cdots subseteq rm np construct oracle relative collapses separations hold time make distinct levels hierarchy closed computation wish give two relatively tame examples k geq 1 construct oracle relative rm cdots another oracle relative rm also construct oracle relative b introduction although standard nondeterministic algorithms solve many npcomplete problems nondeterministic moves problems seem require different amounts nondeterminism instance clique solved n nondeterministic moves pratts algorithm 16 solves primality believed npcomplete 2 nondeterministic moves motivated different amounts nondeterminism apparently needed solve problems np kintala fischer 9 10 11 defined limited nondeterminism classes within np including classes call fi hierarchy structural properties fi classes studied alvarez diaz toran 1 6 classes arose yet work papadimitriou yannakakis 15 particular problems inside np eg quasigroup isomorphism solved olog 2 n nondeterministic moves kintala fischer 11 defined p fn class languages accepted nondeterministic polynomialtime bounded turing machine makes cary nondeterministic moves equivalently ofn binary nondeterministic moves inputs length n mostly interested polylogarithmic amounts nondeterminism defined diaz toran 6 wrote fi fn denote kintala fischers p fn fi k denote pl k papadimitriou yannakakis 15 wrote npfn denote p fn work surveyed 7 adopt npfn notation papadimitriou yannakakis well fi k notation diaz toran reiterate definition 11 ffl language l belongs npfn exists polynomialtime bounded nondeterministic turing machine accepts l makes ofn nondeterministic choices inputs length n note npfn dtime2 ofn ffl fi hierarchy consists yale university dept computer science po box 208285 new ct 065208285 email beigelrichardcsyaleedu research supported part united states national science foundation grant ccr8958528 netherlands organization scientific research nwo visitors grant b 62403 z university kentucky dept computer science lexington ky 40506 email goldsmitcsengrukyedu research supported part national science foundation grant ccr9315354 kintala fischer 11 constructed oracles make fi hierarchy collapse desired level oracle relative every k 1 oracle relative oracles also make polynomial hierarchy boolean hierarchy collapse desired level 12 4 polynomial boolean hierarchies nice property collapses translate upward ie kth 1st levels equal levels contained kth 5 4 also reflected nondeterminism hierarchy known b hierarchy studied buss goldsmith 3 classes b hierarchy defined two parameters exponent polynomial time bound ignoring log factors constant factor k log n bits nondeterminism hierarchy exhibits upward collapse time k attempts prove analogous translational property fi hierarchy failed fact obvious technique extends collapse constant factor number nondeterministic bits giving one aforementioned upward collapses b hierarchy hemachandra jha 8 attempted explain failure examining tally sets fi hierarchy k constructed oracle makes find explanation unsatisfactory considers tally sets known behavior relativized fi hierarchies fi 1 fi collapse statement form fi separation statement form fi closure statement form nonclosure statement form fi requirement collapse separation closure nonclosure call set requirements consistent consistent known behavior relativized fi hierarchies stated standard axioms given set requirements let x union 0 1 intervals j collapse fi j belongs easy see consistent iff following conditions hold b b separation fi 6 fi b belong 2 closure nonclosure fi b belong consistent set requirements construct oracle fi hierarchy relative satisfies example k 0 oracle makes fi another oracle makes fi also make distinct levels hierarchy closed complementation long consistent collapses fi cannot fi prove two initial results every k ffl oracle makes first k levels fi hierarchy coincide makes remaining levels distinct theorem 23 ffl oracle makes first k levels fi hierarchy coincide 1st level different kth remaining levels equal theorem 25 techniques two constructions combined get consistent finite infinite set collapses separations collapse fi k fi j downward separation fails fi hierarchy 3 k j code complete set fi k fi j coding techniques also code fi fi wish long doesnt violate collapses fi k collapsed fi j either neither closed complement finally section 3 extend results fi r real r 0 one theme complexity theory ask whether contains easy sets assuming p 6 np answer question depends definition easy ladner 14 showed p 6 np contains incomplete set hand oracles relative p 6 np contains tally sets 13 b sets conp 2 unknown whether assumption implies contains set dtimen polylog positive answer would improve many constructions literature step toward understanding question construct oracle relative p 6 np contains set fi hierarchy corollary 22 2 limited nondeterminism hierarchies construction gives almost techniques used subsequent theorems theorem 21 let g 0 g 1 polynomialtime computable monotone increasing functions log n 2 og 1 n g 0 n 2 n o1 g 0 n o1 exists oracle p fact tally set npg 1 n gamma npg 0 n proof let c accepts x within steps oracle making g 0 jxj nondeterministic choicesg c p complete every let pn polynomial time bound npg 0 n oracle turing machine recognizing c let ag note 2 npg 1 n construction consists coding c polynomialtime recoverable manner making npg 0 n p diagonalizing ie guaranteeing machine recognizes set p 6 npg 1 n end construction refer strings beginning 1 coding strings refer strings beginning 0 diagonalizing strings assume p enumerated turing machines p p runs time bounded n sufficiently large n construction proceeds stages end stage decided strings length n extended p recognize stage consists one diagonalization determines n continued encoding c stage choose n n sgamma1 n power 2 running time p inputs length n n n satisfies inequality specified specified true almost n let value depends oracle strings length coding strings length length gamma 1 order diagonalize p x must calculated computation may query coding strings code computations c yet decided computations turn rely strings yet decided strings turn may depend coding strings diagonalizing strings 4 r beigel j goldsmith already belong queried p x computation corresponding coding string p x queries computation corresponding coding string one computations queries restrained claim potential witnesses x possible queries cascade queries deciding p x restrict decision x encoding c coding string z codes computation depends strings length bounded jzj c w directly depends pjwj2 g0 jwj shorter strings computation p x may query n strings length bounded n strings may code computation string length n s2 computations depends pn s2 2 g0 n s2 strings depends pn s4 2 g0 n s4 strings etc recursion cut strings length gamma 1 already determined length total number queries needed decide p x bounded n times product terms form pn s2 log log n gamma log log log log n gamma log log log terms bounded pn 2 g0 n therefore total number queries p x depends n 2 ologsg0 n less 2 g1 n sufficiently large n inequality n must satisfy n pn 2 g0 n thus remains unrestrained diagonalizing string length put p x rejects x set x adding string 0xy necessary thus guarantee p accept shows npg 1 n 6 p since complete npg 0 n shows npg 0 n p complete stage letting n finishing coding c w begun queried stage preceding theorem tight even restrict binary nondeterministic moves via relativizable proof pre viously sanchis 17 observed classes separated tally sets also separate exponentialtime versions classes see 8 elaboration corollary 22 oracle relative proof let previous theorem k fi theorem 23 let gdelta delta polynomialtime computable monotone increasing variables function log exists oracle fact tally set npgn 2i theorem ignore relationship npgn npgn 2i take next theorem difference construction previous one infinitely many diag onalizations going stage guarantee eth machine npgn 2i accept diagonal set thus counting argument construction identical proof theorem 21 downward separation fails fi hierarchy 5 corollary 24 k oracle relative proof let gn preceding theorem theorem 25 let g 0 g 1 polynomialtime computable monotone increasing functions log n 2 og 1 n g 0 n 2 n o1 g 0 n o1 exists oracle fact tally set npg 1 n gamma npg 0 n sketch construction two encodings one diagonalization addition coding c p also code e generic p complete set pspace accepts x using tape squares oracle ag also count space used oracle tape end construction one prefers binary oracles one may code 0 1 2 00 01 10 diagonalization make p x 6 x coding string c k w queried proceed coding string e w queried jwj jxj simply restrain coding string oracle restrain coding strings e w since 2 g1 jwj coding strings e w upper bound total number queries generated computation p proof theorem 21 therefore restraining coding strings queried computation p x cascade queries restrain coding strings thus decide e w end stage complete codings begun queried stage changed subsequent stage corollary 26 every k oracle relative slight modification technique get far bizarre collapses theorem 27 let gdelta delta polynomialtime computable monotone increasing variables function log n 2 ogn gn 2 n o1 1 exists oracle 0 fact tally set npgn 2i include full proof result although uses techniques mentioned since shows pieces fit together proof let c accepts x within steps oracle making gjxj nondeterministic choicesg c complete npgn let pn nondeterministic time bound 6 r beigel j goldsmith turing machine recognizing c without loss generality assume almost n let ag convenience define gn construction consists coding c 2i npgn 2i gamma 1 0 npgn 0 p npgn 2i diagonalizing ie guaranteeing npgn 2i machine recognizes set 2i1 npgn 2i 1 6 npgn 2i end construction x 2 c assume npgn enumerated oracle ntms runs time bounded n e sufficiently large n construction proceeds stages stage consists encodings one diagonalization determines n end stage decided strings length n coding strings extended e2i recognize 2i1 stage let ii choose n n sgamma1 n power 2 runs time bounded n e inputs length n n satisfies inequality specified true almost n let n value depends strings length 1 coding involving witnesses length less freeze length gamma 1 order diagonalize need calculate e2i x may generate cascade queries diagonalizing strings already belong queried cascade restrained coding strings may queried well coding nondeterministically coding strings thought potential witnesses membership queries potential witness w 2 c 2j w yet decided potential witness restrained 2j 2i c 2j w yet decided compute c 2j w recursively show number queries generated cascade queries smaller following bounds 1 number potential witnesses w 2 c 2j 2 number potential fact bound 1 implies bound 2 follows number witnesses 2i1 x 2 gjxj2i1 number witnesses c 2j w witness c 2j w restrained jwj jxj 2j 2i thus monotonicity g gjwj thus restraining potential witnesses described impede encodings restrict decision 2i1 x c 2j w restrict coding strings dont worry happens potential witnesses 2j later stage affected codings ie c 2j w completed stage later diagonalizations affect show potential witnesses x 2 2i1 possible queries cascade queries encode c k coding string z codes computation depends strings length bounded jzj w depends pjwj k2 shorter strings e2i x 2 gn2i computations computations may query n e strings length bounded n e string may code computation c e need expand compu downward separation fails fi hierarchy 7 tation 2j 2i computations depends pn e2 2i2 gn e2 2i strings depends pn e4 2i2 gn e4 2i strings etc fore total number queries needed decide ei x bounded product log e log terms 2 ogn2i1 therefore total number queries depends 2 ogn2i1 less 2 gn2i1 sufficiently large n thus remains unrestrained diagonalizing string length put rejects x set adding string 0xy necessary thus guarantee accept shows npgn 2i since c 2i complete npgn 2i encoding guarantees corollary 28 oracle relative k fi fi 2k2 corollary 29 consistent pattern collapses separations k oracle relative pattern holds notice set collapses recursive oracle also nonrecursive addition collapsing separating fi j fi k code cofi k fi k separate two involves additional argument theorem 210 let gdelta delta polynomialtime computable monotone increasing variables function log n 2 ogn gn 2 n o1 exists oracle p fact tally sets npgn 2i npgn 2i sketch convenience separate npgn 2i1 conpgn 2i rather npgn 2i 2 conpgn 2i given quirements equivalent order separate npgn 2i 1 use set 2i1 npgn 2i construction identical theorem 27 except interleave extra diagonalization construc tion codings diagonalizations analogous earlier constructions counting argument identical code complete sets c 2i npgn 2i npgn 2i gamma 1 diagonalize npgn 2i machine recognizes thus double duty even stages diagonalizes odd stages conpgn 2i guarantee 2i1 conpgn 2i make sure e e th machine npgn 2i recognize holds x e2i1 x diagonalization differs earlier ones queries witness x 2 2i1 queries coding string computation c 2j w safely restrain coding string may exclude w 2i1 doesnt matter long e2i1 x dont care happens 2i1 strings 8 r beigel j goldsmith lengths n sgamma1 n retrace computation queries witness x 2 2i1 first restrain wit nesses continue leads rejecting computation 2i1 x diagonalization successful leads accepting computation preserve lexicographically least accepting path computation cascade queries computation restrains 2 ogn2i1 strings restrain witnesses x 2 2i1 thus find unrestrained witness add e2i1 x desired therefore additional set diagonalization requirements interleaved previouslydescribed diagonalizations collapses theorem 211 let gdelta delta polynomialtime computable monotone increasing variables function log n 2 ogn gn 2 n o1 exists oracle p fact tally sets npgn 2i sketch construct npgn 2i machine recognizes set 2i1 c addition order make follows let n npgn machine recognizing c nondeterministic time bounded pn regardless oracle form encoding query coding strings witness string c queried course diagonalization npgn 2i 6 npgn 2i retrace computation 2j restrain queried witness string jxj sufficiently large without deciding c 2j1 x counting argument previous proofs thus add extra encoding without interfering collapses codings gives us following stronger version hemachandra jhas oracle 8 corollary 212 k oracle relative j separations witnessed tally sets combining results techniques theorems 27 210 211 get following strong result corollary 213 consistent set requirements oracle relative fi hierarchy satisfies requirements constructing oracle one must careful closing classes com plement particular close one class complement separate another complement cannot make two classes equal corollary 29 implies uncountably many different patterns collapse realized relativized worlds set requirements recursive oracle made recursive certainly patterns realized nonrecursive oracles downward separation fails fi hierarchy 9 3 dense fi hierarchies previously considered fi r r natural number class nplog r n meaningful whenever r nonnegative real number regardless whether r computable even allow r real make fi hierarchy obey consistent set requirements example make fi hierarchy look like cantor set theorem 31 let x subset 1 1 exists oracle 1 fi x note may uncountably many distinct fi two rationals two reals need separate distinct fi q q rational proof without loss generality assume x union intervals containing one point every interval x contains rational point therefore contains countably many intervals satisfy following requirements maximal interval x depending type log log n log log n addition rational number q 1 nplog q n log log n 6 nplog q n 6 nplog q n log log n make p 6 nplog n log log n well construction slight modification proof theorem 27 perform diagonalizations wellfounded order maintaining codings go along significant difference diagonalizations performed increasing order suppose stage making ae npbn coding string npcn computation queried restrain string 9ncn bn 8ncn bn counting argument note could also close distinct fi r complement wish theorem 4 open problems class fi k contained np dtime2 log k n work shows relativizing proof would like know whether easy languages np gamma p best show wellbehaved function f oracle relative best possible translation collapse acknowledgments grateful leen torenvliet andrew klapper martin kummer helpful discussions andrew klapper bill gasarch martin kummer careful proofreading earlier drafts r complexity classes complete problems p npcomplete relativizations p nondeterminism within p boolean hierarchy structural properties classes bounded nondeterminism limited nondeterminism sigact news defying upward downward separation computations restricted number nondeterministic steps computations restricted number nondeterministic steps refining nondeterminism relativized polynomialtime bounded computations relativized polynomial hierarchies exactly k levels sparse sets np structure polynomial time reducibility limited nondeterminism complexity vc dimension every prime succinct certificate constructing language instances based partial information tr