visual input penbased computers design implementation camerabased humancomputer interface acquisition handwriting presented camera focuses standard sheet paper images common pen trajectory tip pen tracked contact paper detected recovered trajectory shown sufficient spatiotemporal resolution accuracy enable handwritten character recognition 100 subjects used system provided large heterogeneous set examples showing system convenient accurate b writing adopt machines ones typing mouseclicking knobturning learning use keyboard eectively requires time patience ditto menubased mouse inter faces current interfaces designed habitual computer users limited range tasks computer revolution reach benet majority world population intuitive interfaces designed machines become helpers rather ever complicated tools must designed understand us rather us learn use third shortcoming inadequacy machines rest world well integrated machines lack sensory system machine know happening neighborhood rather sits waits human approach touch skillfully hardware desktop whiteboard visitor oce completely unknown oce pc many tasks machine simply interfaces inadequate one avenue towards improving humanmachine interfaces imitate nature develop senses machines take vision cameras may miniaturized thus allowing development small cheap hardware humans easily read body language sketches handwriting produced humans machine could would provide natural friendly eective visionbased interface interface would allow capturing much information current interfaces ignore computer industry recognized advantages using handwriting humanmachine communication modality penbased interfaces provide convenience exibility small size unsuccessful introduction visionary apple newton early 90s new generation penbased pdas established market pdas eg popular palmpilot represent interesting compromise input device computer screen screen must large possible convenience use small possible portability optimal size identied market approximately 12x8cm makes pdas acceptable denitely excellent counts handwriting may also captured using video camera computer vision techniques rather traditional tablets touchsensitive screens attractive alternative cameras may miniaturized thus making interface much smaller furthermore visionbased system would allow user write convenient eg write piece paper normal pen blackboard etc regardless size location article present rst fully online visionbased interface conveniently accurately capturing handwriting sketching interface designed small simple use built single consumerelectronics video camera captures handwriting high temporal 60hz spatial 6000x2500 samples resolution without using special writing instrument allows user write normal speed within large writing area half lettersize page output quality sucient recognition input interface consists camera normal piece paper normal pen camera focuses sheet paper images pen tip computer analysis resulting images enables trajectory pen tracked contact pen paper detected paper organized follows section 11 summarize previous work area allow us motivate approach design described section 2 section 3 presents number experiments explore performance system concluding observations well themes future research collected section 4 11 previous work literature handwriting recognition see 10 22 25 comprehensive surveys divided two main areas research oline online systems oline systems deal static image system looks handwritten words recognition online systems obtain position pen function time directly interface online systems better information recognition since timing information since avoid initial search step oline counterparts popular input devices handwriting electronic tablets online capturing optical scanners oline conversion course interested building online human machine interfaces integration electronic physical aspects oce explored two ambitious experimental systems digital desk 30 31 developed rank xerox europarc merges physical objects paper documents pencils electronic counterparts using computer vision video projection computer screen projected onto physical desk using video projector camera set watch workspace surface projected image surface image area coincide tablet digitizer nger tracked camera like system developed inpg grenoble 4 5 used input mousetype information system allowing one select highlight words paper documents cut paste portions text draw gures etc liveboard 6 19 developed xerox similar concept digital desk device replacement pads ipchart paper used meetings computer screen projected onto whiteboard cordless pen used input image could displayed onto boards placed dierent locations input boards overlaid allowing way remote collaboration digital desk liveboard steps towards integration paper documents computing environment systems motivate development humancomputer interfaces collect interpret sketches handwriting require special hardware tablets instrumented pens visionbased interfaces 2 14 15 18 32 handwriting described literature memopen 18 consists special pen carries small ccd camera close tip stress sensor micro computer memory camera captures series snapshots writing stress sensor detects pressure applied ballpoint record penupdown strokes images captured camera include partial portion writing whole handwritten trace recovered overlaying successive snapshots system quasi online since timing information provided causality image collection however corresponding recognizer would need look ink trace images recognition also user forced write special purpose stylus rather common pen alternative approaches 2 32 consist video camera aimed user writing piece paper camera provides sequence images frequency 19 hz last image sequence thresholded order segment written text temporal order handwriting reconstructed batch process detecting trace ink produced two successive images detection may obtained performing image dierencing successive images location segmented text user required write white pen carefully controlled lighting conditions 2 system provides location pen tip image still requires batch processing text written besides ink trace detection method prone errors due changes lighting conditions small movements writing surface contrast mentioned systems approach 14 15 fully online obtains data xed video camera allows user maximum exibility choosing virtually pen writing surface track pen tip real time order reconstruct trajectory accurately independently changes lighting show section 25 see also g 5 interface increases spatial resolution interface factor ten compared batch inktrace approach 2 32 improves robustness respect lighting small motions writing surface pen tip tracked continuously user writing pen traveling top paper detection strokes corresponding ink trace added burden system pays described improvements vision system pen tracking design interface subject following constraints components camera frame grabber computer must cheap readily available user able write comfortable position using normal pen interface simple intuitive users training time eort minimal acquired handwritten trajectory sucient spatiotemporal information enable recognition rst premise constrains selection video camera commercial consumer electronics devices typical lowcost cameras spatial resolution 480x640 pixels rows x cols frequency cameras interlaced frame composed two halfframes maximum resolution 240x640 pixels frequency given cuto temporal frequency handwriting 20 hz 12 24 29 well nyquist frequency handwriting working making sure frequency component handwriting lost spatial resolution interface enables clear legibility acquired handwriting figure 1c presents one example image provided camera located writing hand shown g 1b resulting acquired trajectory signature shown magnied g 1d sequence approximately occupies 20 image pixels per centimeter writing spatial accuracy interface 01 pixels thus resolution system 200 samples per centimeter signature well trajectories presented gure easily readable showing ratio image pixels per centimeter writing provides sucient information human perform recognition handwriting examples shown paper follow similar ratio pixels per centimeter writing order satisfy premises interface require calibration provides user exibility arranging relative positions camera piece paper two conditions imposed onto user one camera located clear sight pen tip writing implement sucient contrast piece paper figure 1 shows block diagram system experimental setup example image provided camera three pen tip trajectories captured interface along corresponding pendown strokes examples show important dierence interface conventional handwriting capture devices obtain continuous trajectory tracking position pen tip images sequence applications trajectory must segmented strokes corresponding ink trace pendown strokes strokes corresponding movement paper penup strokes method developed detect penupdown strokes well design prototyping interface main contributions paper 21 initialization preprocessing detection localization position pen tip rst frame selection template used detection subsequent frames rst problem solve two possible scenarios user writes pen familiar system b unknown pen used familiarpen case easy handle system may use previously stored template representing pen tip detect position image correlation number methods initialize system pen unknown initialization method semiautomatic one requires small amount user coop eration based reasonable assumptions assume user writing darkcolored pen lightcolored piece paper assume pen tip conical shape assume edges pen tip paper larger contrast edge pen tip nger see g 2i rst assumption restricts pen used system well dened contrast paper hence transparent pen pens without contrast could used restriction severe since pens come sort colors quite simple get one satisfy requirement second assumption true commercial pens third assumption restrict paper lighter human skin requirement easily satised writing piece common white paper display image captured camera screen computer rectangular box overlaid image shown gure 2a user required place pen tip inside displayed box ready start writing system watches activity within box measured image dierencing frames pen tip enters box systems waits activity within box meaning pen tip detector pen classifier ballpoint detector camera initialization preprocessing filter b c 100 200 300 400 500 600100200 50 100 150 200 250102030g 50 100 150 200 250102030h 50 100 150 200 25010203040 50 100 150 200 25010203040 figure 1 overview system block diagram system camera feeds sequence images preprocessing stage sec 21 block initializes algorithm ie nds initial position pen selects template rectangular subregion image corresponding pen tip subsequent frames preprocessing stage function cutting piece image around predicted position pen tip feeding next block pen tip detector sec 22 task nding position pen tip frame sequence lter sec 23 recursive estimator predicts position tip next frame based estimate current position velocity acceleration pen lter also estimates likely position pen tip missing frames ballpoint detector sec 25 nds position end pen tip ie place pen contact paper user writing finally last block system checks presence ink paper positions ballpoint pen detected sec 26 b experimental setup system require calibration user exibility arranging relative positions camera piece paper order write comfortably long system clear sight pen tip c image provided camera user writing area larger half lettersize page image last frame corresponding trajectory shown pen tip tracked continuously user writing pendown strokes pen moving top paper penup strokes complete tracked trajectory shown pendown strokes corresponding trajectory fh two examples handwritten sequences acquired interface hi corresponding pendown strokes user taken comfortable position start writing activity within box returned low period time bigger 200 ms system acquires pen tip template sends audible signal user starts tracking figure 2i shows pen tip whose conical shape projects onto image plane triangle one borders triangle corresponds edge pen tip users nger two boundaries correspond edges pen tip piece paper detection extraction pen tip template reduced nding boundary points pen tip computing corresponding centroid selecting portion image around centroid edges pen tip paper bigger contrast edge pen tip nger thus look two boundaries detection extraction template boundaries pen tip located using cannys edge detector 3 shown gure 2c since detection extraction pen tip single frame reliable due changes illumination system collects information pen tip frames extracting template algorithm summarized gure 2 selection pen tip template performed beginning acquisition function initialization preprocessing module subsequent frames extract region interest centered around predicted position pen tip region interest used following block system detect actual position centroid pen tip current image 22 pen tip detection second module system task detecting position pen tip current frame sequence solution task well known optimal signal detection literature 8 26 assuming signal detected known exactly except additive white noise optimal detector matched lter ie linear lter looks b c e 1st quadrant 2nd quadrant 3rd quadrant estimated edge voted quad ballpoint finger 2nd voted quad voted quad ballpoint finger figure 2 tracking initialization image provided user white rectangle initialization box b user place pen tip inside box system acquire tracking template image dierencing used detect pen tip gets inside box gure shows result image dierencing pen enters tip acquisition area c boundaries pen tip extracted using cannys edge detector inside initialization box pixels high contrast selected dots displays boundary pixels cross indicates centroid subpixel resolution location edge elements achieved tting parabolic cylinder contrast surface neighborhood pixel orientation boundary edge elements obtained cannys detector e dierent boundaries pen tip obtained clustering orientation edge elements four quadrants interpolating lines corresponding clustered pixels f case one boundaries reliably detected pen tip boundary obtained searching image brightness prole along lines perpendicular detected boundary points maximum contrast proles dene missing boundary detection boundaries pen tip performed sequence frames order increase robustness template extraction nal centroid position obtained mean location centroid individual frame g triangular model pen tip completely specied location centroid tip orientation axis tip positions nger ballpoint pen tip axis dened line passing centroid boundary pixels whose orientation mean orientation boundary lines h image brightness prole across estimated pen tip axis positions ballpoint nger extracted performing 1d edge detection prole subpixel accuracy obtained tting parabola edge detection result final template pen tip automatically extracted interface predicted position pen tip predicted position pen tip likely position pen tip given location maximum correlation location maximum correlation region interest position pen tip centered predicted pen tip template correlation figure 3 pen tip detector detection pen tip obtained system locating maximum normalized correlation pen tip template subimage centered predicted position pen tip system analyzes values maximum normalized correlation detect whether pen tip within predicted region interest value maximum correlation lower threshold system emits audible signal continues look pen tip place waiting user realize tracking lost pen tip must returned region interest system waits frames pen tip return sight tracking stops like signal detected case signal consists pixels represent pen tip noise two components one component due noise acquisition images one due shadows due pen markings paper due changes apparent size orientation pen tip sequence images acquisition noise result combination many factors like changes illumination due light ickering automatic gain camera quantization noise changes gain frame grabber etc factors additive changes apparent size orientation pen user writing signicantly distorts pen tip image shown gure 3 clearly neither component noise strictly satises additive white noise assumptions matched lter however rst approximation assume pen tip detected frame using matched lter system nal localization pen tip performed tting triangle image tip described section 25 23 filtering lter predicts likely position pen tip following frame based current predicted position velocity acceleration pen tip location pen tip given pen tip detector prediction provided lter allows interface reduce search area saving computations still keeping good pen tip detection accuracy measurements acquired faster measured trajectory smoothed noise rejection lter kalman filter 1 9 11 recursive estimation scheme suitable problem tested several dierent rst secondorder models movement pen tip image plane model provided best performance easiest tuning simple random walk model acceleration pen tip image plane model given equation 1 1 xk vk ak twodimensional components position velocity acceleration pen tip n additive zeromean gaussian white noise processes output model yk position pen tip corrupted additive noise lter parameters used realtime implementation system listed table 1 24 missing frames algorithm described section 22 detects position pen tip frame sequence unfortunately intermediate frames could missing due problems image acquisition case realtime implementation due synchronization problems host computer frame grabber desirable sample handwritten trajectory constant rate hence need estimating likely position pen tip missing frames kalman smoother 1 9 scheme used system solve estimation problem information see 14 25 ballpoint detection pen tip detector nds likely position centroid pen tip point close center gravity triangular model pen tip see 21 position ballpoint 1 obtained using algorithm similar one used initialization major dierence pen movement need compute one ballpoint position frame using cannys edge detector nd position orientation boundary edges pen tip edge detector applied small windows order save computations speed processing current frame calculate expected position boundaries using orientations boundaries previous frame distance ballpoint nger centroid pen tip well current detected position centroid points boundaries case realtime system use points chosen centers edge detection windows look points window maximum contrast edges found interpolating lines points axis pen tip computed mean line 1 term ballpoint loosely used indicate actual ballpoint pens pencil lead pencils ballpoint finger b ballpoint finger c figure 4 fine localization ballpoint image pen tip displaying elements used detect ballpoint cross center image shows centroid pen tip provided pen tip detector points marked star show places boundaries pen found using edge detection lines sides pen tip boundary edges line middle pen tip axis two crosses show estimated positions ballpoint nger b brightness prole along axis pen tip positions ballpoint nger obtained performing 1d edge detection prole 1d edge detection computed correlating prole derivative gaussian function spatial resolution interface dened accuracy localization ballpoint desired locations extracted subpixel resolution tting parabola correlation peaks c result correlating image prole derivative gaussian function blowup region dotted vertical lines c parabolic peak identies position ballpoint vertex parabola plotted cross x corresponds estimated subpixel position ballpoint dened pen boundary edges image brightness prole axis tip extracted order nd positions ballpoint nger see gure 4 26 pen detection trajectories obtained tracking ballpoint suitable performing handwriting recognition using standard techniques recognition systems date assume input formed pendown strokes ie portions trajectory pen contact paper interface one camera cannot detect 3d position ballpoint therefore contact inferred indirectly stereo system would solve problem cost additional hardware calibration visibility pen tip detection times pen lifted therefore writing accomplished system using additional information provided ink path paper given particular position ballpoint system checks whether c 1 2060100140180211 280 300 320 34095105d figure 5 diculties detecting ink trace plot shows one sequence acquired interface dots indicate ballpoint position time b image displays portion last frame sequence see part pen tip right side image showing corresponding ink trace deposited paper c recovered ballpoint trajectory overlaid image ink trace sample points land ink trace time exception points beginning sequence shown left side image happens might displacement paper generated one strokes probably long horizontal stroke samples 20 40 column picture shows brightness prole image along lines pass sample point perpendicular direction motion brightness measured position ballpoint pixels side ballpoint along mentioned perpendicular note ink trace always found ballpoint position row 6 plot see ink trace pixels ballpoint pixel beginning sequence samples 120 stabilizing ballpoint samples 2035 pen tip appears prole samples later disappearing pen stroke samples 4055 example observe cannot rely ink trace captured last image sequence rather detect presence ink ballpoint trajectory acquired see sections 261264 ink trace paper place image brightness given place varies illumination writers hand position camera gain moreover image contrast could change frame frame due light ickering shadows hence detection ink trace paper using image brightness quite dicult illustrated example gure 5 get several observations simple example gure 5 ink trace narrow 12 pixels even small error locating ballpoint could lead mismatch ballpoint ink trace handwritten strokes quite distorted due confidence measure u hidden markov model state pen u pen estimates likelihood ink absence segmentation classification trajectory trajectory image state sequence likely detection figure pen updown classication block diagram penupdown classication subsystem detect pen using bottomup approach brightness point trajectory compared brightness surrounding pixels comparison provides measure condence ink absence hidden markov model used model transition condence measure states pen pen using local condence measure estimated hmm state sequence system classies point trajectory pen pen measure ink absence dicult obtain prone errors better divide trajectory ballpoint strokes aggregate pointwise classication strokewise classication pixelization image eg diagonal straight strokes present staircase pattern value brightness corresponding ink trace varies within image even across images need detect ink trace local robust way local ink measurement performed soon possible since paper might move course session working way would good sample points top ink trace system would provide penupdown information writing produced online fashion however measurement done pen tip moves away otherwise pen tip obstruct paper ink trace figure 6 shows block diagram penupdown detection subsystem following sections describe detail blocks presented gure x brightness samples ink absence confidence value0075 figure 7 local ink absence detection typical pendown sample point center cross corresponds estimated position ballpoint pen detection ink performed locally comparing brightness ballpoint brightness pixels located circle centered ballpoint position brightness point obtained interpolation 13 b histogram brightness values measured circle corresponding gaussian pdf estimated values vertical line shows value brightness corresponding ballpoints position ink absence condence measure corresponds area gaussian pdf 1 ballpoints brightness condence measure equal 0075 example indicating ink likely present 261 local ink detection detection ink trace performed locally point trajectory comparing brightness ballpoint brightness surrounding pixels see gure 7 condence measure ink absence obtained probabilistic setting brightness inkless pixels assumed gaussiandistributed random variable parameters corresponding gaussian pdf estimated locally using brightness points located circle centered ballpoint assume points correspond inkless pixels ink absence condence measure computed probability brightness ballpoint pixel given pixel inkless ink present ballpoint pixel measure low close zero otherwise measure high close one selection particular condence measure convenient since provides automatic scaling zero one measurements brightness cannot obtained pen tip left measurement area otherwise ink trace covered pen tip hand user system assumes simple coneshaped model area image covered pen hand user ballpoint located vertex cone axis pen tip denes axis cone position nger inside cone aperture cone chosen 90 degrees simple model allows system determine user left handed right handed whether particular ballpoint position within cone system waits cone suciently far away area interest brightness measurements lefthanded users challenging since usually cover hands recently written pen strokes hence system wait much longer righthanded users order perform ink detection acquired data lefthanded users experiment section 33 havent compared accuracy penupdown detection left righthanded users 262 local penupdown modeling ink absence condence measure described previous section could used decide whether particular sample point corresponds pen pen however making hard decisions based single measurement likely fail due noise errors brightness measurements softdecision approach estimates probability individual point pen pen robust improvement provided modeling probability transition two states pen pen given current measurement previous state hidden markov model hmm two states one corresponding pen corresponding pen suitable scheme estimate probabilities hmm learns probabilities moving one state probabilities rendering particular value condence measure set examples unsupervised fashion hmm used system topology presented gure 8 use forwardbackward algorithm 23 train confidence measure probability confidence measure ink absence confidence measure figure 8 local model pen updown hidden markov model models transitions penup pendown states observation model ink absence condence measure intrinsically continuous variable dened section 261 hmm output set discrete symbols need quantize value condence measure order dene output symbols condence measure probability scaled zero one interval 0 1 divided sixteen equal intervals quantize condence measure value translate observation symbols resulting hmm training shown gure bar plots displays output probability distributions state learned purely examples hmm using training set handwritten sequences collected system training set consists examples cursive handwriting block letters numbers drawings signatures mathematical formulas order sample variability pen updown transition dierent types writing likely state system point handwritten trajectory estimated using viterbis algorithm 7 23 263 trajectory segmentation previous two sections describe local measures used classify sample handwritten trajectory either pen pen measurement ink absence subject errors performance may improved dividing handwritten trajectory dierent strokes aggregating samplewise classication strokewise classi cation handwritten trajectory segmented strokes using two features curvilinear velocity pen tip curvature trajectory selection two features figure 9 trajectory segmentation several examples trajectories acquired interface corresponding strokes obtained segmentation successive strokes indicated alternately solid dashed lines threshold curvilinear velocity chosen points remain within pixel two consecutive frames discarded see table 1 inspired work viviani 27 28 plamondon 20 21 also intuitive idea limit points two dierent handwriting strokes velocity pen small curvature trajectory high set segmentation points result applying threshold mentioned features thresholds obtained experimentally values presented table 1 figure 9 shows several examples trajectories corresponding segmented strokes 264 stroke classication divided trajectory strokes proceed classify strokes either penup pendown experimented two approaches one based ink absence condence measure using state sequence provided hmm rst approach mean ink absence condence measures points stroke used stroke condence measure second approach voting scheme used assess likelihood particular stroke penup pendown likelihood provided stroke condence measure needed hard classication stroke pen pen obtained applying threshold stroke condence results hard classication well likelihood pen updown stroke descriptors interface provides handwriting recognition system 27 stopping acquisition mentioned system automatically stops value maximum correlation low since would imply pen tip moved outside search window change illumination pen tip longer matches template user exploit behavior stop acquisition taking pen tip away search window another stopping possibility oered user system checks whether pen tip moved consecutive frames counts number consecutive frames movement number reaches predened threshold system stops acquisition thus user wants nish acquisition end desired piece handwriting hold pen tip still system stop acquisition 28 realtime implementation interface implemented using video camera frame grabber pentium ii 230mhz pc camera commercial flexcam id manufactured videolabs equipped manual gain control resolution 480x640 pixels per interlaced image 30hz frame grabber pxc200 manufactured imagination figure 10 shows graphical user interface gui windowsbased application runs system figure 10 realtime application image shows gui graphical user interface windowsbased application implements system biggest window dialog box allows user input parameters run commands topleft window displays image captured camera order provide visual feedback user bottomleft window shows acquired trajectory done pointwise pen updown classication hard threshold 3 experimental results 31 system specications temporal spatial acquisition resolutions key parameters dene performance interface maximum working frequency provided camera temporal resolution system 1667ms system able work maximum frame rate since total processing time per frame 14ms however frames missed due lack synchronization cpu frame grabber component system see 24 estimates likely state system case missing frames scheme useful number missing frames small otherwise system would drift according dynamics model equation 1 used system acquiring hundreds handwritten sequences real time experiencing missing frame rate 1 every 200 frames shown references 14 16 17 performance signature verication system signatures captured realtime interface signatures written higher speeds normal handwriting therefore bigger image neighborhood searched order nd pen tip acquired signature sequences enlarging search area turning penup detection block system experiments experienced missing frame rate 1 every 400 frames observe system occasionally loses track pen tip subject produces extremely fast stroke problem losing track pen tip could solved future using powerful cpu dedicated hardware able process larger search area nevertheless trials user learns utilize system without exceeding limits spatial resolution system estimated static dynamic conditions acquired sequences pen tip held xed location dierences acquired points due noise image acquisition errors pen tip localization repeated experiment 10 times placing pen dierent positions using dierent illumination static resolution system estimated computing average standard deviation points acquired sequences also acquired 10 sequences subject drawing lines dierent orientations help ruler lines carefully drawn straight dierences straight line would due noise image acquisition errors ballpoint localization line acquired points computed distance points tting line dynamic resolution system estimated computing average standard deviation mentioned distance sequences figure 11 shows two sequences used compute spatial resolution summarizes resolution system note vertical resolution almost two experiments horizontal resolution varies factor two one experiment dierence possibly due subject holding pen mostly vertical writing position static resolution experiment case observe system quite sequence used static resolution computation 100 150 200 2504080120sequence used dynamic resolution computation horiz resolution pixels vert resolution pixels static dynamic figure 11 spatial resolution interface rst gure corresponds points acquired pen tip kept still xed position sequence used estimate static resolution system second gure shows straight line drawn ruler used estimate dynamic resolution system standard deviations error ideal position given table estimated static dynamic resolution system one could take two standard deviations roughly 01 pixel obtain conservative value spatial resolution good resolution less one tenth pixel table 1 summarizes parameters used implementation realtime system figure 12 shows several examples complete handwritten sequences acquired real time system portions one sequences blownup order depict level acquisition noise 32 pen detection experiments pen tracking local ink detection components system implemented realtime application order evaluate performance complete penup detection subsystem collected 20 sequences comprising various types handwriting cursive block letters printed letters numbers drawings signatures mathematical formulas used half sequences training hmm half test ing obtained ground truth classifying hand points test sequences pen pen also classied hand strokes test parameter value pen tip template size 25x25 pixels initial dead time given user move paper 2 sec 120 frames nd clean area write image dierence threshold 15 3 bits noise number pixels required detect movement 20 pixels number pixels required detect lack movement time pen tip movement waited acquiring 200 ms pen tip template time used acquire information pen tip 1 sec 60 frames edge detector scale 3 pixels contrast threshold used cannys edge detector 07 distance parabolic cylinder axis center pixel 05 pixels threshold used cannys edge detector correlation window size 15x15 pixels kf output noise covariance matrix r diag10 kf state noise covariance matrix q diag000010 4 kf initial estimation error covariance matrix p 0 maximum normalized correlation value considered match 075 maximum velocity denoting pen moving 05 pixels per frame time waited stopping 05 sec 30 frames minimum number points sequence 150 samples minimum velocity threshold used trajectory segmentation 075 pixels per frame maximum curvature threshold used trajectory segmentation 005 pixels per frame 2 table 1 system parameters system parameters used realtime implementation sequences divided segmentation algorithm two types error measurements used evaluate performance pen detection false acceptance rate measured percentage penup points segments classied pen system false rejection rate frr provided percentage pendown points segments classied pen system examples gures 1 9 12 used training hmm 321 pointwise classication results points test sequences hard classied either pen pen experiment two dierent approaches compared rst one used value ink absence condence measure classication parameter second approach used hmm classify point hard classication provided likely hmm figure 12 example sequences rst row shows examples sequences captured realtime system collected examples cursive writing block letters printed letters drawings mathematical symbols second row displays enlargements portions sequence maria elena dots represent actual samples acquired interface sequences present low acquisition noise state sequence obtained viterbis algorithm table 2 shows resulting error rates figure 13 presents results two approaches three test sequences 322 stroke classication results test sequences segmented strokes stroke classied either pen pen experiment two classication approaches compared rst one based ink absence condence measure second one based local measurements hmm modeling far 246 286 frr 1005 533 table 2 pointwise classication results comparison error rates pointwise ink detection obtained using ink absence condence measure hmm model classication threshold used ink absence condence measure 04 observe none approaches clearly better hmm one lower frr local measurements one lower far pointed wait pen tip sight order measure brightness many penup points correspond stroke passes top segment ink trace misclassied pendown points main reason apparently large value far figure 13 pointwise classication results rst row shows three test sequences gures second row display segment sequences thickness proportional average condence endpoints thicker segments corresponds portions trajectory classied pen third row shows points trajectories classied pen using ink absence condence measure fourth row presents points classied pen hmm see several segments appear areas ink trace paper misclassication due bad measurement condence ink absence plots third fourth row seems hmm approach lower frr cost higher far local measurements hmm modeling far 927 1122 frr 2455 818 table 3 stroke classication results comparison error rates stroke classication obtained using ink absence condence measure hmm model rst case average ink absence condence measure used classication parameter classication threshold set 02 strokes stroke condence lower threshold classied pen second case percentage points stroke classied pen hmm used classication parameter classication threshold also set 02 case observe hmm much better frr local measurements expense slightly worse far note cases strokeup classication fails ected far due incorrect segmentation like c sequence pedro munich crossing stroke x mathematical formula gure 14 incorrectly segmented strokes always classied pen ground truth leaving segments computation performance obtained reduction far methods approximately 1 absolute error frr unchanged hmm rst approach stroke condence measure computed average ink absence condence measure points stroke case hmm stroke condence measure calculated using voting scheme ratio number points classied pen hmm number points stroke provided stroke condence measure table 3 shows resulting error rates figure 14 presents results stroke classication three test sequences 33 signature verication mentioned realtime interface used frontend signature verication system 14 16 17 acquired 2530 true signatures 10 forgeries 105 subjects adding approximate total 4000 signature samples collected data course months subjects would provide signatures dierent times day interface placed next window natural sunlight used capturing signatures day time electric lighting used acquiring signatures night subjects asked provide data three dierent sessions order sample signature variability given number subjects involved experiment figure 14 stroke classication results corresponding strokes sequences gure 13 shown rst row successive strokes plotted alternatively solid dashed lines gures second third rows correspond classication using ink absence condence measure gures fourth fth rows correspond classication using hmm gures second fourth row displays stroke thickness proportional stroke condence measure plots third fth rows shows strokes classied pen case classication based hmm seems provide better results one based ink condence measure signature s019010 90 100 110 120 130 140 1502060signature s025005 signature s041010 100 120 140 16010305070signature s001010 signature s026005 551525forgery s019001 forgery s025000 100 120 140 1601030forgery s041006 100 120 140 160 1801030forgery s026000 figure 15 signature verication rst row gure shows examples true signatures acquired interface second row presents examples corresponding skilled forgeries also captured system position orientation camera dierent session session subject subject figure 15 shows examples acquired signatures achieved verication error rate less 15 skilled forgeries verication error rate less 025 random forgeries rates correspond condition equal false acceptance rate false rejection rate results techniques used verication reported forthcoming paper 34 discussion examples presented section 3 show interface quite convenient accurate acquiring short handwritten trajectories system tested acquiring long sentences even full pages text main diculty case would perspective radial distortion problem applications eg signature verication algorithm encodes handwriting aneinvariant parameterization perspective distortion image could corrected easily paper predened pattern symbols eg set crosses located known distance used however would make interface less convenient general besides signature verication informal tests human observers found output interface well within resolution limits easy reading interpretation however interface tested handwriting recognition results pendown detection experiments encouraging stroke condence measure provides soft classication pendown penup strokes could used handwriting recognizer usability interface tested hundred dierent subjects signature verication experiment acquisition signatures took place various lighting conditions camera position showing robustness interface respect variability users setup handwriting captured dierent scales interface changes scale introduced user adjusted position orientation camera write comfortably scale changes small enough handled xed set system parameters larger scale changes would require adaptation system parameters acquisition setup appropriate procedure may designed user help system task 4 conclusion work design implementation novel humancomputer interface handwriting presented camera focused user writing piece paper normal pen shown handwriting trajectory successfully recovered spatiotemporal representation given sequence images trajectory composed handwritten strokes pen movements two strokes temporal resolution sucient spatial resolution approximately tenth pixel allows capturing handwriting sucient spatial resolution within area corresponding half sheet letter paper using cheap 480x640 pixels camera spatial resolution approximately corresponds 20 samples per millimeter writing resolution times lower commercial tablets 100 lines per millimeter obtained much smaller cheaper interface classication penup pendown portions trajectory pen obtained using local measurements brightness image location writing end pen detected several modules interface susceptible improvement used one pen tip template whole sequence acquisition template could automatically updated peak value correlation fell certain threshold since information boundaries axis pen tip well position ballpoint nger computed frame ballpoint detection module automatic extraction new pen tip template involves extra computational cost region interest used detect location pen tip constant size current implementation system size region could driven uncertainty predicted position pen tip ie size could depend covariance predicted location pen tip smaller regions would required cases low uncertainty reducing way computational cost performing correlation region interest pen tip template ballpoint detection current frame sequence based orientation axis boundaries pen tip previous frame could improve robustness ballpoint detection modeling change axis boundaries orientations frame frame recursive estimation scheme could used predict desired orientations allowing one reduce size windows used perform edge detection decrease number computations used gaussian model brightness inkless pixels estimation model parameters performed using brightness points lying circle centered ballpoint position assuming circle points inkless points clearly model strictly adequate random variable takes values interval 0 255 assumption completely valid since circle points could correspond ink trace model could improved using probability density function suitable representing random variable takes values nite interval however rst order approximation shown model provides good results penupdown classication classication strokes penup strokes pendown strokes based local measurements brightness local measurements local orientation ink position ballpoint correlation orientation local direction trajectory pen tip etc could used order improve classi cation rates local measurements direction would decrease far since sample would classied pen ink trace corresponding direction found location sample additional local measures could naturally included system increasing dimensionality observation hmm set examples used estimate hmm parameters evaluate penup classication performance included examples dierent types writing provided one subject example sequences provided dierent subjects acquired order estimate performance writerindependent setting also bigger set examples used obtain accurate hmm pen detection acknowledgements gratefully acknowledge support nsf engineering research center neuromorphic systems engineering caltech national science foundation nsf cooperative agreement eec9402726 r optimal filtering line handwriting data acquisition using video camera computational approach edge detection vision manmachine interaction finger tracking input device augmented reality liveboard large interactive display supporting group meetings viterbi algorithm statistical pattern recognition applied optimal estimation optical character recognition new approach linear dynamic approaches handwritten signature veri iterative image registration technique application stereo vision visual input penbased computers visual input penbased computers visual signature veri new input device interactive dynamic whiteboard educational applications evaluation motor models handwriting fundamentals speech recognition state art online handwriting recognition relation linear extent velocity drawings movements trajectory determines movement dynamics analysis synthesis handwriting adaptative thresholding digitaldesk calibration digitaldesk new data tablet system handwriting characters drawing based image processing tr computational approach edge detection state art online handwriting recognition introduction statistical pattern recognition 2nd ed liveboard fundamentals speech recognition online offline handwriting recognition camerabased id verification signature tracking online handwriting data acquisition using video camera visual input penbased computers visual input penbased computers ctr mario e munich pietro perona visual identification signature tracking ieee transactions pattern analysis machine intelligence v25 n2 p200217 february