probabilistic game semantics category honstyle games probabilistic strategies developed possible choices strategy quantified give measure likelihood seeing given play twosided die shown universal category sense strategy breaks composition deterministic strategy die interpretative power category demonstrated delineating cartesian closed subcategory provides fully abstract model probabilistic extension idealized algol b introduction consider fixpoint expression yx1 x two different meanings attached meant sides happen say equal chances almost surely well get result 1 hand meant either happenbut dont know whichthen consistent answer say may get 1 also may diverge latter meaning investigated recent games model nondeterminism harmer mccusker 12 paper construct games model former developing suitable notion probabilistic strategy one motivation give means understanding quantitative aspects uncertainty might arise description process dually inherently probabilistic processessuch randomized optimization procedures optimal strategies classical game theory general adaptive behaviorcan accounted framework another motivation purely mathematical extending games semantics probabilistic case natural step take probabilistic strategies extremely natural vonneumann matrix games indeed category smoothly extends deterministic games world charted hyland ong 13 nickau 20 developed mccusker 2 laird 15 category also fits nicely basic concepts probability theory interaction strategy counterstrategy game gives rise borelian sub probability infinite plays category tensor product corresponds classical product measure construction composition strategies defined using image measure composition function case always measurable factorization result shown saying probabilistic strategy broken composition deterministic one 2 sided die sense 2sided die shown uni versal discrete version basic fact probability 0 1 reconstructed law random variable defined lebesgue probability triple short give seems fundamentals higherorder probability theory interactive form case study eventually zero cartesian closed subcategory show provides fully abstract model probabilistic extension idealized algol exact choice probabilistic primitive used extend algol overly important since factorization result probabilistic process programmed using fair coin recent shifting conditions plays strategies advances field allow point use pretty standard machinery restrict singlethreaded strategiesthose copyable discardable respect tensor productand show homsets admit continuous cpo structure basis easily seen algoldefinable thanks factorization theorem previous theorem abramsky mccusker 3 general reasons suffices show full abstraction generality construction way depends particular games model give sufficient generality adapted whatever particular language already know deterministic games model already quite lot since apart purely functional pcf models control ground general ref erences games semantics concepts adapt way gives sense homogeneity semantic universe due contrast traditional denotational semantics related work obvious precursor work study probabilistic powerdomains application denotational semantics early work saheb djahromi 22 23 jones plotkin 14 amongst oth ers recent work 7 8 investigated bisimulation probabilistic context would interesting consider closely connection work remains rather unclear another possible connection exact real arithmetic 9 intriguingly several issues raised work particularly surrounding factorization result similar flavour raised real arithmetic 21 would interesting pursue line investigation indeed consider using game semantics model language real pcf 10 future work one challenging application could probabilistic program analysis hankin malacarias static analysis techniques derived games semantics 16 17 18 could get well probabilities give tools code optimization instance less application maybe still sort practical tempting question whether probabilistic observational equivalence shown decidable extension idealized algol since particular case socalled intrinsic equivalence intensional model simple concrete charac terization solved positive could relate formal methods programming theoretical question relating model harmer mccuskers model 12 obvious embedding based equal chances interpretation nondeterminism isnt fully abstract opening example clearly shows another possibility investigation timeless version model spirit baillot danos ehrhard regnier 6 construction starting symmetrized games model linear logic ending polarized variant relational semantics concurrent games abramsky mel lies 1 polarized version mellies could prove useful since intermediate step games hypercoherences current investigation ehrhard shows probabilistic coherence spaces could bridge gap least intuitionistic case game semantics represents computation execution traces describe interaction system environment system environment modelled protagonists respectively player opponent game execution trace sequence moves played two protagonists make ideas precise need bits nota tion set strings alphabet sigma written sigma 2 sigma write v prefix denote length jsj 1 jsj denote ith symbol unique string length 0 written restriction sigma 0 ie subsequence obtained erasing symbols sigma 0 21 arenas legal plays basic ground rules game determined arena played formally define arena triple hma ffl countable set moves ag theta fi ng labelling function designating move opponent player move question answer initial noninitial move define op qa first second third projections respectively ffl binary relation known enabling 6 op n n 6 conditions say protagonists enable others moves initial moves cant en abled opponent initial moves must questions answers must enabled questions flat arenas x countable set define flat arena x setting mx x making q x x every x 2 x denote c b n respectively flat arenas onepoint set fag twopoint set ftt ffg countably infinite set f0 legal plays string endowed jus tification structure equipping noninitial move pointer pointing back earlier enabling move formalized function f say call initial occurrence f say hereditarily justified jn string equipped f called justified string legal play justified string strictly alternates opponent player 6 op b write la set legal plays arena even l odd denote obvious subsets player made last move 2 l even etc 2 la write ies set immediate extensions ie legal plays v 1 current thread sa 2 l odd written dsae defined subsequence sa consisting moves hereditarily justified hereditary justifier product arrow b arenas define product theta b disjoint union copairing places b side side chance interaction empty arena sole legal play unit constructor constructor arrow defined op n words initial moves b initial moves b roles opponent player reversed formerly initial moves enabled still initial moves b 22 strategies strategy kind rule book saying moves may made player probability first prestrategy oe arena function oe l even traces oe denote oe evenlength legal plays assigned nonzero weight oe ie domain oe written domoe oddlength plays reachable oe ie fsa 2 l odd g finally given 2 domoe define range oe written rng oe immediate extensions oe ie empty prestrategy oe strategy iff oes t2iesa oet note p2 implies oe order reversing respect prefix ordering oe usual ordering 0 1 means oe evenlength prefixclosed p1 get oes 1 2 la basic constraints strategy oe deterministic iff equivalently oe takes values f0 1g note p2 asserts inequality oe strategy always fact equality say total strategy point discussed local probabilities given sa 2 domoe define conditional probability sab given sa welldefined p2 gives subprobability rng oe sa sa 2 domoe intuitively speaking oesabsa die oe rolls sa 2 domoe 23 examples strategies fair coin simplest example probabilistic strategy probably fair coin coin boolean arena b trace set set evenlength sequences form qb 1 delta delta delta qb n b ftt ff g justified immediately preceding move assign probability 2 coin eg etc local probabilities oeqffqttqffq 12 polydie another useful probabilistic strategy polydie n n typical play polydie probability assigned play 1n words polydie asks number n rolls nsided die returning something 0 1 uniform probability strategies flat arenas probability measures plays b form 11 correspon dence denoted bdelta finite binary strings 1g given binary string w set xg vw basic open sets cantor topology infinite binary strings given total strategy oe b define p oe v oes standardly extends unique probability measure borelian oealgebra b generated vw see p1 says measure whole space 1 p2 says p countably additive subadditive oe isnt assumed total conversely probability measure b defines total stategy b probability measure could discretetime stochastic process values f0 1g particular neednt markov process example damped deviation die denoted 3d strategy larger deviation trues falses far likelier return value diminishes deviation play difference number trues falses suppose ds2 hence 3d must able look arbitrarily far back time 24 composing strategies let u finite string moves arenas b c equipped candidate justification pointers ie strictly decreasing function f 1g define ubc subsequence u delete moves suitably renor f u preserve pointers define u similarly define u c removing moves pointers b except case 2 points b 2 mb turn points c 2 mc whence make point directly c ua c legal interaction arenas b c u satisfying write inta b c set legal interactions b c 2 l even ac define set witnesses ie legal interactions playing outside given strategies oe b b c respectively define oe c assigning probability following composition formula sometimes write oe k u oeu b delta ub c note oe rolling independent dice sum always countable inta b c welldefined composition clear composite two prestrategies prestrategy convention also easy see p1 preserved lemma rest work lemma 21 probabilistic flow sa 2 l odd ac ua 2 c u 2 wits let w ua set iesa ie legal interactions starting like ua witnessing immediate extension sa oe b proof prove induction interactions obtained truncating w ua depth ie w ua dg satisfy inequality applying p2 component gives base case wise inductive hypothesis oe k u u 0 2 w ua hasnt yet reached outside many extensions w ua p2 sum cannot exceed probability u 0 hence proposition 22 oe strategies b respectively oe strategy c proof check p2 sa 2 l odd t2iesa witt u 2 wits w ua defined lemma 21 clearly w ua w sa moreover w sa apply lemma 21 witness u associated w ua since desired result follows xi remark strategies deterministic ie values f0 1g oe integer p1 p2 0 1 one witness general play infinitely many witnesses category arenas strategies result tells us good notion composition routine verify associative usual copycat strategies identities even sa id summary category objects arenas arrow b strategy b also subcategory deterministic strategies since class strategies closed composition 25 examples composing strategies consider composing coin wait true strategy defined semantics yf x x skip else fx typical interactions ff ff ff first witness qa probability 12 second probability 14 etc overall probability qa 12 use biased coin insteadwhere time thats passed less likely return truethe probability becoming trapped loop nonzero instance set coin 1jsj2 1 overall probability qa anything 0 1 course coin 0 satisfy p2 must case since assumption easily make coin 0 total strategy class total strategies cant closed composition pieces chance get lost infinite chatters reason p2 inequality another variation example uses count true strategy b n defined semantics yf x x 0 else 1fx composite usual coin get q0 probability 12 q1 probability 14 q2 probability 18 words result geometric distribution natural numbers output n probability variations scheme consider strategy mu 2 defined semantics type nat com term takes input f feeds successive arguments beginning 2 gives output 0 point terminates compose polydie mu 2 behaviour fol lows initially 2sided die rolled turns 0 done otherwise 3sided die rolled 0 turns time done otherwise 4sided die rolled etc trace qa appears composite strategy probability interesting variation stop 0 rolled continue larger die 1 rolled otherwise give done replacing if0 subterm case fx 0 7 skip compose polydie strategy rr associated modified scheme term probability qa composite 12 0718 shows class strategies probabilities rational isnt closed composition 26 smcc structure oe strategies c b respectively define oe theta athetab c thetad following manner given 2 oetheta define probability simply product probabilities two components oe theta note interaction oe die makes theta bifunctor cat egory fact evident copycat strategies provide us symmetric monoidal structure usual way simple relabelling moves gives rise natural isomorphism oe symmetric monoidal closed category tensor terminal object finally arena unique strategy 1 diagonal strategy delta cocommutative comonoid structure 2 even probability 1 iff means subsequence 0 consisting moves hereditarily justified initial occurrence 0 r defined similarly 27 ordering strategies given strategies oe arena set oe 6 iff 2 la oes clearly partial order straightforward show composition monotone respect cpoenrichment fact show homset category cpo composition continuous ie category cpoenriched proposition 23 given 6directed set strategies delta define f delta g deltag least upper bound lub delta proof show f delta welldefined strategy lub follows easily clear f delta pre strategy satisfying p1 p2 suffices consider f delta rng f delta n 2 n ffl 0 find strategies sab upper bound delta g g g result follows xi argument similar flavour establishes composition respects lubs directed sets ie oe b delta directed set strategies oe countable basis arena collection strategies finite trace set probabilities rational forms basis cpo strategies ie oe set delta oe strategies approximating oe directed oe least upper bound tricky point check delta oe indeed di rected given oe trace set union oe 1 oe 2 assigning probabilities follows maximal trace set oe 3 sg otherwise set oe 3 maximum oe 1 oe 2 f g con struction oe 3 valid strategy upper bound oe 1 oe 2 delta oe basis always countable set strategies continuous cpo contrasts previous hogames models including 12 strategies form algebraic cpos compact strategies finite number traces 28 deterministic factorization technique factorization become standard game semantics underlying idea similar 12 nondeterministic strategy reduced deterministic strategy access nondeterministic oracle case oracle strategy die suffices use 2sided die convenience use polydie defined first present simplified factorization works basis strategies afterwards sketch general factorization allows us simulate probabilistic strategy deterministic strategy polydie basis factorization let oe basis strategy arena consider sa 2 domoe since oe finite know rng oe sa must finite well write rng oe g since probabilities oe rational local probability oesab sa sab 2 rng oe sa theorem 24 deterministic factorization oe basis strategy arena exists deterministic strategy detoe n n polydie detoe compact proof remarks imply find common denominator local probabilities oesab sa numerators p sa strategy detoe proceeds following fashion words slice interval 0 gamma 1 according numerators clearly defines deterministic strategy easy check supplying polydie input achieves correct simulation original strategy polydie obvious since oe finite trace set detoe must xi conversely small calculation composition formula shows strategy factorized polydie oe oe deterministic compact must belong basis general factorization extend idea general case consider first strategy oe whose probabilities rational necessarily finite trace set local probabilities oesab 1 roll die result less n 1 play b 1 wise renormalize remaining probabilities dividing repeat process example local probabilities b 1 b 2 23 16 respectively following play produces b 2 roll 2sided die second time since renormalized probability b 2 finally play oe irrational probability p always find sequence rationals whose series partial sums converges p point sab range either single rational sequence rationals using standard trick one used enumerate n theta n reduce previous case essential point play irrational probability factorized one go fact infinite number witnesses desired probability gradually builds progress sequence rationals 3 fully abstract model pa 31 probabilistic algol starting point language ia defined 3 need add probabilistic primitive add coin rather choose polydie well polydie might handy program withindeed programminglanguagecaml probabilistic func tion randomint exactly implements polydie contextual equivalence makes difference whatsoever fact polydie even programmed inside algol using coin informally goes way given n choose k 2 k n roll first round 2sided die k times answer binary string length k codes integer go another round succeed idea programmed purely functional style give example using caml let rec roll k0 0 else coin 2 roll k11 else 2 roll k1 let rec polydie resn res else polydie n assume findk n returns dlog 2 ne coin returns true false 5050 odds coin fact also written caml using randomint primitive mentioned thunking caml callbyvalue let coin randomint true else false sake simplicity add single term coin type bool call extended language pa probabilistic algol complete definition language need give operational interpretation usual big step style except derivations must decorated probabilities obvious rules coin rules follow naturally give exam ples sake readability eliding use stores adding poses problem n l coin might countably many evaluations sequence respective probabilities easy see finally let n closed terms type contextually equivalent iff contexts cgamma ground type cm denote n example let mn nth church numeral hh n tt n x coin ff x types bool observe gamman tt context gamman allows us distinguish mn demonstrates discriminating power even purely functional world probabilistic contexts easily seen mn mn2 contextually equivalent n 2 pcf 32 model begin process building model pa introducing class singlethreaded strategies recall current thread sa 2 l odd written dsae tab 2 l even dtae justifier b occurs dtae denote matchtab sa play sab b justified way tab say strategy oe singlethreaded iff ffl sab 2 oe justifier b occurs dsae note condition expressed terms local probabilities oe lengthy routine matter verify following result proposition 31 strategy oe b singlethreaded comonoid homomorphism ie general reasons 11 shows singlethreaded strategies form cartesian closed category c fur thermore cpoenriched structure restricts c ie cpoenriched ccc visibility bracketing remaining constraints required cut model match well algol rely following definition view written psq nonempty legal play omove justifies pmove strategy oe satisfies visibility condition iff sab 2 oe justifier b occurs psaq oe satisfies bracketing condition iff sab 2 oe b answer b justified pending question psaq ie recently asked yet unanswered question psaq constraints preserved composition interpretation pa subccc c denoted c vb singlethreaded strategies subject constraints interpretation ia ie deterministic fragment language follows abramsky mccusker 3 probabilistic primitive coin interpreted strategy coin following soundness result model pa c vb corollary usual consistency adequacy results theorem 32 n closed terms pa type 33 full abstraction soundness result place path full abstraction relatively standard first prove definabil ity result basis strategies model theorem 33 type pa oe basis strategy pa proof factorization theorem detoe compact deterministic strategy definability theorem abramsky mccusker 3 strategy definable ia since polydie definable pa done xi define equivalence relation homset c vb follows given f iff test name f defined currying socalled intrinsic quotient category e vb obtained quotienting c vb relation also ccc soundness result survives quotient converse soundness also holds theorem 34 full abstraction n closed terms type e proof need prove righttoleft direction suppose e test ff homsets c vb continuous cpos wlog assume ff basis element hence definability follows context distinguishes n xi r concurrent games full completeness fully abstract game semantics general references linearity sharing state fully abstract game semantics idealized algol active expressions full abstraction idealized algol passive expressions games bisimulation labeled markov processes logical characterization bisimulation labeled markov processes domains computation mathematics pcf extended real numbers fully abstract game semantics finite nondeterminism full abstraction pcf probabilistic power domain evaluations full abstraction functional languages control generalised flowcharts games new approach control flow analysis games full abstraction fpc hereditarily sequential functionals probabilistic lcf cpos measures nondeter minism tr rational probability measures probabilistic powerdomain evaluations pcf extended real numbers full abstraction idealized algol passive expressions full abstraction pcf hereditarily sequential functionals generalised flowcharts games new approach control flow analysis callbyvalue games reasoning idealized algol using regular languages games full abstraction fpc bisimulation labelled markov processes full abstraction functional languages control semantics exact real arithmetic logical characterization bisimulation labeled markov processes fully abstract game semantics general references fully abstract game semantics finite nondeterminism nondeterministic games program analysis ctr pierrelouis curien definability full abstraction electronic notes theoretical computer science entcs 172 p301310 april 2007