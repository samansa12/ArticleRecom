conceptual model rulebased query language html documents available web conform html specification documents hierarchically structured nature existing data models web either fail capture hierarchical structure within documents provide low level representation hierarchical structure represent query html documents higher level important issue paper first propose novel conceptual model html conceptual model simple constructs able represent complex hierarchical structure within html documents level close human conceptualizationvisualization documents also describe convert html documents based conceptual model using conceptual model conversion method one capture essence ie semistructure html documents natural simple way based conceptual model present rulebased language query html documents internet language provides simple powerful way query intradocument structures interdocument structures allows query results restructured rulebased naturally supports negation recursion therefore expressive sqlbased languages logical semantics also provided b introduction documents available web conform html specication intended human readable browser thus constructed following common conventions often exhibit hierarchical structure represent documents conceptual level important issue past several years number data models developed database community order retrieve data web unql 6 oem 27 strudel 9 etc survey see 12 proposals mainly use rela tional graphbased treebased data models represent web data focus interdocument structures little attention intradocument structures thus fail capture hierarchically structure within html documents example none existing data models represent michael leys dblp bibliography html document httpwwwinformatikunitrierdeleydb shown figure 1 natural simple way 50 mengchi liu tok wang ling diculties html xml 5 fast emerging dominant standard data representation exchange web provides natural support describing hierarchical structure web documents allows specic markup created specic data world wide web consortium w3c recently recommended document object model dom application programming interface html xml documents 30 dom denes logical structure documents way document accessed manipulated represents documents hierarchy various node objects dom programmers access change delete add build html xml documents navigate structure nev ertheless dom low level data model htmlxml documents intended programmers write programs access manipulate html xml documents rather user nd information within documents w3c also recommended xpath 7 language operating abstract logical structure xml document rather surface syntax models xml document tree various nodes level higher dom element nodes attribute nodes text nodes etc however describe abstract logical structure html document still remains open problem another important issue query large html documents perform inference based interdocument structures also intradocument structures obtain useful information past years number query languages systems developed database community retrieve data web w3qs 8 websql 23 weblog 16 unql 6 lorel 2 webqol 3 strudel 9 florid 14 surveys see 1 11 24 based data models limited mentioned fail support queries intradocument structures example cia world factbook web site httpwwwodcigovciapublicationsfactbook contains abundant detailed information country region world html document location geographic coordinates area land boundaries coastline popula tion age structure birth rate gdp budget etc simple way query information let alone infer useful information purpose paper twofold rst propose novel conceptual model html called htmlcm stands html conceptual model conceptual model simple constructs able represent complex hierarchical structure within html documents level close human conceptualizationvisualization documents based conceptual model present rulebased language query html documents internet called htmlql stands html query language language provides simple powerful way query intradocument structures interdocument structures allows query results restruc tured rulebased naturally supports negation recursion therefore expressive sqlbased languages logical semantics htmlql also provided conceptual model rulebased query language html 51 rest paper organized follows section 2 proposes conceptual model htmlcm shows automatically convert html documents htmlcm section 3 presents rulebased query language htmlql including syntax query examples logical semantics section 4 brie describes implementation web search inference system supports htmlcm htmlql section 5 summarizes points research issues paper major revision two conference papers 19 21 2 htmlcm conceptual model html section rst introduce htmlcm conceptual model html discuss convert html documents htmlcm assume existence two kinds symbols set u urls set c constants note u subset c 21 conceptual model web document html considered structured htmlcm title body purpose extract conceptual structures within html documents end ignore features used enhance visual aspects html documents fonts colors style etc denition 1 notion objects dened recursively follows 1 constant c 2 c lexical object object u 2 u ohui linking object called label u called anchor linking object 3 let objects attributed object called attribute called value attributed object objects n 1 list object objectrelational database homogeneous tuples sets tuple elements accessed using attribute names set elements directly accessed html document may attributed objects together objects thus sometimes impossible distinguish tuples sets addition html documents conceptually supports lists instead sets duplication allowed order elements exists thus use list objects tuples sets lists htmlcm attribute names used access components list objects matches 52 mengchi liu tok wang ling example 1 following examples objects lexical objects computer science database systems linking objects f acultyhfacultyhtmli jim carterhfacultycarteri attributed objects title cs department location europe list object ftitle cs dept researchhresearchhtmlig web document available internet associated url used access web document denition 2 let u url object web object web documents many kinds html postscript pdf audio video etc paper mainly focus html documents model html document list object example 2 following example web object represents html document given url title csdept peoplehpeoplehtmlif facultyhfacultyhtmli stahstahtmli studentshstudentshtml ig programs f phd programhphdhtmli msc programhmschtmli bsc programhbschtmlig researchhresearchhtmli note linking object dierent web object even though somewhat similar web object web object corresponds web document linking object simply part web object represents html document example 3 consider part latest dblp bibliography server michael ley httpwwwinformatikunitrierdeleydb shown figure 1 represented web object htmlcm shown figure 2 simplied urls 1 etc paper examples show htmlcm provides intuitive representation complex hierarchical structure within html documents high level close human conceptualizationvisualization documents none data models simple way conceptual model rulebased query language html 53 figure 1 dblp bibliography 22 converting html documents html documents intended human readable though browser constructed following common conventions often exhibit hierarchical structure examining large number html documents discovered set general rules used convert html documents web objects htmlcm subsection present conversion rules topdown recursively using operator c give examples html documents parsed may syntactic errors make presentation simple assume html documents syntactically correct implementation faulttolerant like web browsers focus html 401 28 latest version html 54 mengchi liu tok wang ling title dblp bibliography search bibliographies books fcollectionshb 51 db textbookhb 52 ig subjectshb 4 fdatabase systemshb 61 logic proghb 62 irhb 63 igg full text acm sigmod anthologyhc 1 reviews acm sigmod digital reviewhc 2 links f research groups fdatabase systemshd1i logic programminghd2ig computer science organizationhe 1 f acmhe ieee computer societyhe 15 idlhe related services hf 1 f corrhf 11 research indexhf 12 nzdlhf 13 cs bibtexhf 14 hbphf 15 virtual library hf figure 2 dblp web object simplied urls conversion method mainly based contents shown web browser therefore ignore features used enhance visual aspects web documents fonts colors style etc assume html interpreter used parse html les remove optional tags irrelevant components automatically identify corresponding components denition html documents based various tags html document starts tag ends tag normally consists two parts head body head mainly species title document body species contents html document html documents classied two kinds based kind contents framebased documents whose body starts ends regular documents whose body starts ends framebased documents purpose framebased documents allow visitor see one page time without completely cluttering screen framebased documents number frames body frame contains html document convert framebased document follows conceptual model rulebased query language html 55 rule 1 let df framebased document frames nested framesets body frameset list concatenation operator df converted list two attributed objects using operator c follows u frame n name u url frame cf rule 3 let f frame set f 1 n frame nested frameset cf words convert possibly nested frameset list object frame frameset linking object list object regular documents regular documents main ones provide various information internet convert list objects follows rule 4 let dr regular document sections 1 sn body g sections html documents two kinds sections sections heading sections without heading section heading convert attributed objects heading attribute rest value heading convert contents rule 5 let section heading h contents section without heading example 4 consider following html document computer science department history department founded 1970 programs department offers bsc msc phd degrees facilities department date equipment software html document 3 sections headings using rules 4 5 obtain following list object ftitle computer science department history department founded 1970 programs department oers bsc msc phd degrees facilities department date equipment softwareg within section may sequence paragraphs lists tables etc follows discuss convert using operator c paragraphs paragraph section immediately follows tag paragraphs may emphasized beginning usually bold italic etc followed colon convert attributed objects follows rule 6 let r paragraph emphasized beginning p paragraph without emphasized beginning either b em strong cp cr r logical parts r 1 rn n 1 logical part r 1 n converted paragraph recursively example 5 following section cia world factbook page canada httpwwwodcigovciapublicationsfactbook consists sequence paragraphs geographic coordinates map references north america area total 9976140 sq km land 9220970 sq km land use arable land 5 permanent crops 0 permanent pastures 3 forests woodland 54 38 1993 est conceptual model rulebased query language html 57 using rule 6 obtain following list object flocation northern north america geographic coordinates 60 00 n 95 00 w map references north america area f total 9976140 sq km land 9220970 sq kmg land use f arable land 5 permanent crops 0 permanent pastures 3 forests woodland 54 38 1993 estgg multimedia features hypertexts html documents contain multimedia features images applets video clips sound clips etc htmlcm convert features attributed objects using keywords image applet video sound etc attributes html image les referenced using image links conceptual level care information related images html document rule 7 let img altt image link u url string alt eld missing treat alt cases multimedia features handled similar way html hypertext links used link documents convert links linking objects follows rule 8 let hypertext link u url string rule 9 let character string example 6 consider following paragraph without emphasized heading hrefdickhtmldick likes hrefjanehtmljane three logical units thus converted following object fdickhdickhtmli likes janehjanehtmlig lists html supports three kinds lists ordered lists unordered lists de nition lists one also nest one kind list inside another ordered unordered list either ol ul rule 11 let deni tion list rule 12 let 1 tm nested ordered unordered list item either ol ul example 7 consider following html document containing nested lists cs department research research areas artificial intelligence cognitive science linguistics reasoning database systems query processing data models active db research groups labs programming languages intelligent systems natural language lab using rules 4 5 10 12 obtain following list object conceptual model rulebased query language html 59 ftitle cs department research research areas f articial intelligence f cognitive science linguistics reasoningg database systems f query processing data models active dbgg research groups labs f programming languages intelligent systems natural language labggg example 8 consider following html document containing denition list graduate studies cs general information department established 1970 programs study offers msc phd computer science financial support variety scholarships available facilities research labs kinds stateoftheart equipment using rules 4 11 obtain following list object ftitle graduate studies cs general information department established 1970 programs study oers msc phd computer science financial support variety scholarships available facilities research labs kinds stateoftheart equipmentgg tables tables html used arrange data rows columns cells tables may caption columnrow headings tables used two dierent ways present list better layout present real tabular information convert tables follows rule 13 let table caption table without caption h caption tc table contents rn rows row column headings table contents tc g row r 1 n 1 table column headings h 1 hn row r row heading 2 table column headings h 1 hn row r row 3 table column headings row r row heading 4 table neither column row headings row r example 9 consider following table html document caption babies adults total becket 5 22 27 worthington 7 5 12 using rule 13 case 1 obtain following attributed object bear sightings f northamptonfbabies 2 adults 4 total 6 g becket fbabies 5 adults 22total 27g worthington fbabies 7 adults 5 total 12gg html documents tables without column headings row headings often used arrange items visual eects consider following portion html document h2 aligncenter faculty profiles table border0 cellpadding3 cellspacing3 aligncenter conceptual model rulebased query language html 61 td colspan50 alignleft hreffacultybuntrick bunt td colspan50 alignleft hreffacultycarterjim carter td colspan50 alignleft hreffacultychestongrant cheston td colspan50 alignleft hreffacultycookejohn cooke using rule 13 case 4 rule 8 obtain following attributed object faculty proles f rick bunthfacultybunti grant chestonhfacultychestoni john cookehfacultycookei forms html forms enable visitors communicate web server two basic parts form structure consists text elds text areas buttons menus visitor sees lls page processing part process information visitor lls using cgi script typically written perl programming language conceptually interested structure part kind information presented communicated web server element form name valuetype associated name identies data sent value data builtin html document type species kind value comes visitor html supports two ways send information web server get post get method appends namevalue pairs end url small amount data post method sends data le namevalue pairs servers standard input without size limit using either get post mainly physical level concern much conceptual value form normally two special buttons submit reset submit button used send information reset button used reset form rule 14 let f form follows elements form g note dont keep information submit reset buttons result make form reserved attribute htmlcm indicate value used communication web server two buttons implied discuss convert elements forms first text eld one line area allow user input text rule 15 let text eld l label visible user type input text n name text eld visible user v default value field flabel l name n type value v g text areas html text elds span several lines converted similar way radio buttons forms used let user make one choice set alternatives rule r group radio buttons name following form l label group n name v value l label visible user buttons flabel l name n options fflabel l 1 value v 1 g flabel ln value vn gg radio buttons accept one answer per set check boxes allow visitor check many check boxes like converted similar way menus allow visitors html document enter information easily serves purpose radio buttons check boxes takes less space rule 17 let menu following form l label menu visible user n name menu v value l label visible user option option options fflabel l 1 value v 1 g flabel ln value vn gg conceptual model rulebased query language html 63 example 11 consider following portion html document form methodpost actionhttpsitecomcgibingetmenu usernameinput typetext namename valueenter name age category select option option option converted following object htmlcm text field f label username namename type text value enter name hereg label age category namecategory options f flabel 1319 value teenagerg flabel 2060 value adultg flabel 60 value seniorgg radio button f label sex name gender options f flabel female value femaleg flabel male value maleggg 3 htmlql rulebased query language html section present rulebased language called htmlql query web objects based conceptual model htmlcm discussed first dene syntax give examples nally dene semantics make presentation simpler use sets instead lists htmlql results extended lists 31 syntax htmlql besides set u urls set c constants also assume existence set v variables started followed string anonymous variable denition 3 terms dened recursively follows 1 constant lexical term x constant variable xhi label term 3 url variable hy anchor term 4 x constant variable url variable xhy linking term x called label called anchor linking term 5 x terms x attributed term distinct terms n 0 set term 7 variable either lexical term linking term label anchor attributed term set term depending context example 12 following several examples terms lexical terms cs dept john smith name label terms facultyhi journalshi labelhi anchor terms hfachtmli hjournalshtmli hurli linking terms facultyhfachtmli facultyhui labelhurli attributed terms title cs dept program fdg v lhui ahuiv set terms fxg fx johng fauthorhuig term ground variables note ground terms simply objects denition 4 expressions dened follows u url variable term u positive expression p positive expression p negative expression 3 arithmetic string set operation expressions dened using terms usual way readers familiar deductive databases logic programming url u positive expression negative expression functions predicate term use variable place u htmlql fact higherorder language conceptual model rulebased query language html example 13 following several examples expressions u stands constant url positive expressions negative expressions arithmetic expressions string expressions set expressions john 2 faculty expression ground contains variables ground positive expression web object denition 5 rule form l 1 ln positive expression l positive expression negative expression arithmetic string set operation expression dened using terms rule safe variables head covered limited dened 4 17 18 29 negative expression set term body rule move negation sign set convenience example use ffacultyfjohngg stand ffacultyfjohngg also combine positive negative expressions url convenience example use expression stand body rule note anonymous variable may appear several times rule dierent occurrences general stand dierent variables thus cannot appear head safe rule deductive database languages query normally dened rule empty head query contains variables query result either true false query contains variables query result set bindings make ground query true however web queries want set bindings make query true also proper restructuring query results head rule used purpose also complex queries web objects may need one rule express thus introduce notion query follows denition 6 query set safe rules whose heads url order make queries easier express introduce following shorthands rules terms expressions appearing rules stands x stands 3 n x stands following x x z several dot notations rule stands various combinations outlined 4 x stands c x xed number c stands 6 hxiy stands words n stands 0 n anonymous variables path 32 query examples following queries based dblp web object shown figure 2 make simple use u l stand url httpwwwinformatikuni trierdeleydb u url query result contents document given url u l local le given url note matter document pointed u l html xml postscript image executable etc copied destination u processing know document html want convert htmlcm use following query instead says every element denoted x set also element result set notion fxg body rule means x element corresponding set whereas notion fxg head rule used group result set corresponds partial set term relationlog 18 list objects attribute result query based web object figure 2 follows list anchors urls attribute result fanswer fa 1 2 3 4 gg list labels attribute conceptual model rulebased query language html 67 result fanswer fauthor title advanced home page searchgg query also represented equivalently using dot notation htmlql follows list attributes rst second levels result fanswer ftitle search bibliographies gg query also represented equivalently using dot notation follows q 6 obtain url tods result fanswer b 22 g urls page urls together labels q 9 get urls reachable page note query involves multiple web objects rules recursive since result web object dened used body second rule urls together labels reachable page order demonstrate expressive power htmlql let us consider cia world factbook 2000 httpwwwodcigovciapublicationsfactbook web server contains detailed information country region world html format location geographic coordinates area land boundaries costline population age structure birth rate gdp budget etc view web server set simplied web objects shown figure 3 therefore query infer useful information title canada title usa body f body f geographic f geographic f land boudaries f land boudaries f border countries fusg border countries fcanada mexicog title mexico body f geographic f franceurl f g land boudaries f border countries fusa g figure 3 cia world factbook find countries border germany france border country fgermany francegg result fanswer fbelgium luxemburg switzerlandgg countries border germany france border country fgermanyg result fanswer faustria czech republic denmark frence netherlands polandgg note query involves negation find pairs countriesregions border countries countries csg countries csg result query follows conceptual model rulebased query language html 69 fanswer ffregion1 bhutan region2 nepalg holy see vatican city region2san marinog fregion1 hong kong region2 macaug united arab emirates region2 yemengg note query construct fregion1n1 region2n2g hread used form pair countries regions outside pair brackets used group result tuples set find countries reached canada land transportation means countries fcgg countries fcgg note another recursive query 33 semantics htmlql subsection dene herbrandlike logical semantics htmlql rst dene terminology needed later subsection denition 7 herbrand universe uh htmlql set ground terms formed words uh domain possible objects denition 8 herbrand base bh htmlql set ground positive expressions formed using terms uh bh set possible web objects formed denition 9 web database wdb subset bh words web database set web objects example cia world factbook shown figure 3 web database denition 10 ground substitution mapping set web variables v fg uh use anonymous variables dot notations body rules allows us express queries easier demonstrated examples however dealing semantics ground substitution cannot map anonymous variable several dierent objects simplify presentation assume occurrence anonymous variable replaced nonanonymous variable never occur query rules map anonymous variable object also assume rules contain shorthands given web database positive expressions body query rule actually query used match part one web objects thus introduce following notions denition 11 object partof object denoted one following hold 1 constants 2 linking objects one following holds 3 attributed objects 0 4 set objects partof relationship objects captures fact part example 14 following several examples faculty faculty faculty facultyhfachtmli programs fmsc programg programs fphd program msc programg ftitle cs deptg ftitle cs dept facultyhfachtmlig extend partof relationship web objects web databases follows denition 12 let two web objects w denoted w w 0 denition 13 let wdb wdb 0 two web databases wdb partof denoted wdb wdb 0 w 2 wdb wdb 0 exists w 0 2 wdb 0 wdb w w 0 denition 14 let wdb web database notion satisfaction denoted j negation denoted 6j based wdb dened follows 1 ground positive expression exists conceptual model rulebased query language html 71 2 ground negative expression wdb 6j 3 ground arithmetic string set operation expression wdb true usual sense 4 rule r form every ground substitution wdb example 15 let wdb denote web database containing dblp web object example 3 wdb wdb wdb wdb denition 15 let q query model q web database satises q model q minimal model n q n deductive databases interested minimal model query computed bottomup continue dene bottomup semantics denition 16 let wdb web database q set rules immediate logical consequence operator tq wdb dened follows exists ground substitution wdb example consider query q 4 last subsection web database wdb example 15 note operator tq perform grouping therefore introduce following notions denition 17 two objects compatible one following holds 1 constants equal 72 mengchi liu tok wang ling compatible 3 set objects set objects compatible pair compatible example 17 following pairs compatible author author fauthorg ftitleg answer fauthorg answer ftitleg denition 18 two web object compatible compatible set web objects compatible pair compatible example following set web objects compatible denition 19 let set web objects 0 compatible subset 0 maximal compatible set exist web object compatible object 0 denition 20 let set objects grouping operator g dened recursively follows 1 singleton set 2 compatible set attributed objects 3 set set objects maximal compatible set objectsg extended set web objects follows 1 compatible set web objects form u 2 divided maximal compatible subsets 1 sn conceptual model rulebased query language html 73 denition 21 powers operation tq web database wdb dened follows example 19 continuing example 16 fanswer fauthorgg fanswer ftitlegg fanswer fadvancedgg fanswer fhome page searchggg theorem 1 let wdb web database q query gtq wdb minimal model q proof essentially proof 18 denition 22 let wdb web database q query semantics q wdb given gtq wdb 4 implementation based conceptual model htmlcm rulebased query language htmlql presented previous sections developed prototype system web search inference system soon available web site httpwwwscscarletoncamengchihtmlql section brie describe system high level architecture system shown figure 4 system organized four layers rst layer entire worldwide web internet html documents generated automatically specic application programs frontpage coeecup also written human manually quite common documents syntactic errors like commercial web browsers internet explorer netscape system tolerate syntactic errors second layer intelligent wrapper implements htmlcm accesses worldwide web internet fetches html documents browser interface textual interface search inference processor intelligent wrapper world wide web local data repository figure 4 high level system architecture converts web objects htmlcm order speedup query process ing intelligent wrapper also caches web objects local data repository builds proper indexes web objects allows user adjust web objects adding adjusting deleting attributes objects also learn pattern users interaction process similar html documents accordingly reasons called intelligent wrapper third layer system search inference processor implements htmlql mainly charge query processing obtains queries processed user interface layer checks whether web objects involved local data repository web objects involved local data repository invokes intelligent wrapper fetch uses seminaive bottomup xpoint computation generate result sends query result user interface layer proper display last layer user interface two kinds interfaces supported textual interface browser interface provide dierent kinds environment user issue commands express queries perform syntactical analysis pass valid commands internal format search inference processor also display query results generated search inference processor user dierent format web objects generated intelligent wrapper original web document like lynx netscape respectively 5 conclusion main contributions paper following first proposed conceptual model htmlcm html documents unlike data mod conceptual model rulebased query language html 75 els mainly focus interdocument structures hyperlink navigation conceptual model focuses complex hierarchical structure within html documents intradocument structure simple powerful high level constructs used best describe contents html docu ments html documents represented conceptual model close human conceptualizationvisualization documents also presented set generic rules automatically convert html documents conceptual model discovering rules structure html documents already addressed literature 10 13 15 25 26 however rules presented paper general systematic conversion ignore many features used enhance visual aspects web documents words lose information conversion thus cannot convert web documents conceptual model back html format however capture essence html documents natural intuitive way second presented htmlql rulebased language querying html documents internet based htmlcm unlike web query lan guages htmlql provides simple powerful way query intradocument structures interdocument structures allows query results restructured furthermore htmlql rm logical foundation lacking web query languages prototype system supports htmlcm htmlql implemented soon available web site httpwwwscscarletoncamengchihtmlql query language system easily extended handle xml documents note although approach works well many html documents still case html pages found dicult extract useful information would like extend functionality htmlql incorporating useful features make really useful tool web search inference investigate computability complexity issues html ql queries using htmlql would also like develop data extraction data integration tools based method proposed 22 20 objective build intelligent web search engine top search inference system acknowledgments research partially supported research equipment grants natural sciences engineering research council canada nserc authors also grateful yibin su implementing system r querying semistructured data lorel query language semistructured data weboql restructuring documents set construction logic database language extensible markup language xml 10 query language optimization techniques unstructured data xml path language xpath version 10 query language website management system reasoning website structure database techniques worldwide web survey database techniques worldwide web survey extracting semistructured information web declarative semantics web queries modeling web sources information integration declarative language querying restructuring web rol deductive object base language relationlog typed extension datalog sets tuples conceptual model web data model semistructured data partial inconsistent information integration semistructured data partial inconsistent information querying world wide web formal models web queries hierarchical wrapper induction semistructured information sources object exchange across heterogeneous information principles database knowledgebase systems document object model dom level 2 speci tr ctr mengchi liu tok wang ling towards semistructured data integration webenabled systems integration practices challenges idea group publishing hershey pa