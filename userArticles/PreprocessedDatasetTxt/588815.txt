perfect packing theorems averagecase behavior optimal online bin packing consider onedimensional bin packing problem discrete uniform distributions ujk 1 leq j leq k1 bin capacity k item sizes chosen uniformly set 12ldotsj note 0 discrete version previously studied continuous uniform distribution u0u bin capacity 1 item sizes chosen uniformly interval 0u show averagecase performance heuristics differ substantially two types distributions particular online algorithm constant expected wasted space ujk jk 1 leq j k1 whereas online algorithm on12 expected waste u0u 0 u leq 1 ujk result application general theorem courcoubetis weber covers discrete distributions distribution optimal expected waste random list n items must either theta n theta n12 o1 depending whether certain perfect packings exist perfect packing theorem needed ujk distributions intriguing result independent combinatorial interest proof cornerstone paper also survey recent results comparing behavior heuristics discrete continuous uniform distributions b introduction suppose one given items sizes 1 2 3 j one size asked pack bins capacity k little wasted space possible ie one asked find least cardinality partition packing set items sizes items block bin sum k published electronically february 1 2002 paper originally appeared siam journal discrete mathematics volume 13 number 3 2000 pages 384402 httpwwwsiamorgjournalssirev44139542html department computer science athens university economics business athens greece courcoucsiforthgr bell labs murray hill nj 07974 statistical laboratory university cambridge cambridge cb3 0wb uk rrweber statslabcamacuk avaya labs research basking ridge nj 07920 mihalisresearchavayalabscom values j k set packed perfectly ie sizes items block sum exactly k clearly sum item sizes must divisible k conditions must satisfied surprisingly divisibility constraint necessary sucient readers might want try hand proving relatively short proofs exist illustrated next section certain ingenuity required find one exercise serves warmup following general dicult theorem also proved next section r copies size r 1 theorem 1 perfect packing theorem positive integers k j r perfectly pack list l consisting rj items r sizes 1 bins size k sum rj item sizes multiple k settheoretic terms question answered theorem 1 intriguing puzzle pure combinatorics motivation work came relevance certain fundamental questions averagecase analysis algorithms particular consider standard bin packing problem one given bin capacity b list items positive size b asked find packing items minimum number bins realworld applications bin packing theorem 1 item sizes drawn finite set however usual averagecase analysis bin packing heuristics assumed item sizes chosen according continuous probability distributions nature allow uncountable number possible item sizes see 3 10 example assumption continuous distribution advantage sometimes simplifying analysis justified grounds continuous distributions serve reasonable approximations discrete ones reasons ask whether actually true example consider continuous uniform distributions u0 u 0 u 1 bin capacity 1 item sizes chosen uniformly interval 0 u discrete uniform distributions uj k 1 j k 1 bin capacity k item sizes chosen uniformly set 1 2 j limit distributions umjmk equivalent u0 jk scaling dividing item sizes bin capacities mk however limit combinatorial questions addressed theorem 1 evaporate suggests something important may fact lost transition discrete continuous models results paper show indeed case describe results need following notation bin packing algorithm l list items al number bins used applied l sl sum item sizes l divided bin capacity note sl lower bound number bins needed pack l waste packing l denoted w algorithm always produces optimal packing follows l n denote list n items whose sizes independent samples given distribution f expected waste rate ew algorithm distribution f defined expected value w l n function n follows typically abbreviate simply expected waste say distribution f bounded waste distribution ew opt consequence theorem 1 classification theorem courcoubetis weber 11 prove following theorem 2 j k 1 j k 1 ew opt represent departure continuous model since u0 u also bounded waste distribution u 0 u 1 3 16 distinction comes consider online algorithms online algorithm items assigned bins order occur input list l assignment must made without knowledge sizes number items later list item packed cannot subsequently moved mirrors many practical situations clearly substantial restriction power algorithm particular prove following theorem 3 online algorithm u 0 1 cannot case ew contrast discrete uniform case single online algorithm bounded expected waste distributions uj k 1 j k 1 recently discovered sumofsquares algorithm ss 12 defined follows suppose packing integersized items bins capacity b online algorithm packs item x list thing relevant current packing number n h bins whose current contents total h 1 h b 1 ss chooses bin x placed either new previously empty bin one already partially filled enough room x minimize resulting sum h note ss implemented take ob time per item 12 runs linear time fixed bin size shown 12 algorithm ss performs well average surprisingly general sense let us say discrete distribution f triple b p b integral bin size finite set integral item sizes range 1 b 1 rational probability vector p 0 probability item size ignore possibility items size b since items always must start new bin completely fill leaving rest packing unaected following specialized version result 12 suces needs theorem see 12 discrete distribution hence theorem 2 ew ss current paper organized follows proof perfect packing theorem theorem 1 appears section 2 section 3 presents proof theorem 2 begin describing classification result courcoubetis weber 11 upon proof depends result says discrete distribution f ew opt must one n n 12 o1 case applies depends existence certain perfect packings general np hard however theorem 1 allows us avoid complexity case discrete uniform distributions uj k theorem 3 papers contribution theory continuous distributions proved section 4 conclude section 5 survey results proved averagecase behavior bin packing algorithms discrete continuous distributions shall see significant dierences discrete continuous cases 2 perfect packing theorem begin proof theorem 1 three lemmas list number special instances lead perfect packing first lemma takes care special case r 1 lemma 4 suppose j k positive integers j k 12 set j items one sizes 1 j perfectly packs bins size k proof proof induction pick j k assume theorem true pairs smaller lexicographic order k j theorem clearly true k 2 j 2 assume k j 2 start perfectly packing bins pairs items j remaining items sizes plus item size k2 k even since sum sizes items packed point multiple k sum sizes remaining items also multiple k k odd unpacked items instance k induction hypothesis applies k even k2 divides jj 12 remaining items larger k2 thus items 1 k j 1 form instance k2 k j 1 induction hypothesis perfectly packed bins size k2 halfbins item size k2 combined bins size k suppose j k2 k even instance k2 j induction hypothesis applies k odd first note k2 j j 2 imply together 2m thus construct pairs items total size k 1 place one pair bins bins gaps size k k items sizes 1 j 2m 12 sum item sizes must mk k application induction hypothesis instance completes proof lemma 5 consider r 1 sets ith consists j items consecutive r even b j odd rj items perfectly pack j bins size equal sum average item sizes r groups ie rj proof lemma follow show bins size rj 12 possible pack perfectly items j bins manner bin contains exactly one item r sets r even simply take two sets pack ith largest item one set ith smallest item set ie pair bins level j 1 repeating r2 times fill j bins size rj 12 r j odd extra step required idea first pack items triples one item three sets sum triple easiest appreciate construction considering example say 9 triples sum 15 given columns general triples j result packing one per bin fill j bins level 3j 12 number remaining sets even remaining spaces j bins equal thus procedure case applied complete packing bin following lemma provides part induction step used proof theorem 1 lemma 6 consider quadruple k j r positive integers k j 12 exists perfect packing r copies 1 j bins size k exists perfect packing lexicographically smaller quadruple form one following holds b r divide k c k r even proof first using arguments lemma 4 demonstrate reduce problem smaller instance holds j k2 k odd pack bins pairs j 12 remaining items sizes 1 k j 1 define smaller instance k k k even pack bins way k2 remaining items sizes 1 k2 packed bins size k2 induction hypothesis exists perfect packing b holds r must common factor p 1 problem reduces instance k j rp mp suppose neither b holds c k even k2 divides k2 thus problem reduces smaller instance bin size k2 r even since b hold k divisible r must even thus argument applies finally case assume b c hold ie j k2 r divides k k r odd let r k fact r odd implies r 1 r 2 integers fact r divides k implies k 1 k 2 integers 12 since assumption j k2 hence hypothesis instance k 1 j r 1 pack r 1 copies 1 bins size k 1 similarly also pack copies 1 bins size k 2 since combine pairs bins sizes k 1 k 2 bins size k thus reduction smaller instances holds proof perfect packing theorem instances theorem proved described quadruples lemma 6 notice would enough specify triple k j r however helpful mention explicitly proof theorem induction k j r lexicographical ordering lemma 4 true 1 assume quadruples smaller k j r perfectly packed r 1 show exists perfect packing r copies 1 bins size k lemma 6 need consider case r odd r divides k r 1k2r j k2 note case r 1k2r integer k2r 05 integer show perfectly pack items sizes bins size k note lower bound range greater 1 lower bound j theorem follows remaining items form smaller quadruple induction hypothesis perfectly packed bins size k follow construction reader may find helpful consider specific example consider quadruple k j r 165 77 5 91 note k r odd r divides k j lies r show perfectly pack items sizes 12 77 remaining items form smaller quadruple 165 11 5 2 pack items sizes j 1r1k2r j divide range item sizes intervals ie sets consecutive integers interval symmetric multiple k2r one two lengths depending whether interval 100 coffman et al symmetric odd even multiple k2r form intervals first take largest interval symmetric r 1k2r interval r 1krj j note interval include r 2k2r since j rk2r next take largest interval formed remaining items symmetric r2k2r obtaining interval jkr1 r1krj1 continuing fashion taking intervals symmetric multiples k2r end intervals two kinds first r 12 intervals centered even multiples k2r interval centered r 1 2ik2r ranges 0 r 32 second equal number intervals centered odd multiples k2r interval centered r 2ik2r j ikr ranges 1 r 12 note smallest endpoint claimed numerical example two intervals type intervals first type 22 44 55 77 length 23 symmetric 33 66 intervals second type 12 21 45 54 length 10 symmetric 165 495 general intervals first type odd length symmetric even multiple k2r intervals second type even length k 2j 1 symmetric odd multiple k2r plan use lemma 5 perfectly pack bins size k items whose sizes lie intervals type begin considering intervals first type odd lengths symmetric points ikr 12 r items size intervals strategy partition intervals groups satisfy hypotheses lemma 5b arrange midpoints intervals within group sum k since midpoints correspond average item sizes corresponding intervals number items intervals odd lemma 5b implies perfectly pack items intervals group constructing groups bin packing problem midpoints intervals take role item sizes follows write items quotes speaking midpoints intervals possibly normalized viewing items perfectly packed bins required size considering intervals first type though r items sizes ikr wished pack bins size k normalization multiplies item size rk equivalent problem packing r items sizes 1 r 12 bins size r smaller version packing problem induction hypothesis means desired packing achieved example though 5 items sizes 33 66 packed bins size 165 normalizing factor 133 equivalent problem instance 5 2 5 3 must pack items whose sizes lie intervals second type intervals even length symmetric points ik2r odd 1 r 2 r items size intervals exhibit reduction smaller perfect packing problem multiply item sizes 2rk problem equivalent perfectly packing r copies items sizes 1 3 5 r 2 bins size 2r example 5 copies items sizes 1 3 perfectly packed 2 bins size 10 unfortunately sum item sizes odd multiple r items cannot perfectly packed bins size 2r reason also convenient even sum item sizes multiple 2r consider perfect packings bins sizes r 2r assume moment r copies items sizes perfectly packed bins sizes r 2r packed entirely bins size 2r number items bin must even item sizes odd lemma 5 applies implies original items perfectly packed bins size k hand suppose bin size r required set items packed bin size r corresponds set intervals whose midpoints sum k2 recall intervals even length divide interval first half second half obtaining twice many intervals whose midpoints sum k use lemma 5 construct perfect packing final step proof show indeed perfectly pack r copies item sizes 1 3 5 r 2 bins sizes r 2r shall use dierent packing depending upon whether case items perfectly packed following simple procedure begin packing one bin 1 1 r 2 one bin 2i 1 r2i2 r2i one bin 2i1 2i1 r2i r2i noting final case get three items size 2i packs four items size larger 1 three items size 1 apply packing times leaving us one item size larger 1 items size 1 pack one bin uses remaining items 1 items size 1 used two items size 1 1 numerical example construction says pack 5 copies 1 3 bins size 5 10 first packing one bin 1 1 one bin 1 3 3 3 leaves one item size 3 two size 1 perfectly pack bin size 5 procedure similar begin packing one bin 1 1 r 2 one bin 2i 1 2i1 r 2i2 r 2i packs four items size larger 1 three items size 1 apply packing times leaving us three items size larger 1 3 items size 1 pack one bin 2i 1 2i leaves us items size 1 two items size one item size finally pack one bin uses remaining items 3 proof theorem 2 recall theorem statement distribution uj k j k 1 ew opt rely general result courcoubetis weber 11 suppose discrete distribution defined section 1 note packing items sizes bin size b viewed nonnegative integer vector interest vectors give rise sum exactly b shall call perfect packing configurations instance one configuration would 1 0 2 let p sb denote set perfect packing configurations given b let sb convex cone r spanned nonnegative linear combinations configurations p sb theorem courcoubetis weber 11 discrete distribution b p following hold p lies interior sb ew opt b p lies boundary sb ew opt c p lies outside sb ew opt general nphard determine three cases applies given distribution proved straightforward transformation partition problem 13 however distributions uj k j k 1 use following lemma shall prove using perfect packing theorem show applies lemma 7 j k exist positive integers set r items consisting r items size together r items j 1 sizes packed perfectly bins size k note lemma implies jdimensional vector strictly inside appropriate cone 1 e interior cone spanned vectors form r r vectors sums perfect packing configurations lemma 7 proof theorem 2 thus follows case theorem proof lemma 7 make use perfect packing theorem two cases k simply set r total size r items sizes 1 perfect packing theorem perfectly pack jj bins size remaining items size go one per bin fill bins size precisely k hand suppose things bit complicated r 12 perfect packing theorem r items sizes 1 perfectly pack bins size k items exist assumption j k 1 add additional items size bins one per bin bring bin size k remain r items sizes k j j total items used completely fill remaining bins pairs items sizes j k j j 1 k note k even last bin type contains two items size k2 even number items choice r presents diculty easy verify cases r less 2k 2 4 proof theorem 3 recall theorem statement l n item sizes generated according u0 u 0 u 1 online algorithm exists constant c 0 ew l n cn 12 infinitely many n proof let wt denote amount empty space partially filled bins items packed show n 0 expected value average w1 wn n 12 u 3 implies ewn must n 12 u 3 ie 12 consider packing item t1 let denote number nonempty bins gap least u 2 8 first items packed bins one put item larger u 2 8 therefore t1 leave gap less bin either must size less u 2 8 size must within empty space one bins gaps larger 8 probability u 2 8tu choosing conditioning whether greater less n 12 noting size t1 distributed u0 u independent s1 last bin leaves gap p s1 last bin p s1 last bin leaves gap p s1 last bin p s1 leaves gap s1 last bin u4 sum first item sizes note lower bound number bins hence number items last item bin thus s1 last bin es using fact n2 implies hand wt n imply ewn n 12 noted proof relies heavily fact distribution continuous since reason union n 12 intervals size cannot cover full probability space discrete distributions uj k failing reason obtain significantly better averagecase behavior 104 coffman et al table expected waste symmetric case bf n 12 log 34 n 26 n 12 log 34 best online n 12 log 12 n 26 27 n 12 log 12 upper bound proved reference lower bound conjectured based experiments upper lower bounds appear follow corresponding results continuous case details upper bound particular still need worked 5 concluding remarks results paper among first obtained averagecase behavior bin packing algorithms discrete distributions since announced 4 many additional results proved illustrating contrasts similarities case continuous distributions concluding section survey literature point remaining open problems let us begin considering symmetric uniform distributions represented u0 1 uk 1 k k 1 general symmetric distribution one satisfies ps ps b 0 b table 1 summarizes known averagecase behavior distributions horizontal line separates oine algorithms online ones except noted results table theorems four famous classical algorithms extensively studied first fit ff online algorithm item placed first bin room bins sequenced according order received first item bin room new bin started best fit bf similar except item placed bin smallest gap large enough contain ties broken favor earlier bin first fit decreasing ffd best fit decreasing bfd corresponding oine algorithms list first sorted items nonincreasing order size ff bf applied worstcase point view ff bf equivalent asymptotic sense produce packings use 70 bins optimal neither worse 15 corresponding oine versions ffd bfd use bins optimal worse 14 15 results table 1 show algorithms perform much better average worst case since sublinear expected waste surprise first observed empirically 2 oine versions continue advantage online counterparts reduced practical significance distinction behavior ff bf bf better two remarks apply equally well discrete continuous cases comparison cases significant dierence online algorithms fixed value k online algorithms table expected waste contrast expected wastes continuous case n 23 ff n 12 log 34 n bf n 12 log 12 n best possible online algorithm notation fn means lower bound taken hardy littlewood sense ofn ie greater cfn table possibilities expected waste nonsymmetric case opt u 1 3 k 1 online u n 12 ou n 12 log 34 n 25 k 1 results proved paper ruled theorems occurrences known either bfd ffd occur k 10000 5 conjectured hold u 0 1 based experimental studies date proved u 066 23 bf 18 c 0 infinitely many n rather standard knuthian sense greater cfn c 0 suciently large n sense however online results discrete case consistent continuous one although technically online algorithm allowed know magnitude n one formally sets formulas expected waste discrete case one gets ew bf best possible online algorithm ss applicable continuous distributions note asymptotic discrete sense appears worse ff bf indeed experiments suggest ew ss let us turn nonsymmetric distributions u0 u u 1 uj k 1 known results distributions summarized table 2 first time see dierences continuous discrete cases oine algorithms particular ffdbfd ew u 12 3 16 many distributions uj k j k2 corresponding discrete uniform distributions ew moreover u 12 1 ew growth rate never occurs uj k follows theorem 5 says discrete distributions f ew ffd must either o1 n 12 n theorem also provides algorithms determine answers given distribution b p find constants proportionality expected waste linear run time polynomial b unfortunately although answers distributions uj k k 10000 computed 5 suggest simple rule choice among o1 n 12 n might depend j k example type behavior occur uj 151 distributions choice linear bounded expected waste switches back forth 10 times j increases 1 149 results k 10000 however exhibit several suggestive patterns first proved hold arbitrarily large k expected waste o1 whenever j k expected waste n 12 occur uj k suggesting may never occur third uj k uj k either linear bounded linear constant proportionality bfd never larger ffd occasionally smaller sense discrete case asymptotically consistent continuous case even though expected waste ffd bfd always sublinear latter k increases maximum constants proportionality linear expected waste uj k appear decrease indeed 106 coffman et al shown constants ffd bounded function declines least fast log kk 5 presumably holds bfd well worst case distribution u6 13 expected waste ffd bfd n624 less 06 expected optimal number bins moreover easily avoided since ss bounded expected waste distribution ff bf although case identified online ff bf algorithms outperform oine cousins turning online algorithms ff bf observe behavior discrete uniform distributions appears empirically similar behavior continuous ones based extensive experiments conjectured ff bf linear expected waste u0 u 0 u 1 although date proved u 066 23 bf 18 discrete case uj k experiments suggest suciently large k expected waste ff bf bounded linear proved 19 shown ew bf 0 result extended ff 1 4 shown ew ff practice bounded expected waste common least small k growth rates bf uj k k 11 completely characterized using multidimensional markov chain arguments 8 linear expected waste occurs u8 11 general result proving linear expected waste mirrors result continuous case ew bf k suciently large 18 point know expected wastes o1 n possible ff bf distributions uj k classification theorem ffd bfd opt proven range possibilities known limited o1 n 12 n ffd bfd also gap lower bound proved paper best possible online expected waste continuous distributions u0 u best rate known achievable former n 12 latter 12 log 34 n proved 25 algorithm 25 works distribution discrete continuous drawbacks pragmatic point view best current bound running time 8 log 3 n 12 one willing consider specialized algorithms better running times possible least theoretically fixed distribution f algorithm af runs time log n expected waste 12 log 34 n 24 algorithms drawbacks however since proof exist nonconstructive question whether practical algorithms exist attain bounds indeed whether lower bound achievable remains open finally addition open problems mentioned discrete continuous uniform distributions u0 u uj k question happens arbitrary discrete continuous distributions discrete case abovementioned classification theorems apply bfd ffd opt say corresponding expected waste must o1 n 12 n also mentioned applicable cases bfd ffd specific distribution determined time polynomial b opt also algorithm determining case applies noted 12 involves solving 1 linear programs sb variables constraints none algorithms technically runs polynomial time since b may exponentially larger contribution instance size log b however feasible b perfect packing theorems 107 excess 1000 makes possible characterize behavior ffd bfd opt many interesting distributions casebycase basis theorem ss presented section 1 generalized arbitrary discrete distributions one replaces ss simple variant ss ss items packed minimize h choice must made subject following additional constraint item may placed partially filled bin resulting gap cannot exactly filled items whose sizes already encountered list l resulting algorithm still runs time onb satisfies distributions f 12 addition complicated randomized variant runs time onb log b satisfies property also constant proportionality opt expected waste linear 12 case arbitrary continuous distributions yet general classification theorems although partial results proved rhee 22 provided complicated measuretheoretic characterization f sublinear appear computationally useful result rhee talagrand 23 implies ew opt must 12 better rates strictly o1 n 12 yet ruled however moreover yet algorithm general eectiveness ss variants results 24 25 imply online algorithms whose expected waste 12 log 34 n worse optimal expected waste oine algorithms karmarkar karp devised algorithm worst case never uses optimal number bins plus log 2 opt olog 2 n 17 means expected waste never maximum olog 2 n ew opt algorithms 24 25 however impractical running time best current bound 8 log 2 n conclude open problem hearkens back main result paper note ability determine expected waste ffd bfd opt casebycase basis take us far general results would desirable results u0 1 uk 1 k typically continue hold arbitrary continuous discrete symmetric distributions respectively real world dominated symmetric distributions would nice could identify additional interesting classes nonsymmetric distributions f general results ew opt proved paper discrete uniform distributions interesting classes new perfect packing theorems provide us similar general answers r experimental study bin packing unexpected expected behavior results bin packing stability online bin packing random arrivals longrun average constraints sumofsquares algorithm bin packing computers intractability guide theory npcompleteness average case behavior first fit decreasing optimal packings continuous uniform distributions u0 linear waste best fit bin packing skewed distribu tions stochastic analysis best fit bin packing averagecase analysis bin packing uniformly distributed item sizes optimal bin packing items random sizes optimal bin packing items random sizes average case analysis online algorithms bin packing pack better best fit tight bounds averagecase online bin pack ing tr ctr janos csirik david johnson claire kenyon james b orlin peter w shor richard r weber sumofsquares algorithm bin packing journal acm jacm v53 n1 p165 january 2006