quaternion frame approach streamline visualization abstractcurves space difficult perceive analyze especially form dense sets typical 3d flow volume deformation applications propose technique exposes essential properties space curves attaching appropriate moving coordinate frame point reexpressing moving frame unit quaternion supporting interaction resulting quaternion field original curves threespace associated piecewise continuous fourvector quaternion fields map new curves lying unit threesphere fourspace since fourspace clusters curves similar moving frames occur independently curves original proximity threespace powerful analysis tool results treat two separate movingframe formalisms frenet frame paralleltransport frame compare properties describe several flexible approaches interacting exploiting properties fourdimensional quaternion fields b introduction introduce techniques tools visualizing streamline data based differential geometry 3d space curves intrinsic properties space curves give rise scalar fields curves curvature torsion moving coordinate frame curve tensor field equivalent quaternion field either may understood solution set differential equations driven intrinsic scalar fields fundamental thesis quaternion frame coordinates useful exposing similarities differences sets streamlines good analytic visual measures revealing similarities curve shapes rare existence uniform distance measure quaternion space use orientation similarities evolution flow fields appear automatically meaningful spatial groups identification similarities useful applications finding repeating patterns related curve shapes single curves within large collections curves conversely large set nearlyidentical curves contains small number significant curves differ neighbors due subtle changes frame orientations method distinguish study two distinct moving coordinate frames may assigned curves three space one classic frenet frame also called frenetserret frame see eg 9 10 defined locally tangent normal binormal point curve paralleltransport frame see eg bishop 4 retains tangent vector uses nonlocal approach borrowed paralleltransport methods differential geometry compute frame components plane perpendicular curve frames recast quaternion frame coordinates orientation spaces relationship quaternions described altmann 2 interesting approach visualization properties quaternions recently given hart francis kauffman 19 systematic approaches representing clusters orientations 3d spaces angles suggested example alpern et al 1 among previous approaches visualizing geometry space curves note work gray 7 10 exploits curvature torsion scalar fields curve visualization purposes method extends naturally higherdimensional manifolds welldefined local curvature give examples application curvature torsion fields completeness pursue approach detail use quaternion frames 4d display proposed visualization technique stream manifold characteristics hanson 17 current article based concepts latter work includes additional results comparative properties frenet paralleltransport frames well work interactive methods 2 differential geometry space curves dense families space curves generated many applications ranging timedependent particle flow fields static streamlines generated integrating volume vector field deformations solid coordinate grid fundamental approach singles space curves although variations could used treat individual point frames see 1 stream surfaces see 20 orientation differences orientation fields well thus begin properties curve xt 3d space parameterized unnormalized arc length xt oncedifferentiable tangent vector point standard arclength differential typically expressed ds dt xt dt xt dt practice never smooth curves numerical applications piecewise linear curves presumed approximations differentiable curves thus might typically take curve given set points f x g corresponding formula additional sampling points desirable symmetries use fivepoint formula get smoother result one could also produce finer intermediate states spline interpolation curve locally straight ie x 00 locallydeterminable coordinate frame component plane normal nonlocal definition must used decide remainder frame determined formulate two alternate coordinate frames one frenet frame completely local indeterminable curve locally straight parallel transport frame defined everywhere depends numerical integration whole curve 21 frenet frames frenet frame see eg 9 10 defined follows xt thricedifferentiable space curve tangent binormal normal vectors point curve given bt theta tt illustrate standard frame configuration figure 1 second derivative vanishes interval frenet frame temporarily undefined illustrated fig 2 attempts work around problem involve various heuristics 24 frenet frame obeys following differential equation parameter t6 scalar magnitude curve derivative scalar curvature torsion quantities principle calculated terms parameterized numerical local values xt first three derivatives follows given nonvanishing curvature torsion smooth functions theoretically integrate system equations find unique numerical values corresponding space curve xt rigid motion 22 parallel transport frames bishop 4 noted frenet frame advantage consistent local computability points curve except vanishing second derivative another natural frame parallel transport frame welldefined everywhere distinguishing feature parallel transport frame essentially solution differential equation thus depends initial conditions subject numerical error long curves operational methods defining frames previously noted see eg 5 underlying mathematical basis elaborated geometrically parallel transport frame derives name fact corresponds notion moving vector around curved manifold way remains parallel possible mathematical properties derive observation tt given curve model unique may choose fig1eps figure 1 triad orthogonal axes forming frenet frame curve nonvanishing curvature convenient arbitrary basis remainder frame long plane perpendicular tt point derivatives depend make vary smoothly throughout path regardless curvature may therefore choose alternative frame equations6 illustrated fig 3 curve vanishing curvature segment one show 4 dt k 1 k 2 effectively correspond cartesian coordinate system polar coordinates dt fundamental fig2eps figure 2 triad orthogonal axes forming frenet frame curve vanishing curvature interval frame undefined interval ambiguity parallel transport frame compared frenet frame thus arises arbitrary choice integration constant disappears due differentiation numerical method computing parallel transport frame desired properties following given frame x two neighboring tangents unit vectors find angle perpendicular plane tangents given finally rotate frame x v get frame point x either 3d vector rotation rotation quaternion multiplication used effect rotation frenet frame one begin curve xt initial frame pair functions initial frame frame entire curve integrate needed compute missing variables also worthwhile noting form twodimensional cartesian vector field fig3eps figure 3 paralleltransport curve frame curve fig 2 4 frame unlike frenet frame fig 2 continuous along roof peak curvature vanishes point curve thus allow natural alternate characterization grays curve properties 7 10 3 theory quaternion frames awkward represent moving frames visually highdensity data frame consists three 3d vectors nine components yet three independent degrees freedom approaches representing degrees freedom threedimensional space suggested alpern et al 1 propose instead systematically exploit representation 3d orientation frames fourdimensions using equivalent unit quaternions correspond turn points threesphere see eg 25 collection oriented frames crystal lattice thus represented mapping orientations point set 4d quaternion space moving frame 3d space curve transformed path quaternion space corresponding pointwise 3d space curve quaternion representation rotations reexpressing moving frame 3d space curve elegant unit fourvector field curve resulting quaternion frames displayed curves right used combination methods enrich display 3d curve eg assigning coded display color representing quaternion component properties quaternion frame unitlength fourvector corresponds exactly one 3d coordinate frame characterized following properties ffl unit norm define inner product two quaternions components unit quaternion obey constraint therefore lie 3 threesphere typically represent embedded fourdimensional euclidean space r 4 ffl multiplication rule quaternion product two quaternions q p write q p takes form66q p 0 177this rule isomorphic multiplication group su2 double covering ordinary 3d rotation group so3 two quaternions b transformed multiplying quaternion q inner product delta b transforms invariant q unit quaternion ffl mapping 3d rotations every possible 3d rotation r 3 theta 3 orthogonal matrix constructed either two related quaternions using quadratic lationship qsigma sigma 3 ffl rotation correspondence substitute 3vector lying 2sphere 2 r n becomes standard matrix rotation plane perpendicular n quadratic form ensures two distinct unit quaternions q gammaq 3 correspond so3 rotation 31 quaternion frenet frames 3d coordinate frames expressed form quaternions using eq 6 assume columns eq 6 vectors b respectively one show eq 2 q 0 takes form see 1266q 0q 0q 0q 0375 equation following key properties ffl matrix right hand side antisym metric qt delta q 0 tion thus unit quaternions remain unit quaternions evolve equation ffl number equations reduced nine coupled equations six orthonormality constraints four coupled equations incorporating single constraint keeps solution vector confined 3sphere verify matrices 37explicitly reproduce eq 2 applied eq 7 get righthand terms frenet equations may integrated generate unique moving frame space curve nonvanishing may integrate much simpler quaternion equations 7 32 quaternion parallel transport frames similarly paralleltransport frame system given eq 4 der corresponding columns eq 6 completely equivalent following parallel transport quaternion frame equation q 0 t66q 0q 0q 0q 0375 antisymmetry guarantees quaternions remain constrained unit 3 sphere correspondence eq 4 verified follows assigning smooth quaternion frames given particular curve next faced task assigning quaternion values whatever moving frame sequence chosen 41 assigning quaternions frenet frames frenet frame equations pathological example curve perfectly straight distance curvature vanishes momentarily thus real numerical data space curves frequently exhibit behaviors make assignment smooth frenet frame difficult unstable impossible addition since given 3 theta 3 orthogonal matrix corresponds two quaternions differ sign methods deriving quaternion frenet frame intrinsically ambiguous therefore prescribe following procedure assigning smooth quaternion frenet frames points space curve ffl select numerical approach computing tangent given curve point x typically depends chosen curve model number points one wishes sample ffl compute remaining numerical derivatives given point use compute frenet frame according eq 1 critical quantities vanish tag frame undefined needing heuristic fix ffl check dot product previous binormal bt current value near zero choose correction procedure handle singular point among correction procedures considered 1 simply jump discontinuously next frame indicate presence point small curvature 2 create interpolating set points perform geodesic interpolation 25 3 deform curve slightly singular point ease gradual rotation frame apply interpolation heuristic see eg 24 creating jump frame assignment default choice since introduce new information ffl apply suitable algorithm shoemake 25 compute candidate quaternion corresponding frenet frame ffl 3 theta 3 frenet frame smoothly chang ing make one last check 4d inner product quaternion frame previous value sign change choose opposite sign keep quaternion smoothly changing effect corresponding 3theta3 frenet frame inner product near zero instead sigma1 detected radical change frenet frame noticed previous tests ffl space curves data coarsely sampled give desired smoothness quaternion frames still close enough give consistent qualitative behavior one may choose smooth intervening frames using desired level recursive slerping 23 25 get smoothly splined intermediate quaternion frames fig 4 plot example torus knot smooth space curve everywhere nonzero curvature together associated frenet frames quaternion frame values path quaternion frame field projected four space fig 5 plots information time curve discontinuous frame flips quickly zerocurvature point space curve two planar parts drawn though separate pages partlyopen book meeting smoothly crack pages see obvious jump frenet quaternion frame graphs meeting point two curves joined long straight line frenet frame ambiguous essentially undefined segment rather invent interpolation generally prefer use parallel transport method described next 42 assigning quaternions parallel transport frames order determine quaternion frames individual curve using parallel transport method follow similar distinct procedure ffl select numerical approach assigning tangent given curve point usual ffl assign initial reference orientation curve plane perpendicular initial tangent direction entire set frames displaced origin quaternion space corresponding value initial orientation matrix shape entire curve regardless initial choice choice intrinsically ambiguous application dependent ever one appealing strategy base initial frame first welldefined frenet frame proceed using paralleltransport frame evolution guarantees identical curves paralleltransport frames ffl compute angle successive tan gents rotate frame angle plane two tangents get next frame value ffl curve straight algorithm automatically makes changes ffl compute candidate quaternion representation frame applying consistency conditions needed note initial reference orientation discrete rotations represented directly terms quaternions thus quaternion multiplication used directly apply frame rotations local consistency automatic example provided fig 6 shows parallel transport analog fig 4 torus knot fig 7 parallel transport analog pathological case fig 5 time frame continuous curvature vanishes figure 4 projected image 3d 35 torus knot b selected frenet frame components displayed along knot c corresponding smooth quaternion frame components path quaternion frame components threesphere projected fourspace color scales indicate 0th component curves fourvector frame upper left graph c 5 examples next present typical examples streamline data represented using basic geometric properties described data set rendered following alternative modes 1 3d euclidean space picture pseudocol ored curvature value 2 3d euclidean space picture pseudocolored torsion value 3 fourvector quaternion frenet frame field plotted threesphere 4 fourvector quaternion parallel transport frame field plotted threesphere fig 8 complicated set streamlines derived twisting solid elastic euclidean space part process tying topological knot fig 9 avsgenerated streamline data set flow obstructed somewhere center causing sudden jumps streamlines certain regions focus paper specifically frames space curves remark collections frames isolated points frames stream surfaces 20 volumetric frame fields figure 5 projected image pathological curve segment b selected frenet frame components showing sudden change normal c quaternion frame components showing discontinuity values discontinuous path quaternion frame components threesphere color scales indicate 0th component curves fourvector frame upper left graph c could also represented using similar mapping quaternion space 6 visualization methods calculated quaternion frames curvature torsion point curve family tensor scalar quantities may exploit expose intrinsic properties single curve furthermore probably greater interest also ability make visual comparisons similarities differences among families neighboring space curves moving frame field set streamlines potentially rich source detailed information data however 9component frame unsuitable direct superposition dense data due high clutter resulting three orthogonal 3vectors displayed direct use frame practical sparse intervals prevents viewer grasping important structural details changes glance displays based 3d angular coordinates potentially useful lack metric uniformity 1 4vector quaternion frame potentially informative flexible basis frame visualizations discuss several alterna figure projected image 3d 35 torus knot b selected paralleltransport frame components displayed along knot c corresponding smooth quaternion frame components path quaternion frame components threesphere projected fourspace color scales indicate 0th component curves fourvector frame upper left graph c tive approaches exploitation quaternion frames data consisting families smooth curves 61 direct threesphere plot quaternion frame fields repeat crucial observation 3d space curve moving quaternion frames define completely new 4d space curves lying unit threesphere embedded 4d euclidean space curves entirely different geometry original space curve since distinct points curve correspond distinct ori entations families space curves exactly shape map quaternion curve curves fall away neighbors stand distinctly three sphere plot regions vanishing curvature show discontinuous gaps otherwise continuous quaternion frenet frame field curves wellbehaved quaternion parallel transport frame fields straight 3d lines course map single points quaternion space may require special attention display figures 4d 5d present elementary examples threesphere plot frenet frame figure 7 projected image pathological curve segment b selected parallel transport frame components showing smooth change normal c quaternion frame components showing continuity values continuous path quaternion frame components threesphere color scales indicate 0th component curves fourvector frame upper left graph c figures 6d 7d illustrate parallel transport frame figures 8cd 9cd present realistic examples quaternion frame curves displayed plots 2d projections two overlaid 3d solid balls corresponding front back hemispheres 3 3sphere projected 4d 3d along 0th axis front ball points 0 q 0 1 back ball points frame point displayed shades gray pseudocolor default view projected along q 0 axis points projected 4d 3d origin fact identity frames since unit length q requires points fig 10 show sequence views quaternion curves different 4d viewpoints using parallel projection fig 11 shows additional contrast structure sizes resulting 4d perspective projection 62 scalar geometric fields gray 7 10 advocated use curvature torsionbased color mapping emphasize geometric properties single curves torus knot since information trivial obtain simultaneously frenet frame also offer alternative encoding curvature torsion scalar fields volumetric space populated either sparsely densely streamlines examples shown figures 8ab 9ab 63 similarity measures quaternion frames quaternion frames carry natural geometry may exploited compute meaningful similarity measures rather use euclidean distance fourdimensional euclidean space r 4 one may use magnitude fourvector scalar product unit quaternions corresponding angle angular difference two 4d unit vectors natural measure great circle arclength 3 choosing distance measure results quantity invariant 4d rotations invariant 3d rotations represented quaternion multiplication also insensitive sign ambiguity quaternion representation given frame thus may used quantitative measure similarity two 3d frames natural way compare either successive frames single streamline pairs frames different streamlines 64 probing quaternion frames 4d light next explore techniques developed contexts dealing 4d objects see 14 15 16 previous work 4d geometry lighting critical element observation 4d light used probe geometric structure provided find way thickening curves surfaces become true 3manifolds define unique 4d normal vector welldefined scalar product 4d light objective achieved interactively employ moving 4d light generalization standard illumination equations produce images selectively expose new structural details given quaternion field may simply select 4d unit vector l represent light direc tion employ standard lighting model select individual components quaternion fields display using pseudocolor coding intensity fig 12 shows streamline data set rendered computing pseudocolor index point using 4d lighting formula varying directions 4vector l 65 true 4d illumination quaternion curves 4d may also displayed entirely different mode thickening form 3manifolds using method hanson heng 15 16 replacing qt 4d lighting formula specular analogs 4d normal vector volume element vertex massive expense volume rendering resulting solid tubes comprising 4d projection 3d avoided extending bearhair algorithm 4d curves 3 14 21 rendering tubes limit vanishing radius 7 interactive interfaces next describe variety specific interactive techniques examined tools exploring quaternion fields 71 4d light orientation control direct manipulation 3d orientation using 2d mouse typically handled using rolling ball 11 virtual sphere 6 method give user feeling physical control philosophy extends well 4d orientation control see 8 13 giving practical approach interacting visualization approaches sections 64 65 3d unit vector two degrees free dom determined picking point within unit circle determine direction uniquely sign viewdirection com ponent analogous control system 4d lighting based similar observation since 4d normal vector 3 independent degrees freedom choosing interior point solid sphere determines vector uniquely sign component unseen 4th dimension 4d viewdirection component fig 12 shows example series snapshots interactive interface work additional information display shows components 4d light vector particular moment 72 4d viewing threesphere projection control actually displaying quaternion field data mapped 3sphere requires us choose particular projection 4d 3d method displaying features stream lines order expose possible relevant structures user interface must allow viewer freely manipulate 4d projection parameters control easily inexpensively provided using 4d rolling ball interface 8 13 special version meshview 4d viewing utility 22 adapted support realtime interaction quaternion frame structures figures show snapshots interactive interface 4d rotations using parallel polar 4d projections respectively simplest viewing strategy plots wide lines may viewed stereo using motion par allax expensive viewing strategy requires projecting line solid 4d quaternion space reconstructing ideal tube real time projected streamline parallel transport techniques introduced paper fact extremely relevant task may applied tubing problem well see eg 5 18 73 3d rotations quaternion displays using 3d rolling ball interface generate quaternion representations 3d rotations form sin transform quaternion display quaternion multipli cation ie changing point effectively displaces 3d identity frame quaternion space 1 0 0 0 q may useful trying compare curves whose properties differ rigid 3d rotation common occurrence paralleltransport frame due arbitrariness initial condition refinements might include selecting rotating single streamlines quaternion field display make interactive comparisons streamlines differing rigid rotations one might also use automated tools select rotationally similar structures based minimizing 4d scalar product quaternion field points measure similarity 74 exploiting ignoring double points unique feature quaternion representations orientation frames dou bled single curve matter two points 3 chosen starting point since others follow continuously integrating small transformations collection points uniform orientation initial condition similarly evolve tandem normally requires single choice see pattern however possible frame rotate full 2 radians back initial orientation opposite side 3 collection streamlines wide range starting orientations preclude locally consistent method choosing particular quaternion q neighbor gammaq several alternatives ffl include reflected copy every quaternion field display doubles data density ensures two frame fields similar appear diametrically op posite metric properties similar curves easy detect addition 4d rotations damage continuity fields rotated outer surface pass northern southern hyperhemisphere 4d depth depicted color code example point rotates surface displayed solid ball smoothly pass surface pass back towards center color changes positive negative depth coding ffl keep one copy effectively replacing q gammaq default viewing hy perhemisphere effect data point unique curve frames near diametrically opposite points 2 surface solid ball representing north hyperhemisphere close orientation far away projection addition 4d rotations applied curves reach 2 surface solid ball jump diametrically opposite surface instead passing smoothly around edge southern hyperhemisphere 75 reciprocal similarities difference one interesting properties quaternion frame method appearance clusters similar frame fields 3sphere dis play two reciprocal tools exploring properties immediately suggest fig 13 illustrate effect grabbing cluster streamlines spatially close 3d space highlighting counterparts 4d quaternion field space thus allowing separate study moving frame proper ties technique distinguishes curves similar 3d space drastically different frame characteristics fig 14 contrast shows result selecting cluster curves similar frame field properties highlighting original streamlines back 3d space display method assists location similar curves could easily singled original densely populated spatial display examining variety alternative approaches design tools 8 conclusion paper introduced visualization method distinguishing characteristic features streamlinelike volume data assigning streamline quaternion frame field derived moving frenet paralleltransport frame curvature torsion scalar fields may incorporated well quaternion frame fourvector field piecewise smoothly varying map original space curve new curve threesphere embedded fourdimensional euclidean space fourvector field probed interactively using variety techniques including 4d lighting 4d view con trol interaction selected portions data tandem 3d streamline 4d quaternion field displays acknowledgments work supported part nsf grant iri9106389 thank brian kaplan assistance vector field data set indebted bruce solomon bringing reference 4 attention referees number helpful suggestions r orientation maps techniques visualizing rotations consumers guide illumination diverse codi mensions one way frame curve calculation reference frames along space curve study interactive 3d rotation using 2d control devices mathematicians gather play numbers game virtual reality performance virtual geometry treatise differential geometry curves surfaces modern differential geometry curves surfaces rolling ball quaternion frenet frames rotations ndimensional graphics interactive visualization methods four di mensions visualizing fourth dimension using geometry light illuminating fourth dimension visualizing flow quaternion frames parallel transport approach curve framing visualizing quaternion rotation constructing stream surfaces steady 3d vector fields rendering fur three dimensional textures portable 4d geometry viewer written openglmotif using geometric constructions interpolate orientation quaternions splines embeddings generalized cylinders light tr ctr andrew j hanson constrained optimal framings curves surfaces using quaternion gauss maps proceedings conference visualization 98 p375382 october 1823 1998 research triangle park north carolina united states andrew j hanson visualizing quaternions acm siggraph 2005 courses july 31august