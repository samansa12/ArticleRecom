building regression cost models multidatabase systems major challenge performing global query optimization multidatabase system mdbs lack cost models local database systems global level paper present statistical procedure based multiple regression analysis building cost models local database systems mdbs explanatory variables included regression model identified mixed forward backward method selecting significant explanatory variables presented measures developing useful regression cost models removing outliers eliminating multicollinearity validating regression model assumptions checking significance regression models discussed experimental results demonstrate presented statistical procedure develop useful local cost models mdbs b introduction multidatabase system mdbs integrates information preexisting local databases managed heterogeneous database systems dbs acle db2 empress key feature mdbs local autonomy local database retains manage data serve existing ap plications mdbs interact local dbs external user interface user issue global query mdbs retrieve data several local databases user need know data stored result obtained efficiently process research supported ibm toronto laboratory natural sciences engineering research council nserc canada current address microsoft corporation one microsoft way redmond wa 980526399 palarsonmicrosoftcom global query task global query optimization number new challenges query optimization mdbs caused primarily local autonomy among challenges crucial one local information needed global query optim ization local cost formulas models typically available global level perform global query optimization methods derive approximate cost models autonomous local dbs required issue attracted number researchers cently 3 du et al proposed calibration method deduce necessary local cost parameters idea construct special local synthetic calibrating database run set special queries database cost metrics queries used deduce coefficients cost formulas access methods supported underlying local database system 14 zhu larson presented query sampling method tackle issue idea method reviewed 15 16 zhu larson proposed fuzzy optimization method solve problem idea build fuzzy cost model based experts knowledge experience local dbss perform query optimization based fuzzy cost model 6 13 lu discussed issues employingdynamic adaptive query optimization techniques based information available run time mdbs idea query sampling method proposed 14 follows first step group possible queries local database 1 homogeneous classes costs queries class estimated formula done classifying queries according potential access methods example unary queries whose qualifications least one conjunctive assume local dbs mdbs agent provides uniform relational interface mdbs global server hence local dbss viewed relational ones indexed column table r put one class usually executed using index scan local dbs therefore follow performance pattern several unary join query 3 classes ob tained second step query sampling method draw sample queries query class mixture judgment sampling simple random sampling adopted step sample queries performed relevant local database costs recorded costs used derive cost formula queries query class multiple regression coefficients cost formulas local database system kept multidatabase catalog retrieved query op timization estimate cost query query class query belongs needs identified first corresponding cost formula used give estimate cost query although number sampling techniques applied query optimization literature 5 8 11 perform data sampling ie sampling data databases instead query sampling ie sampling queries query class query sampling method overcomes several shortcomings du et als calibration method 14 however statistical procedure deriving cost estimation formulas 14 oversimplified paper improved statistical procedure presented formulas automatically determined based observed sampling costs explanatory variables formula considered series measures ensuring useful formulas adopted rest paper organized follows section 2 reviews general linear regression model related terminology section 3 identifies potential explanatory variables regression cost model section 4 discusses determine cost model query class section 5 discusses measures used ensure developed cost models useful section presents experimental results section 7 summarizes conclusions assume qualification converted conjunctive normal form 3 select may may followed project called unary query 2way join may may followed project called join query unary join queries considered paper since common queries expressed sequence queries multiple linear regression model multiple regression allows us establish statistical relationship costs queries relevant contributing explanatory variables statistical relationship used cost estimation formula queries query class explanatory variables represent different independent variables allowed example x response dependent variable tends vary systematic way explanatory variables xs systematic way statistical linear relationship xs assume true application multiple linear regression model defined denotes value jth explanatory variable x j ith trial ith dependent random variable corresponding denotes random error regression coefficients following assumptions usually made regression analysis unknown constants known values 1 two uncorrelated 2 expected value every 0 ie e variance constant oe 2 3 every normally distributed n sample observations get values applying method least squares find values minimize equation called fitted regression equation given set values xs 1 gives fitted value b response variable use fitted regression equation estimation formula fitted value estimated value corresponding given xs evaluate goodness estimates obtained using developed regression model variance oe 2 error terms usually estimated point estimate oe 2 given following formula observed value b corresponding fitted value e square root 2 ie called standard error estimation indication accuracy estimation smaller better estimation formula using ith standardized residual defined follows e plot standardized residuals fitted values values explanatory variable called residual plot addition another descriptive measure used judge goodness developed model coefficient multiple determination r 2 defined proportion variability response variable explained explanatory variables xs larger r 2 better estimation formula standard error estimation measures absolute accuracy estimation coefficient multiple determination measures relative strength linear relationship response variable explanatory variables xs low standard error estimation high coefficient multiple determination r 2 evidence good regression model 3 explanatory variables application response variable represents query cost explanatory variables xs represent factors affect query cost difficult see following types factors usually affect cost query 1 cardinality operand table higher cardinality operand table higher query execution cost number ios required scan operand table indexes usually increases cardinality table 2 cardinality result table large result table implies many tuples need processed buffered stored transferred query processing hence larger result table higher corresponding query cost note cardinality result table determined selectivity query factor hence considered selectivity query 3 size intermediate result join query qualification contains one conjunctive terms refer one operand tables called separable conjunctive terms used reduce relevant operand table processing performed smaller size intermediate table efficient query processing would unary query executed index scan method query processing viewed two stages first stage retrieve tuples via indexes second stage check retrieved tuples remaining conditions qualification number tuples retrieved first stage considered size intermediate result unary query 4 tuple length operand table factor affects data buffering transferring cost query processing however factor usually important factors becomes important tuple lengths tables database vary widely example multimedia data stored tables 5 tuple length result table similar factor factor affects data buffering transferring cost important first three types factors may become important varies significantly one query another compared factors 6 physical sizes ie numbers used disk blocks operand tables result tables although factors type obviously controlled factors types 1 2 4 5 may reflect additional information percentage assigned operand table result table combined effect previous factors 7 contention system environment factors type include contention cpu io buffers data items servers etc obviously factors affect performance query however difficult measure number concurrent processes memory resident set sizes rss processes information processes could obtain reflect part contention factors contention factors usually omitted existing cost models 8 characteristics index index clustering ratio height number leaves index tree number distinct values indexed column tuples index key value physically stored gether index called clustered index highest index clustering ratio referenced index tuples index key value scattered physical storage obvious effect performance query properties index height index tree number distinct values also affect performance query variables representing factors possible explanatory variables included cost formula 4 regression cost models 41 variables inclusion principle general explanatory variables last section necessary cost model variables may significant particular model variables may available global level mdbs general principle including variables cost model include important variables omit insignificant unavailable variables among factors discussed section 3 first three types factors often important variables representing usually included cost model factors types 4 5 less important since variances relatively small representing variables included cost model significant variables representing factors type 6 included cost model dominated included variables variables representing last two types factors omitted cost models usually available global level mdbs fact assume contention factors considered environment approximately stable assump tion contention factors important cost model variables representing characteristics referenced indexes 4 possibly included cost model available significant apply variable inclusion principle develop cost model query class discussed details following subsection let us first give notations variables let ru operand table unary query r j1 r j2 two operand tables join query nu n j1 n j2 cardinalities ru r j1 r j2 respectively lu l j1 l j2 tuple lengths ru r j1 r j2 respectively rlu rl j tuple lengths result tables unary query join query respectively let u j selectivities unary query join query j2 selectivities conjunctions separable conjunctive terms r j1 r j2 respectively u1 selectivity conjunctive term used scan operand table via index applicable unary query 42 regression models unary query based inclusion principle divide regression model unary query class two parts basic model essential part regression model secondary part used improve model set v ub potential explanatory variables included basic model contains variables representing factors types 1 3 definition selectivity cardinalities intermediate table result table unary query respectively therefore v g potential explanatory variables v ub chosen full basic model discussed later potential variables may insignificant given query class fore included basic model local catalog information presence index column assumed available global level local implementation information index tree structures index clustering ratio available basic model captures major performance behavior queries query class fact basic model based existing cost models 4 10 dbms parameters interpreted initialization cost cost retrieving tuple operand table cost index looup cost processing result tuple respectively traditional cost model parameter may split several parts eg b 1 may consist io cost cpu cost determined analyzing implementation details employed access method however mdbs implementation details access methods usually known global query optimizer parameters therefore estimated multiple regression based sample queries instead analytical method improve basic model secondary explanatory variables may included model set vus potential explanatory variables secondary part model contains variables representing factors types 4 6 real physical sizes operand table result table unary query may known exactly mdbs however estimated z rnu rlu respectively 5 call z u rzu operand table length result table length respect ively therefore v g variables available could also included vus potential variables v us added 3 full regression model note query class variable might appear regression model another form ex ample access method query class sorts operand table query based columns processing terms like n u log nu andor log nu could included regression model let new variable represent term new variable may replace existing variable additional secondary variable v us regression model adjusted according available information relevant access method 5 physical size operand table accurately estimated nu constants 1 reflect overhead page overhead free space since constants 1 2 applied sample data omitted estimating physical size result table similar 43 regression models join query similarly regression model join query class consists basic model plus possible secondary part set v jb potential explanatory variables basic model contains variables representing factors types 1 3 definition rn n j2 j cardinality result table join query tn size intermediate table obtained performing conjunction separable conjunctive terms r ji size cartesian product intermediate tables therefore v g potential explanatory variables v jb se lected full basic model similar unary query class basic model based existing cost models dbms parameters interpreted initialization cost cost preprocessing tuple first operand table cost preprocessing tuple second operand table cost retrieving tuple first intermediate table cost retrieving tuple second intermediate table cost processing tuple cartesian product two intermediate tables cost processing result tuple respectively basic model may improved including additional beneficial variables set v js potential explanatory variables secondary part model contains variables representing factors types 4 6 similar unary queries physical size table estimated table length words physical sizes first operand table second operand table result table estimated variables z therefore g useful variables available could also included v js potential explanatory variables v js added 4 full regression model similar unary query class variables v jb v js may necessary join query class procedure choose significant variables model described following subsection addi tion additional variables may included variables could included another form 44 selection variables regression models determine variables inclusion regression model one approach evaluate possible subset models choose best ones among according criterion however evaluating possible models may practically feasible number variables large reduce amount computation two types selection procedures proposed 2 forward selection procedure backward elimination procedure forward selection procedure starts model containing variables ie constant term introduces explanatory variables regression model one time backward elimination procedure starts full model successively drops one explanatory variable time procedures need criterion selecting next explanatory variable included removed model condition stopping procedure k variables procedures involve evaluation k contrasted evaluation 2 k models necessary examining possible models select suitable regression model query class use mixed forward backward procedure described see figure 1 start full basic model backward elimination forward selection start point secondary part figure 1 selection variables regression model basic model 3 4 query class apply backward elimination procedure drop insignificant terms explanatory variables model apply forward selection procedure find additional significant explanatory variables set vus v js secondary explanatory variables query class next explanatory variable x removed basic model first backward stage one 1 smallest simple correlation coefficient 6 response variable 2 makes reduced model ie model x removed smaller standard error estimation original model two standard errors estimation close instance within 1 relative error next explanatory variable satisfying 1 satisfy 2 explanatory variable backward elimination procedure stops condition 1 chooses variable usually contributes least among variables predicting condition 2 guarantees removing chosen variable results improved model affects model little removing variables affect model little reduce complexity maintenance overhead model next explanatory variable x added current model second forward stage one set secondary explanatory variables b largest simple correlation coefficient response variable adjusted effect current model ie largest simple correlation coefficient residuals current model c makes augmented model ie model includes x smaller standard error estimation current model two standard errors estimation close instance greater 1 relative error next explanatory variable satisfying b satisfy c explanatory variable exists forward selection procedure stops reasons using conditions c similar situation removing variable particular variable added model unless improves standard error estimation significantly order reduce complexity model description whole mixed forward backward procedure given algorithm 41 select explanatory variables regression model input set vb basic explanatory variables set v secondary explanatory observed data sample queries given query class output regression model selected explanatory variables 1 begin 2 use observed data fit full basic model query class 6 simple correlation coefficient two variables indicates degree linear relationship two variables 3 calculate standard error estimation 4 variable x vb 5 calculate simple correlation coefficient x response variable 6 end 7 backward true 8 backward true vb 6 9 let x 0 explanatory variable vb smallest simple correlation coefficient 11 use observed data fit reduced model x 0 removed 12 calculate standard error estimation 0 reduced model 13 small 14 begin 15 set reduced model current model 17 end 18 else backward false 19 end 20 forward true 21 22 x v 23 calculate simple correlation coefficient x residuals current model 24 end 25 let x 0 variable largest simple correlation coefficient 26 use observed data fit augmented model x 0 added 27 calculate standard error estimation 0 augmented model 28 small 29 begin 30 set augmented model current model 31 33 end 34 else forward false 35 end 36 return current model regression model 37 end since start basic model high possibility appropriate model given query class backward elimination forward selection likely stop soon initiated therefore procedure likely efficient pure forward backward procedure however worst case procedure still check potential explanatory variables pure forward backward procedure 5 measures ensuring useful models develop useful regression model measures need taken analysis furthermore developed regression model verified used improvements may needed model proves acceptable section based characteristics cost models query optim ization identify appropriate statistical methods apply ensure significance developed cost models 51 outliers outliers extreme observations residual plot outliers points lie far beyond scatter majority points method least squares fitted equation may pulled disproportionately towards outlying observation sum squared deviations minimized two possibilities existence liers frequently outlier results mistake extraneous causes application may caused abnormal situation system execution sample query case outlier discarded sometimes however outlier may convey significant information ex ample application outlier may indicate underlying dbms uses special strategy process relevant sample query different one used queries since outliers represent extreme cases objective derive cost estimation formula good majority queries query class simply discard outliers use remaining observations derive cost formula standardized residual plot outlier usually four standard deviations zero 7 therefore observation whose residual exceeds certain amount standard deviations 4 considered outlier moved residuals query observations used calculated based full basic model since model usually captures major behavior final model 52 multicollinearity explanatory variables highly correlated among multicollinearity among said exist presence multicollinearity general inhibit ability obtain good fit tend affect predictions new observa tions provided predictions made within region observations however estimated regression coefficients tend large sampling variabil ity make reasonable predictions beyond region observations obtain precise information true regression coefficients better avoid multicollinearity among explanatory variables method detect presence multicollinearity widely used means variance inflation factors factors measure much variances estimated regression coefficients inflated compared independent variables linearly related r 2 j coefficient total determination results explanatory variable x j regressed explanatory variables variance inflation factor x j defined clear x j strong linear relationship explanatory variables r 2 j close 1 v x j large avoid multicollinearity use reciprocal variance inflation factor detect instances explanatory variable allowed fitted regression model excessively high interdependence variable explanatory variables model specifically set vb basic explanatory variables used algorithm 41 formed follows beginning vb contains basic explanatory variable highest simple correlation coefficient response variable variable next highest simple correlation coefficient entered vb 1v x j small procedure continues possible basic explanatory variables considered sim ilarly algorithm 41 selects additional beneficial variables v model variable x j whose small skipped 53 validation model assumptions usually three assumptions regression model 1 need checked 1 uncorrelation error terms 2 equal variance error terms 3 normal distribution error terms note dependent random variables satisfy assumptions error terms since x ij 1 known values gen eral regression analysis seriously affected slight moderate departures assumptions assumptions ranked terms seriousness failure assumption hold serious least serious follows assumptions application observed costs repeated executions sample query inherent relationship observed costs repeated executions another sample query assumption contention factors system approximately stable hence first assumption satisfied good property violation assumption 1 serious regression model however variance observed costs repeated executions sample query may increase level magnitude query cost execution sample query longer time lar ger cost may suffer disturbances system execution sample query shorter time thus assumption 2 may violated regression models furthermore observed costs repeated executions sample query may follow normal distribution ie assumption 3 may hold either observed costs usually skewed right observed costs stay stable level time become larger time time disturbances occur system since uncorrelation assumption rarely violated application checked regression analysis program normality assumption many studies shown regression analysis robust 7 9 technique give usable results even assumption satisfied fact normality assumption required obtain point estimates b assumption required constructing confidence intervals hypothesistesting decision rules ap plication construct confidence intervals hypothesistest needs normality assumption f test discussed later like many statistical applications normality assumption violated choose ignore violation thus normality assumption checked regression analysis program either assumption equal variances violated correction measure usually taken eliminate reduce violation correction measure us first discuss test violation equal variances assuming regression model proper fit sample observations sampled residuals reflect assumptions error terms therefore use sampled residuals check sumptions two ways sampled residuals used check assumptions residual plots statistical tests former sub jective latter objective since try develop program test assumption 2 automatically employ latter mentioned assumption equal variances violated application variances typically increase level response variable case absolute values residuals usually significant correlation fitted values response variable simple test correlation two random variables u w bivariate distribution unknown use spearmans rank correlation coefficient 9 12 defined ranks values u w u w respectively null alternate hypotheses follows values u w uncorrelated either tendency larger values u paired larger values w tendency smaller values u paired larger values w decision rule significance level ff r ae 1gammaff2 r ae ff2 conclude ha critical values ae found 9 ha concluded absolute residuals fitted values assumption equal variances violated assumption equal variances violated estimates given corresponding regression model maximum precision 2 since estimation precision requirement high query optimization violation assumption tolerated certain degree however assumption equal variances severely violated account taken fitting model useful tool remedy violation equal variances assumption method weighted least squares idea provide differing weights 1 w weight ith observation values b j minimize lsw found least squares theory states weights w inversely proportional variances oe 2 error terms thus observation large variance receives less weight another observation smaller variance weighted variances error terms tend equalized unfortunately one rarely knowledge variances estimate weights fol lowing sample data used obtain fitted regression function residuals ordinary least squares first cases placed small number groups according level fitted value variance residuals calculated group every observation group receives weight reciprocal estimated variance group moreover use results weighted least squares reestimate weights obtain new weighted least squares fit procedure continued substantial changes fitted regression function take place many iterations occur latter case fitted regression function smallest spearmans rank correlation coefficient chosen procedure called iterative weighted least squares procedure 54 testing significance regression model mentioned previously evaluate goodness developed regression model two descriptive measures used standard error estimation coefficient multiple determination good regression model evidenced small standard error estimation high coefficient multiple determination significance developed model tested using f test 7 9 f test derived normality assumption however evidence nonnormality usually distort conclusions seriously 12 general f test normality assumption asymptotically ie sufficiently large samples valid error terms normally distributed 1 therefore f test adopted application test significance regression model although error terms may follow normality assumption class characteristics queries class likely access method gu1 unary queries whose qualifications least one conjunct r scan method indexed key value gu2 unary queries gu1 whose qualifications least one index scan method conjunct r c r indexed 2 f g range gu3 unary queries gu1 gu2 sequential scan method g j1 join queries whose qualifications least one conjunct r method either r r j indexed g j2 join queries g j1 whose qualifications least one nestedloop join method indexusable conjunct one operand tables index reduction first g j3 join queries g j1 g j2 sortmerge join method table 1 considered query classes 6 experiments verify feasibility presented statistical procedure experiments conducted within multidatabase system prototype called cords mdbs three commercial dbmss ie oracle 70 empress 46 db26000 110 used local dbmss experiments local dbmss run ibm rs6000 model 220 machines due limitation paper length experimental results oracle 70 reported paper experiments systems demonstrated similar results experiments conducted system environment contention factors approximately stable example performed midnights weekends little interference users systems however occasional interference users still existed since systems shared resources queries local database system classified according query sampling method considered query classes 7 given table 1 sample queries drawn query class performed three local database systems observed costs used derive cost models relevant query classes statistical procedure introduced previous sections tables 2 3 show derived cost models relevant statistical measures seen ffl cost models capture 90 variability query cost observing coefficients total determination exception g u1 queries executed fast ie small cost queries due efficient access methods small result tables ffl standard errors estimation cost models acceptable compared mag 7 equijoin queries considered nitudes relevant average observed costs sample queries ffl statistical ftests significance level 001 show derived cost models useful estimating costs queries relevant query classes ffl statistical hypothesis tests spearmans rank correlation coefficients significance level show strong evidence indicating violation equal variances assumption derived cost models using method weighted least squares needed ffl derivations 8 cost models require method weighted least squares implies error terms original regression model using regular least squares violate assumption equal variances cases summary statistical procedure derived useful cost models figure 2 shows typical comparison observed costs estimated costs test queries mentioned experimental results show smallcost queries often worse estimated costs largecost queries observation coincides du et als observation calibration method reason phenomenon 1 cost model usually dominated large costs used derive small costs may follow model different buffering processing strategies may used smallcost queries 2 small cost greatly affected contention factors available buffer space number current processes 3 initialization costs distribution data disk space factors may important largecost queries 8 unreported cost models local database systems experiments require method weighted least squares query class cost estimation formula table 2 derived cost formulas query classes oracle 70 query coefficient standard average fstatistic spearmans rank weighted multiple error cost critical value correlation critical least class determination estimation sec value table 3 statistical measures cost formulas oracle 70 could major impact costs smallcost table cardinality cost elapse time solid line estimated cost dotted line observed cost figure 2 observed estimated costs test queries g j3 oracle since causes problem usually uncontrollable related implementation details underlying local database system hard completely solve problem global level mdbs however problem could mitigated refining query classification according sizes result tables andor b performing sample query multiple times using average observed costs derive cost model andor c including cost model explanatory variables available buffer sizes distributions data disk space fortunately estimating costs smallcost queries important estimating costs large cost queries query optimization important identify largecost queries bad execution plans could avoided 7 conclusion todays organizations increasing requirements tools support global access information stored distributed heterogeneous autonomous data repositories multidatabase system tool integrates information multiple preexisting local databases process global query efficiently mdbs global query optimization required major challenge performing global query optimization mdbs desired local cost information may available global level knowing efficiently local queries executed difficult global query optimizer choose good decomposition given global query tackle challenge feasible statistical procedure deriving local cost models local database system presented paper local queries grouped homogeneous classes cost model developed query class development cost models base multiple regression analysis cost model divided two parts basic model secondary part basic model based existing cost models dbmss used capture major performance behavior queries secondary part used improve basic model potential explanatory variables included part cost model identified backward procedure used eliminate insignificant variables basic model cost model forward procedure used add significant variables secondary part cost model mixed forward backward procedure select proper variables cost model efficiently regression analysis outliers removed sample data multicollinearity discovered using variance inflation factor prevented excluding variables larger variance inflation factors violation equal variance assumption detected using spearmans rank correlation coefficient remedied using iterative weighted least squares procedure significance cost model checked standard error estimation coefficient multiple determination ftest measures ensure developed cost model useful experimental results demonstrated presented statistical procedure build useful cost models local database systems mdbs presented procedure introduces promising method estimate local cost parameters mdbs distributed information system plan investigate feasibility method nonrelational local database systems mdbs future r theory linear models multivariate analysis regression analysis example query optimization heterogeneous dbms query optimization database systems practical selectivity estimation adaptive sampling global multidatabase query optimization applied linear statistical models simple random sampling relational databases statistical methods business economics access path selection relational database management systems accurate estimation number tuples satisfying condition statistical methods query optimization multidatabase systems tr ctr wei ru liu zhi ning liao jun hong query cost estimation remote system contention states analysis internet web intelligence agent system v2 n4 p279291 december 2004 qiang zhu satyanarayana motheramgari yu sun cost estimation queries experiencing multiple contention states dynamic multidatabase environments knowledge information systems v5 n1 p2649 march ying chen qiang zhu nengbin wang query processing quality control world wide web world wide web v1 n4 p241255 1998 amira rahal qiang zhu perke larson evolutionary techniques updating query cost models dynamic multidatabase environment vldb journal international journal large data bases v13 n2 p162176 may 2004 ning zhang peter j haas vanja josifovski guy lohman chun zhang statistical learning techniques costing xml queries proceedings 31st international conference large data bases august 30september 02 2005 trondheim norway zaiqing nie subbarao kambhampati ullas nambiar effectively mining using coverage overlap statistics data integration ieee transactions knowledge data engineering v17 n5 p638651 may 2005 piyush shivam shivnath babu jeff chase active accelerated learning cost models optimizing scientific applications proceedings 32nd international conference large data bases september 1215 2006 seoul korea qiang zhu jaidev haridas wenchi hou query optimization via contention space partitioning cost error controlling dynamic multidatabase systems distributed parallel databases v23 n2 p151188 april 2008 subbarao kambhampati eric lambrecht ullas nambiar zaiqing nie gnanaprakasam senthil optimizing recursive information gathering plans emerac journal intelligent information systems v22 n2 p119153 march 2004