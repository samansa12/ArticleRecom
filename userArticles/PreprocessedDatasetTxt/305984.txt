relaxing triangle inequality pattern matching notion closeness pattern matching property close b b close c close c traditionally property attained triangle inequality db c represents notion distance however full power triangle inequality needed property hold instead relaxed triangle inequality suffices form db c c constant large paper show one measures used distances shapes experimental version ibms qbic1 query image content system niblack et al 1993 satisfies relaxed triangle inequality although satisfy triangle inequality b introduction traditionally databases used store retrieve textual numerical information recently applications multimedia led development database systems handle images one system qbic query image content system niblack et al 1993 developed ibm almaden research center experimental version qbic system henceforth paper called simply qbic search images various visual characteristics color shape texture result query traditional database usually specific set items eg names employees computer science department result query database images might welldefined consider example query return items look like tree query could entered user draw desired treelike shape screen extracting shape visual scene questions form shape database look like query tree shape q definite yesno answers unlike questions form employee e computer science department rather answer question reasonably given numerical distance measures well shape matches shape q answer query could ordered list shapes database ordered closely match query shape q raises issue define measure distance shapes extensive literature various ways define distances shapes include methods based turning angles arkin et al 1990 mcconnell et al 1991 hausdorff distance huttenlocher et al 1992 various forms moments kim kim 1997 taubin cooper 1991 fourier descriptors jain 1989 mehtre kankanhalli lee 1997 mumford 1991 discuss compare various ap proaches scassellati et al 1994 compare methods basis well correspond human perceptual distinctions section 2 discuss particular distance measure shapes one measures used qbic system intuitively measures well boundary one shape matches boundary allowing either boundary stretch matching variation method provided best overall results scassellati et al study let us reconsider problem mentioned earlier q shape wish obtain ordered list shapes database ordered closely match q let us say qbic system wish see best 10 matches upon request next best 10 matches computationally expensive process several reasons given shape database computing distance q may well expensive example distance measure used qbic discussed section 2 dynamic programming algorithm used quadratic complexity furthermore even wish see best 10 matches may compute distance q every shape database obvious indexing mechanism used potential avenue speeding search preprocess database clustering shapes according distance amongst example found q far database shape 1 preprocessing tells us 1 close another database shape 2 might able infer q sufficiently far 2 need actually compute distance q 2 similarly q close 1 preprocessing tells us 1 far 2 might able infer q sufficiently far 2 work must able relate distance q 2 distance q 1 distance 1 2 example triangle inequality triangle inequality distance measure states b c considering similarity measures shapes arkin et al 1990 say measure metric particular say triangle inequality necessary since without case da b db c small da c large undesirable pattern matching visual recognition applications theme paper agree completely distance measure da b db c small da c large certainly undesirable instead want distance measure property close b b close c close c obtain property necessary satisfy triangle inequality instead sufficient satisfy relaxed triangle inequality form c constant large show measure used distances shapes qbic system satisfies relaxed triangle inequality although satisfy triangle inequality scenario relaxed triangle inequality holds recalling situation described know distances dq want conclude something dq 2 satisfies 1 symmetric infer bounds first two inequalities correspond situations described earlier conclude q sufficiently far 2 without actually computing distance third inequality corresponds situation conclude q sufficiently close 2 knowing q close 1 close 2 note last case might provide useful information system qbic want know case close matches close match results presented sorted order based closeness match remainder paper three sections appendix section 2 formally define distance nem r one measures used qbic system section 3 definition illustrated example section 4 sketch proof relaxed triangle inequality full proof given appendix give definitions results greater generality specific application distances shapes relaxed triangle inequality shape distance follows immediately general results also show section 4 value constant c give relaxed triangle inequality essentially best possible within general framework however specific application shape distance smaller constant might possible particularly restricted shapes meeting naturalness property section 4 remark ways relaxed triangle inequality might improved using extra information contained boundary matching two shapes addition nem r distance obtained boundary matching example extra information could helpful amount stretching done improvements may necessary relaxed triangle inequality useful practice even though technical results paper apply specific distance measure results carry general message distance measure judged unsuitable simply satisfy triangle inequality might possible prove measure satisfies relaxed triangle inequality specific results give concrete example proving natural measure distance shapes satisfies relaxed triangle inequality although satisfy triangle inequality 2 distance measure nem r one intuitively appealing way measure distance shapes measure well boundary one shape matches boundary allowing either boundary stretch matching measure used example cortelazzo et al 1994 trademark shapes mcconnell et al 1991 ice floes cortelazzo et al 1994 call distance measure nonlinear elastic matching nem define measure formally shall show nem satisfy niceness property discussed introduction possible nemdistance b small nemdistance c small nemdistance c large nem satisfy triangle inequality known previously cf cortelazzo et al 1994 show even satisfy relaxed triangle inequality niblack yin 1995 defined modified version nem essentially one methods implemented qbic system related distance notion described mcconnell et al 1991 niblack yins definition depends parameter r positive number call stretching penalty idea informally add distance amount equal r times amount stretching done make two boundaries match thus pay penalty excessive stretching letting nem r denote modified measure show nem r satisfies relaxed triangle inequality 1 constant increases shall show section 3 version nemdistance involving stretching penalty described mcconnell et al 1991 satisfy relaxed triangle inequality consider definition nem r fix stretching penalty r 0 although primarily interested case r 0 allow equivalent nem get definition nem special case shortly shall define distance nem r x two sequences general allow 6 n allow elements x j sequences belong metric space distance metric b refer b base particular assume b symmetric satisfies triangle inequality points bx show nem r distance satisfies relaxed triangle inequality r 0 bounded ie b sup finite constant c relaxed triangle inequality depends r b sup application shape matching shall discuss elements x j represent tangent angles b measures difference two angles hence case discuss niblack yins approach shape matching assume shape given simple nonselfintersecting closed curve plane measure well particular point boundary one shape matches particular point b boundary another shape difference tangent angle boundary point tangent angle boundary point b thus begin replacing shape sequence tangent angles taken number n points spaced equally distance around boundary shape sequence tangent angles first shape sequence tangent angles second shape nem r distance shapes taken nem r distance shall define shortly sequences x nem r distance two shapes depends starting points boundaries two shapes comparisons begin ideally distance two shapes taken min distance possible starting points fact niblack yin 1995 focus issue starting points based example shapes moments paper shall consider issue assume starting points given easy see results existence relaxed triangle inequality would continue hold even define distance taking min distance possible starting points qbic system fixed number points equally spaced around boundary shape starting point determines sequence papers consider notions distance depend shapes example arkin et al 1990 distance function given polygonal shapes distance function depend parameters auxiliary points taken along boundary say nem r satisfies relaxed triangle inequality nem r c cnem r b nem r b c mean constant c depend length sequences b c application shape matching means c depend number sample points specifically show works number sample points used shapes number sample points varies shape shape still obtain relaxed triangle inequality larger constant r one imagine weaker versions concept relaxed triangle inequality constant c might depend dimensionality space points b c drawn however nem r need weaken way return definition nem r x nmapping set theta theta theta theta theta theta theta theta theta theta theta theta theta theta theta theta theta theta theta theta theta theta theta theta theta theta theta theta theta theta theta theta theta figure 1 minimal 9 9mapping stretchcost mapping 6r call pair hi ji 2 edge satisfying following conditions 1 every number f1 first component edge hi 2 every number f1 ng second component j edge hi 3 two edges cross exist nmapping minimal proper subset nmapping note minimal mapping cannot three edges since subset obtained removing edge hi 0 ji mapping example figure 1 shows minimal 9 9mapping sometimes refer nmapping simply mapping n clear context unimportant edge hi ji 2 stretchedge either hi gamma edge hi ji mapping define stretchcost hi ji respect r hi ji stretchedge example mapping shown figure 1 edges h2 3i h3 5i h5 6i h6 6i h7 6i h9 9i stretchedges stretchcost r edges stretchcost 0 distancecost hi ji respect sequences x stretchcost distancecost mapping latter respect sequences defined summing respective costs edges total cost given finally nmapping g sequel abbreviate dcostm sequences x clear context similarly edge e mapping may abbreviate scoste scoste clear clearly value nem r x change minimize minimal n mappings also easy see nem r x nmapping set edges obtained reversing first second components edge gives n mmapping 0 stretchcost distancecost although definition nem r x involves search number mappings grows exponentially minimum n well known functions nem r x computed time omn dynamic programming see example mcconnell et al 1991 cortelazzo et al 1994 niblack yin 1995 algorithm iteratively computes quantities di j di j nem r distance lengthi prefix x lengthj prefix values di j computed d1 3 example illustrate definitions simple example another purpose example show nemdistance stretching penalty r 0 satisfy relaxed triangle inequality show nem r distance satisfy triangle inequality small enough positive r section 4 give lower bound constant c relaxed triangle inequality nem r since particular lower bound bigger 1 every r shows every r nem r distance fails satisfy triangle inequality example section also shows version nemdistance involving stretching penalty described mcconnell et al 1991 satisfy even relaxed triangle inequality thus important stretching penalty r enters distance calculation method niblack yin figure 2 three shapes used illustrate distances shapes 1995 r additive gives relaxed triangle inequality whereas mcconnell et al 1991 r multiplicative consider three shapes shown figure 2 note shape consists five short line segments three long line segments although shapes figure 2 chosen polygons simplicity nem r distance applied general shapes whose boundaries curved first step convert shape sequence tangent angles placing sample points around boundaries simplify example suppose shape one sample point placed short line segment k sample points placed along two long line segments part top shape sample points placed along long line segment forming bottom shape total number sample points therefore 5 case mark starting point arrow move clockwise around shape sample points give following sequences tangent angles z z 7 z z z z z z z consider first nem stretching penalty r 0 figure 2 0 small triangular protrusion shape b stretched perfectly match large triangular protrusion shape short horizontal segments left right large triangular protrusion shape stretched exactly match long horizontal segments left right small triangular protrusion shape b rest boundaries shapes b match exactly without stretching future reference call mapping stretch mapping example stretch mapping begins since total four short line segments length 1 stretched match four long line segments length k mapping contains stretchedges since r 0 stretchcost 0 distancecost 0 angle anglesa mapped angle anglesb nemdistance shapes b c small although zero case small triangular protrusion shape b match small square protrusion shape c although mismatch occurs small part boundary distance small specifically 2 upper bound nembc 2 shown nostretch mapping containing edges hi ii k2 lower bound nemac k2 holds angles 4 74 occurring total 2k times anglesa differ least 4 every angle occurring anglesc upper shown nostretch mapping since nemac increases k increases whereas nemab nembc constant independent k nemdistance satisfy relaxed triangle inequality constant c independent number sample points instructive see example figure 2 cause relaxed triangle inequality fail nem r like nem nem r longer true distance b zero even small much stretching make triangular protrusions match many points distance includes large term due large multiple stretching penalty hand little stretching distance includes large term due mismatch tangent angles many points believe aesthetic reasons shapes b close another advantage nem r nem addition advantage nem r satisfies relaxed triangle inequality whereas nem nem r better fits aesthetic idea closeness shapes although nem r satisfies relaxed triangle inequality sketched section 4 shown appendix shapes figure 2 show satisfy triangle inequality r 8 first nem r shown stretch mapping distancecost mapping still 0 stretchcost 4k gamma 1r nem r b c 2 shown nostretch mapping nem r c k2 argument given nem using bounds easy check nem r finally note version nemdistance involving stretching penalty described mcconnell et al 1991 satisfy relaxed triangle inequality version stretching penalty r multiplies distancecost stretchedge instead added need r 1 order r impose penalty formally sequences x mapping edge hi ji define cost hi ji stretchedge bx cost 0 cost 0 e mx let nem 0 minimum cost 0 mapping x shapes figure 2 show r 1 nem 0 r satisfy relaxed triangle inequality reason r shown stretch mapping distancecost edges 0 stretch mapping b multiplying r increase cost still true described nem nem 0 r c k2 relaxed triangle inequality hold nem 0 r 4 relaxed triangle inequality section show nem r satisfies relaxed triangle inequality r 0 b sup finite consider first case equallength sequences theorem 41 base b real r 0 integer n 0 three sequences z length n proof sketch outline main steps proof full proof given appendix basic strategy take mapping mxy x cost nem r x mapping z z cost nem r z paste together certain way obtain mapping mxz x z method pasting together allows us place upper bound cost mxz terms cost mxy z terms nem r x nem r z upper bound cost mapping mxz x z upper bound nem r x z simple example suppose mappings mxy z stretchedges ie mappings consist edges hi ii 1 n take mxz also consist edges hi ii since base distance b satisfies triangle inequality assumption easy see distancecost mxz sum distancecost mxy distancecost z since stretchcost three mappings zero actually get triangle inequality z case general however mappings mxy z stretchedges makes construction mxz bounding cost complicated also means get triangle inequality general let mxy z minimal n nmappings since referring edges different mappings clarity name points x z using notation xi yj zk respectively 1 n example edge mxy form hxi yji j prove relaxed triangle inequality construct minimal n nmapping mxz place upper bound costmxz since want use fact b satisfies triangle inequality help us bound distancecost mxz want mxz minimal n nmapping following midpoint property every edge hxi zki 2 mxz midpoint yj hxi yji 2 mxy hyj zki 2 z distancecost edge hxi zki sum distancecosts hxi yji hyj zki first step show mxz midpoint property exists done appendix describing construction one mapping adding edges one time added edge midpoint bound cost mxz useful divide stretchedges mapping two classes depending sequence receives stretching mxy stretchedge hxi yji xstretchedge hxi gamma 1 yji 2 mxy stretchedge hxi cannot cross exactly one holds z stretchedges divided similarly stretchedges zstretchedges also useful divide stretchcost mapping two parts based division stretchedges follows define xscostmxy resp scostm xy r times number xstretchedges resp stretchedges mxy similarly define scostm z zscostm z since x length number xstretchedges mxy equals number stretchedges mxy therefore following equalities involving stretchcost scost similarly since z length prove relaxed triangle inequality suffices prove following two bounds stretchcost scost distancecost dcost mxz claim 1 2 r relaxed triangle inequality stated theorem follows algebraic manipulation two claims 2 3 4 5 justify claim 1 stretchedge mxz associate distinct stretchedge either mxy z clearly association given appendix suffices prove claim 1 final step justify claim 2 since know mxz midpoint property would like use fact b satisfies triangle inequality complication shown situation figure 3 distancecost hxi yji contributes times distancecost mxz key observation handling complication contributions dcosthxi yji first contribution balanced zstretchedge z contributes r stretchcost z symmetric case edge z contributes several times distancecost mxz symmetric case handled similarly using xstretchedges mxy balancing details see appendix 2 c c c c c c c c c c figure 3 situation distancecost hxi yji contributes times distancecost mxz remark suggest two ways relaxed triangle inequality might improved first claims 1 2 2 3 4 5 actually give potentially tighter bound mxy z mappings nem r x therefore application image databases mentioned introduction might advantageous clustering database shapes keep track stretchcost mappings well total cost easy modify dynamic programming algorithm compute together minimum total cost mapping minimum stretchcost mapping among mappings minimum total cost second proof claim 2 use b sup upper bound distancecost edge mxy z therefore another way improve relaxed triangle inequality practice would replace gross upper bound b sup actual maximum distancecost edges mxy z would require computing storing maximum distancecosts clustering preprocessing although remark shows might get better bound nem r x z certain cases next result shows constant 1 general relaxed triangle inequality essentially best possible proof given appendix theorem 42 base b b sup 0 real r 0 real 0 integer n three sequences x z length n give analogues theorems 41 42 case unequallength sequences results similar except constant relaxed triangle inequality increases r proofs unequallength case similar proofs equallength case differences outlined appendix theorem 43 base b real r 0 three sequences x z theorem 44 base b b sup real r 0 real 0 three sequences x z acknowledgment grateful byron dom martin farach myron flickner wayne niblack prabhakar raghavan baruch schieber helpful discussions comments r efficiently computable metric comparing polygonal shapes trademark shapes description stringmatching techniques comparing images using hausdorff distance translation fundamentals digital image processing mathematical theories shape model perception qbic project querying images content using color pseudodistance measure 2d shapes based turning angle retrieving images 2d shape comparison computation methods human perceptual judgments recognition positioning rigid objects using algebraic moment invariants tr ctr perola kristensson shumin zhai relaxing stylus typing precision geometric pattern matching proceedings 10th international conference intelligent user interfaces january 1013 2005 san diego california usa ronald fagin ravi kumar sivakumar comparing top k lists proceedings fourteenth annual acmsiam symposium discrete algorithms january 1214 2003 baltimore maryland yongsheng chen yiping hung tingfang yen chioushann fuh fast versatile algorithm nearest neighbor search based lower bound tree pattern recognition v40 n2 p360375 february 2007 k seluk candan prakash yamuna similaritybased retrieval temporal specifications application retrieval multimedia documents multimedia tools applications v27 n1 p143180 september 2005