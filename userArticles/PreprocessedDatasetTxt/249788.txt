trafficbalanced adaptive wormhole routing scheme twodimensional meshes abstractin paper analyze several issues involved developing low latency adaptive wormhole routing schemes twodimensional meshes observed along adaptivity balanced distribution traffic significant impact system performance motivated observation develop new fully adaptive routing algorithm called positivefirstnegativefirst twodimensional meshes algorithm uses two virtual channels per physical channel creating two virtual networks messages routed positivefirst one virtual network negativefirst combination algorithm distributes system load uniformly throughout network also fully adaptive shown proposed algorithm results providing better performance terms average network latency throughput compared previously proposed routing algorithms b introduction distributed parallel computers tasks executed set intercommunicating nodes processors communication usually carried means passing messages one node another interconnection network since direct networks utilize locality message references efficiently existing systems use direct networks kary ncube ndimensional mesh performance interprocessor communication scheme depends largely network dimension switching technique routing algorithm contemporary systems used two three dimensions store forward virtual cutthough wormhole routing main switching techniques used interprocessor communication due lower latency small buffer requirements wormhole routing preferred widely used recent multicomputers 1 message passing multicomputer systems implemented based routing algorithm determines path message follows reach destination path every pair source destination fixed algorithm called deterministic better system performance preferable algorithm adapts traffic congestion providing alternate paths adaptive routing algorithms classified partially adaptive fully adaptive partially adaptive routing algorithms use subset available physical paths source destination turn model 2 3 direction restriction model 4 planar adaptive routing 5 examples partially adaptive algorithms examples fully adaptive algorithms include routing schemes proposed linder harden 6 duato 7 su shin 8 boura das 9 schwiebert jayasimha 10 adaptive algorithms presented 7 8 9 10 try achieve adaptivity allowing number alternate paths message routing order achieve high adaptivity algorithms often favor messages paths others turn cause uneven traffic distribution network result part network heavily loaded whereas regions may sparsely utilized uneven network utilization often results early saturation network limits system performance system performance thus depends adaptivity algorithm also evenly network traffic distributed fact simulation results clearly indicate traffic distribution created algorithm significant impact system performance 11 boppana chalasani also shown adaptivity necessarily mean better performance thus main motivating factor behind work develop new routing algorithm adaptive also creates balanced traffic distribution paper propose fully adaptive minimal routing scheme twodimensional 2d meshes algorithm uses two virtual channels 12 per physical channel creating two virtual networks messages routed positivefirst one virtual network negativefirst way algorithm uses two distinct virtual networks call positivefirstnegativefirst pfnf algorithm proposed routing scheme described two phases first introduce new concept called region adaptivity region messages routed using available paths using concept show various algorithms cause uneven traffic distribution network effect system performance second present details pfnf routing algorithm results indicate pfnf routing algorithm outperforms previously proposed adaptive routing algorithms terms network latency throughput using concept region adaptivity simulation results also show pfnf algorithm creates balanced traffic load network 3p 8 mesh route 9 opty 10 algorithms considered performance comparison high adaptivity using amount hardware resources rest paper organized follows section 2 summarizes required definitions section 3 discusses motivation behind work pfnf routing algorithm described section 4 simulation results presented section 5 followed concluding remarks section 6 preliminaries section define terminologies associated adaptive routing scheme definitions reiterated previous works 7 13 14 sake completeness definition 1 physical interconnection network pn strongly connected graph pnpvpc pv represents set processing nodes pc represents set physical channels connecting nodes definition 2 virtual interconnection network v n strongly connected graph v npvv c pv represents set processing nodes v c represents set virtual channels mapped set physical channels pc definition 3 routing function r n theta n aec aec power set v c supplies set alternative output channels send message current node x destination node rx definition 4 routing function given interconnection network connected iff pair nodes x 2 n possible establish path p x ae aec using channels supplied r virtual network virtual network ii f q4 ji2 jk2 kj2 kj1 kl1 kl2 lk1 on2 kg1 kg2 ko2 ko1 north south east west x q3 figure 1 4 theta 4 twodimensional mesh figure 1 shows 4 theta 4 2d mesh two virtual channels per physical channel two virtual networks shown v n1 v n2 node mesh identified 2 coordinate vector figure also shows directional notations quadrants labels used paper definition 5 region adaptivity area message route fully adaptively using available virtual channels quantitatively region adaptivity source node defined region constituting set contiguous nodes message sent source routed fully adaptively using underlying routing algorithm ie using physical paths virtual paths virtual channels used region adaptivity routing algorithm region adaptivity source node center network consider 2d mesh network shown figure 2a node 3 1 source node eastfirst algorithm 3 messages directed towards nodes shaded region routed fully adaptively messages node outside region would routed deterministically call shaded region region adaptivity node 3 1 eastfirst algorithm figure 2b represents region adaptivity node 1 2 whole region adaptivity eastfirst algorithm represented shaded region shown figure 2c virtual channels used region adaptivity obtained considering adaptive regions virtual networks concept region adaptivity helps us understand behavior algorithms particularly evenly algorithm distributes network load since eastfirst algorithm onehalf mesh fully adaptive region messages number alternate paths route region half mesh since region symmetric mesh assuming uniform traffic generation nodes causes c b 41 02 12 22 32 42 43 23 03 04 14 24 34 44 41 02 12 22 32 42 43 23 03 04 14 24 34 44 source source figure 2 region adaptivity node 3 1 b node 1 2 c eastfirst algorithm traffic congestion one part network hence lead early saturation saturation one part network saturates rest network hence degrades system performance previous results indeed shown symmetric negativefirst algorithm performs better partially eastfirst algorithm uniform traffic distribution 3 thus region adaptivity closely relates performance algorithm motivation motivating factor development algorithm driven observation fully adaptive algorithms presented literature either routing restrictions adaptivity improved expense uneven traffic distribution network illustrate point comparing two recently proposed algorithms 3p 8 mesh route 9 3p mesh route algorithms divide virtual channels two separate sets waiting channels nonwaiting channels using 3p algorithm message travel using nonwaiting virtual channels gets blocked travels waiting channels using dimension order routing 14 similarly mesh route algorithm message travel using available nonwaiting channel nonwaiting channels node available messages restricted dimension order routing waiting channels except go negative x directions messages use waiting channels without restriction average buffer utilizations 3p mesh route algorithms uniform traffic shown figures 3 b respectively 3p algorithm distributes traffic evenly traffic concentrated one quadrant mesh mesh route algorithm uneven load distribution becomes bottleneck high traffic areas saturate early turn saturate whole network 3p algorithm routing restrictions due dimension order routing waiting channels hand mesh route relatively dimension dimension average buffer utilization network load distribution 16x16 mesh dimension dimension average buffer utilization network load distribution 16x16 mesh dimension dimension average buffer utilization network load distribution 16x16 mesh b c figure 3 traffic distribution 3p algorithm b mesh route algorithm c opty algorithm less routing restrictions favors messages going negative directions hence creates uneven traffic distribution network recently proposed opty algorithm proven optimal terms adaptivity number required virtual channels 10 traffic distribution created algorithm symmetric messages uniformly generated shown figure 3 c thus goal work design algorithm adaptive well produces balanced symmetric network traffic load thereby improves system performance routing algorithm basic concept behind algorithm follows physical interconnection network pn logically divided two virtual networks v n1 v n2 two virtual channels associated physical channel different virtual networks different routing algorithm used two virtual networks v n1 v n2 step set virtual channels chosen two virtual networks depending upon routing tag routing function particular virtual network selection function selects channel message routed pfnf algorithm 2d mesh described follows virtual channel directed node x 0 0 denoted vc v n x 0 v n virtual interconnection network virtual channel vc belongs routing algorithm associated procedures defined follows routing algorithmmessage header let current node destination 1 routing tagmessage header form routing tag 2 elements routing tag 0 store current message return 3 routing functionrouting tag determine set virtual channels v c next step routing 4 select appropriate vc v c 5 vc 6 forward message along virtual channel vc procedure routing tagmessage header 1 1 routing routing routing routing dimension end 2 return routing tag procedure selection functionv c 1 number members v select 2 otherwise use multiplexturn bias explanation follows select vc message header arrives intermediate node routing tag calculated routing tag used determine routing dimension completed incoming message consumed elements routing tag equal zero function routing function described later returns virtual channels allowed routing algorithm specific virtual channel taken message chosen selection function selection function first check availability virtual channels physical channels number available virtual channels one selection policy applied selection policy random turn biased multiplexturn biased random selection policy virtual channel chosen randomly free set network contention reduced messages avoid making turns turn bias policy selects virtual channel direction possible performance degradation due virtual channel attributed delay multiplexing physical channel multiplexturn bias first avoids sharing physical channel message possible avoids making turn second priority effect selection policies studied 2 15 simulation results show turn bias multiplexturn bias perform better random selection policy 2 15 17 procedure routing functionrouting tag 1 elements routing tag 0 routing tag0 0 v c routing tag1 0 return virtual channel set vc 2 elements routing tag 0 routing tag0 0 v c routing tag1 0 return vc 3 routing tag0 0 v c routing tag0 0 routing tag1 0 routing tag1 0 gamma 1 v c return vc procedure routing function pf routing algorithm implemented v n1 nf routing algorithm implemented v n2 pf nf routing algorithms message route without restriction destinations x gammax gammay directions source destination located directions gammax x gammay source node routing restrictions pf nf algorithms applied implement pf algorithm one virtual network nf routing algorithm another routing function divided three cases first two cases return virtual channels v n1 v n2 message destined xy gammax gammay directions third case returns virtual channels v n1 positive direction v n2 negative direction routing restrictions pf nf applied case deadlock freedom algorithm proved using duatos theorem stated follows 16 proof theorem uses several terminologies associated channel dependency graph terminologies defined earlier 7 14 16 theorem 1 given interconnection network routing function r deadlockfree iff exists routing subfunction r 1 connected cycles extended channel dependency graph prove pfnf algorithm deadlock free first analyze routing restrictions turn models pf nf routing algorithms 3 depicted figure 4 b respectively two sets channels belonging virtual networks distinguished j jj respectively dotted lines represent restricted turns glass ni 3 showed without extra virtual channel routing algorithm deadlock free cycle formed turn model consider virtual networks individually routing algorithms virtual networks pf nf deadlockfree since pfnf algorithm allows message change one virtual network another channel dependencies virtual networks also need considered turns involved two virtual networks shown figures 4 c dashed lines represent conditionally restricted turns turns restricted message one dimension traverse otherwise conditionally restricted turns allowed b c figure 4 routing restrictions pf nf pfnf algorithms turn restrictions pfnf algorithm summarized follows southeast westnorth turns restricted pf restrictions northwest eastsouth turns restricted nf restrictions v n1 v n2 southeast westnorth turns restricted message use v n1 southwest direction iff finished routing eastnorth direction using pf restrictions imposed v n1 hence southeastwestnorth turns occur v n2 v n1 northwest eastsouth turns restricted message use v n2 northeast direction iff finished routing westsouth direction using nf restrictions imposed v n2 hence northwesteastsouth turns occur v n1 v n2 routing northeast direction messages traveling v n1 v n2 conditionally restricted nf restrictions v n2 message v n1 route northeast direction using v n2 routing needed negative direction hence changing form v n1 v n2 northeast direction prohibited message route westsouth direction later time v n2 v n1 routing southwest direction messages traveling v n2 v n1 conditionally restricted pf restrictions v n1 message v n1 route southwest direction using v n2 routing needed positive direction hence changing form v n2 v n1 southwest direction prohibited message route eastnorth direction later time routing subfunction r 1 defined show escape path without cyclic dependency always exists using r 1 message routed dimensionorder v n2 north direction v n1 south direction source node r 1 stated follows destination node equal current node message consumed message forwarded using dimensionorder routing v n1 1 message forwarded using dimensionorder routing v n2 words r 1 conditionally assigned virtual networks lemma 1 routing subfunction r 1 connected proof known dimensionorder routing connected therefore routing algorithm assigns one virtual network message headed toward north direction another virtual network message headed toward south direction also connected 2 dependency cycles classified intradependency cycles interdependency cycles virtual channels virtual network involved intradependency cycles interdependency cycles consist virtual channels different virtual networks prove cycle extended channel dependency graph need show intradependency interdependency cycles graph lemma 2 using routing subfunction r 1 cycle formed due channel dependencies virtual network intradependency cycle proof form counterclockwise cycle within virtual network virtual channels directions gammax gammay x sequence required similarly virtual channels directions x gammax gammay sequence required formation clockwise cycle virtual channels directed northsouth belong v n1v n2 cannot supplied since r 1 supplies virtual channels v n2 north bound messages virtual channels v n1 supplied r 1 thus virtual channels v n1 involved extended channel dependency graph intradependency cycle formed n1 scenario applicable v n2 gammay virtual channels supplied 2 lemma 3 using routing subfunction r 1 cycle created channel dependencies one virtual network combined channel dependencies virtual network interdependency cycle proof virtual channels involved direct indirect dependencies supplied r 1 since r 1 defines different virtual networks messages headed north south directions direct indirect dependencies within virtual network however dependency virtual channels two different networks created cross dependencies using r 1 virtual channels assigned restricted destinations x dimension example gammax virtual channels v n2 cannot assigned using route south bound message assigned north bound message intercross dependencies 2 v n2 v n1 gammax virtual channels v n2 gammay gammax virtual channels v n1 similarly intercross dependencies v n1 v n2 x virtual channels v n1 x virtual channels v n2 dependencies shown figure 5 possible way forming cycle channel dependencies sequence gammax v n2 gammay v n1 x v n1 v n2 gammax v n2 dependency gammay v n1 x v n1 using pf restrictions similarly dependency v n2 gammax v n2 using nf restrictions hence interdependency cycle extended channel dependency graph 2 x vc vn2 cross dependency cross dependency vc vn2 x vc vn1 vc vn1 figure 5 possible cycle formed virtual networks theorem 2 pfnf routing algorithm deadlock free proof lemma 1 3 using theorem 1 pfnf routing algorithm deadlock next compare region adaptivity four algorithms discussed earlier algorithms use one additional virtual channel per physical channel consider whole network consisting two separate virtual networks region adaptivity virtual network isare quadrants full adaptivity offered algorithm particular network region adaptivity actual network obtained superimposing adaptive regions two virtual network adaptive regions 2 intercross dependencies include direct cross dependencies indirect cross dependencies connect channels different virtual networks virtual network total region adaptivity four algorithms shown figure 6 intensity shaded areas represent adaptivity regions network explained section 2 note figure 6d combination deterministic algorithms second fourth quadrants two virtual networks give full adaptivity actual physical network example second quadrant pf virtual network allows yx routing nf virtual network allows xy routing thus providing full adaptivity figure demonstrate comparison adaptive regions algorithms symmetry adaptive regions also illustrated inferred figure 6 since region adaptivity pfnf algorithm symmetric adaptive would perform better algorithms physical network virutal network virtual network ii deterministic fully adaptive fully adaptive partially adaptive 3p algorithm b mesh route algorithm physical network fully adaptive west first positive first negative first pfnf algorithm c opty algorithm virutal network virtual network ii figure region adaptivity 3p bmesh route c opty pfnf algorithms performance evaluation section present results various traffic patterns network loads compared performance pfnf algorithm 3p mesh route opt algorithms algorithms shown literature better performance adaptivity existing adaptive routing algorithms developed event driven simulator evaluate performance aforementioned routing algorithms results reproduced several times observed consistent maximum deviation 1 simulations conducted 16 theta 16 mesh assumed 20 flits per packet virtual channel assumed one flit buffer associated packet generation rate assumed exponential distribution interarrival time used multiplexturn biased selection policy algorithms simulation carried 150000 packets effect first 40000 60000 delivered packets included results order reduce transient effects simulations uniform hotspot transpose traffic patterns considered study uniform traffic pattern node sends messages every node equal probability hotspot traffic one particular node receives additional traffic besides normal traffic using parameters 11 considered one hotspot node hotspot percentage four ie 16 theta 16 mesh message directed hotspot node probability 00438 nodes probability 00038 chosen node 5 5 hotspot node transpose traffic message node j directed node j 6 j sends messages node k gamma k network radix studied average communication latency average throughput network network load distribution network communication latency defined average time message generation time tail reaches destination throughput average number messages finish routing per unit time network traffic distribution measured finding average flit buffer utilization node parameters studied network traffic network traffic defined ratio average traffic generated node average bandwidth available per node figures 7a 7b plot average latency average throughput network network traffic uniform traffic pattern low traffic region four algorithms result almost average latency however traffic increased opty mesh route saturate first latencies increase rapidly pfnf algorithm performs better schemes trend also observed throughput results algorithms give throughput lower traffic rates 03 however higher traffic throughputs opty mesh route algorithms drop abruptly throughput using 3p pfnf schemes drop abruptly instead saturate close maximum values opty mesh route algorithms less routing restrictions 3p routing however create uneven traffic distribution network fact 3p shows higher performance compared opty mesh route confirms claim system performance depends significantly upon evenly traffic distributed pfnf algorithm highly adaptive also distributes network load symmetrically hence demonstrates better performance demonstrate pfnf algorithm indeed distributes network load symmetrically plotted traffic distribution pfnf algorithm figure 8 results accordance expected region adaptivity analysis clearly illustrate network traffic latency unit time uniform traffic routing meshroute scheme opty routing x pfnf routing routing meshroute scheme opty routing x pfnf routing network traffic system throughput uniform traffic b figure 7 performance results uniform traffic pattern dimension average buffer utilization figure 8 traffic load distribution produced pfnf algorithm traffic distribution balanced using pfnf algorithm mesh route refer figure 3 b figure 9 shows latency throughput results hotspot traffic pattern opty mesh route algorithm perform poorly saturate early pfnf algorithm outperforms three schemes latency throughput results trend observed transpose traffic pattern shown figure 10 noted opty algorithm uses total six virtual channels per router compared eight used three algorithms 2dimensional mesh providing resources opty enhance performance becomes almost equal 3p algorithm 17 network traffic latency unit time hotspot traffic routing meshroute opty routing x pfnf routing routing opty routing x pfnf routing network traffic system throughput hotspot traffic b figure 9 performance results hotspot traffic pattern latency unit time transpose traffic routing meshroute scheme opty routing x pfnf routing routing meshroute scheme opty routing x pfnf routing network traffic system throughput transpose traffic b figure 10 performance results transpose traffic pattern 6 conclusions paper analyzed adaptive routing 2d meshes light two new concepts region adaptivity balanced traffic distribution previously proposed fully adaptive algorithms aimed improving adaptivity routing schemes demonstrated simulations symmetric balanced traffic distribution significant impact system performance along higher adaptiveness motivated observation proposed new adaptive routing algorithm called twodimensional meshes algorithm uses combination positivefirst negative first routing balance traffic distribution network simulation results show proposed scheme performs better previous schemes terms average network latency throughput current work focussed designing faulttolerant pfnf routing algorithm extending algorithm ndimensional meshes 17 r survey wormhole routing techniques direct network adaptive routing meshconnected networks turn model adaptive routing class partially adaptive routing algorithms ndimensional meshes planar adaptive routing lowcost adaptive networks multiprocessors adaptive fault tolerant wormhole routing strategy kary n cubes new theory deadlockfree adaptive routing wormhole network adaptive deadlockfree routing multicomputers using one extra channel efficient fully adaptive wormhole routing ndimensional meshes optimally fully adaptive minimal wormhole routing meshes comparison adaptive wormhole routing algorithms virtual channel flow control performance analysis kary ncube interconnection networks routing multiprocessor interconnection networks deadlockfree adaptive routing multicomputer networks using virtual channels necessary sufficient condition deadlockfree adaptive routing wormhole networks wormhole routing algorithms mesh interconnection networks tr ctr chingchin han kang g shin sang kyun yun load balancing multicomputerdistributed systems equipped circuit cutthrough switching capability ieee transactions computers v49 n9 p947957 september 2000 pojen chuang jueitang chen yuetsuen jiang balancing buffer utilization meshes using restricted area concept ieee transactions parallel distributed systems v13 n8 p814827 august 2002 geming chiu oddeven turn model adaptive routing ieee transactions parallel distributed systems v11 n7 p729738 july 2000 loren schwiebert renelius bell performance tuning adaptive wormhole routing selection function choice journal parallel distributed computing v62 n7 p11211141 july 2002 slavko gajin zoran jovanovi explanation performance degradation turn model journal supercomputing v37 n3 p271295 september 2006 daeho seo akif ali wontaek lim nauman rafique mithuna thottethodi nearoptimal worstcase throughput routing twodimensional mesh networks acm sigarch computer architecture news v33 n2 p432443 may 2005 prasant mohapatra wormhole routing techniques directly connected multicomputer systems acm computing surveys csur v30 n3 p374410 sept 1998