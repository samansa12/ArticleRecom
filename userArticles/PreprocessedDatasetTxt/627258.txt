cycletime properties timed token medium access control protocol abstractwe investigate timing properties timed token protocol necessary guarantee synchronous message deadlines tighter upper bound elapse time tokens lth arrival node lvth arrival node k found formal proof generalized bound presented b introduction distributed system hard realtime applications communication message exchange tasks residing different nodes must happen bounded time order guarantee endtoend deadline requirements met motivates use medium access control mac communication protocols suitable hard realtime communications provide guaranteed connection guaranteed amount channel bandwidth support timely delivery intertask messages special timing property bounded time number consecutive visits token node necessary realtime communication timed token protocol becomes one suitable attractive candidates hard realtime applications timed token protocol incorporated many network standards including fiber distributed data interface ieee 8024 highspeed data bus hsdb highspeed ring bus hsrb survivable adaptable fiber optic enbedded networks safenet used backbone networks many embedded realtime applications 1 important concept timed token protocol first proposed grow 2 framework basic idea timed token protocol adaptable either physical logical ring described ulm 3 studied protocol proposed grow performance characteristics timing properties timed token protocol first formally analyzed johnson sevcik 4 5 shown average token rotation time bounded target token rotation time ttrt maximum token rotation time cannot exceed twice ttrt chen et al 1 6 7 8 made detailed study timing behavior timed token protocol generalized upper bound derived johnson sevcik maximum token rotation time extended upper bound time possibly elapsed two successive tokens arrivals node ie maximum token rotation time v v positive integer less two successive tokens arrivals node general result important studies realtime communications network timed token protocol employed already used extensively many researchers 1 8 9 10 11 12 13 14 15 16 studying analyzing various kinds synchronous bandwidth allocation sba schemes unfortunately general upper bound derived chen et al although important may keep tight v grows large enough consequently sba schemes previously developed analyzed based upon general upper bound may satisfactory han et al 17 also derived generalized johnson sevciks result makes previous results johnson sevcik chen et al become special cases result given han et al almost nature tighter first derived chen et al upper bound number successive token arrivals particular node ring zhang burns 18 19 investigated inherent timing properties timed token protocol found result upper bound derived chen et al replaced tighter one generalized upper bound expression complex either derived chen et al han et al may produce tighter upper bound number successive token rotations becomes large noticed exploring inherent cycletime properties timed token mac protocol particularly important research hard realtime communication timed token ring network example tighter upper bound time possibly elapsed worst case given number successive tokens arrivals particular node lead derivation tighter larger lower bound minimum available time used node transmission realtime messages given length time turn brings better chance ie larger possibility realtime messages transmitted deadlines also generalized upper bound elapse time number successive token visits two nodes say source node destination node helps guarantee endtoend deadlines timeconstrained messages transmitted two network nodes report derivation generalized result cycletime properties timed token protocol presented specifically upper bound elapse time tokens l th arrival node tokens l th arrival node k v nonnegative integer derived derived new result generalizes previous findings cycletime properties better previously published result sense general andor tighter rest report organized follows section 2 description network model given timed token protocol briefly introduced section 3 previous results related protocol timing properties formally described section 4 section 5 concise formal proof new generalized result cycletime properties presented section 6 shown generalized result generalizes previous findings cycletime properties better existing results example given section 7 show importance generalized cycletime property hard realtime communication timed token protocol finally report concludes section 8 network model network assumed consist n nodes connected form logical ring free hardware software failures special bit pattern called token grants permissionright holder transmit among contending nodes rotates around ring predetermined order message transmission controlled timed token protocol node holding token transmits frames long protocol allows passes token downstream neighbor 1 let denote maximum portion time unavailable message transmission tokens arrival node tokens immediately subsequent arrival node downstream neighbor ie node 1 represents sum various overheads possibly incurred abovementioned time interval node downstream neighbor includes node bit delay node latency buffer delay media propagation delay various protocol dependent overheads 2 maximum fraction time unavailable message transmission one complete token rotation denoted expressed sum total portions time every two neighboring nodes ie 1 downstream neighbor node node similarly upstream neighbor node node various overheads possibly involved identified johnson sevcik 4 5 example protocol dependent overheads include token capture delay token transmission delay etc 3 timed token mac protocol basic ideas timed token protocol first presented grow 2 protocol 20 messages distinguished two types synchronous asynchronous synchronous messages voice video traffic periodic messages come system regular intervals delivery time constraints asynchronous messages nonperiodic messages time constraints network initialization time nodes negotiate common value ttrt important protocol parameter gives expected token rotation time since node different synchronous transmission requirements satisfied ttrt chosen small enough meet responsiveness requirements nodes ie negotiated value ttrt fast enough satisfy stringent response time requirements nodes node assigned fraction ttrt known synchronous bandwidth denoted h node maximum amount time node allowed transmit synchronous messages every time receives token 1 8 whenever node receives token first transmits synchronous messages time period allocated synchronous bandwidth asynchronous messages sent token rotated sufficiently fast arrives earlier expected since tokens last arrival node synchronous traffic assigned guaranteed bandwidth leftover bandwidth unallocated unused dynamically shared among nodes asynchronous traffic node two timers one counter ffl token rotation timer node trt timer initialized ttrt always enabled trt counts either expires ie trt token received early ie earlier expected since tokens last arrival node either situation trt reinitialized ttrt enabled starting counting process ffl late counter node lc counter initialized zero used record number times trt expired since token last arrived node lc incremented time trt expires reset zero whenever node receives token token said arrive early node lc zero token arrives node otherwise lc one token considered late 3 ffl token holding timer node tht timer set current value trt tokens arrival node token arrives early timer also counts enabled asynchronous transmission order control amount time node transmit asynchronous messages token arrives early node current value trt placed tht trt reset ttrt synchronous frames transmitted time exceed allocated synchronous bandwidth h node may transmit asynchronous frames tht trt expires ie long tht trt greater zero hand token late arrival node ie lc 1 lc reset zero case node still permitted synchronous frames time h asynchronous frames allowed transmit refer 2 20 21 22 detailed description timed token protocol due inevitable overheads involved total bandwidth available synchronous message transmission one complete traversal token around ring less actual token rotation time forms part token rotation time unavailable message transmission synchronous transmission guaranteed bandwidth allocated precedes asynchronous transmission clear protocol constraint allocation synchronous bandwidth sum total synchronous bandwidths allocated nodes ring exceed available portion expected token rotation time ie ttrt protocol constraint 1 assumed hold rest report 3 exact token considered early includes case token arrives time since token could arrive node exactly token rotation timer expires first time conveniencesimplicity presentation late used instead early situation token arrives lc asynchronous transmission allowed timing properties section formal statement brief review previous relevant work protocol timing property given particular previous related results presented cycletime properties timed token protocol derived respectively johnson sevcik 4 5 chen et al 1 6 han et al 17 zhang burns 19 following notations needed formal description related results ci time token makes c th arrival node l time token makes l th departure node ie time node finishes transmission synchronous andor asynchronous messages tokens l th visit node starts transmission token downstream neighbor 17 c time difference reference time point b l time token departs node c th time b l 17 2 theorem 1 johnson sevciks theorem 4 5 positive integer l node 1 n protocol constraint 1 theorem first formally proved johnson sevcik 4 5 theorem shows wellknown fact maximum time could possibly elapse two successive token arrivals node bounded 2 delta ttrt result used obtain lower bound minimum number token visits node within given time interval unfortunately lower bound tight time interval longer 3 delta ttrt 1 chen et al 6 made detailed study timing behavior timed token protocol result extended previous result johnson sevcik bounded token rotation time general one particular generalized analysis johnson sevcik give upper bound time possibly elapsed v v positive integer less two consecutive tokens arrivals particular node previous result johnson sevcik becomes special case 2 generalized theorem restated follows theorem 2 generalised johnson sevciks theorem chen et al 1 6 integer l node 1 n protocol constraint 1 general result important extensively used many researchers 1 8 9 10 11 12 13 14 15 16 studies sba schemes however generalized upper bound time possibly elapsed worst case successive token arrivals particular node may tight v absolutely true obtain protocolparameterbased upper bound ie upper bound function protocol parameters keep tight even v n 2 zhang burns19 enhanced previous work chen et al derived another generalized upper bound expression shown theorem 3 better either upper bound expressions first given chen et al later derived han et al sense expression may produce tighter upper bound v grows large tighter upper bound used derive better lower bound available transmission time given time interval 19 theorem 3 generalised johnson sevciks theorem zhang burns 19 integer l node 1 n protocol constraint 1 al 17 also studied cycletime properties timed token mac protocol consequently derived generalized upper bound elapse time tokens l th departure node b tokens l th departure node makes previous results johnson sevcik 4 5 chen et al 1 6 become special cases result elapse time given number successive token arrivals particular node generalized upper bound almost tighter first derived chen et al although different form derived upper bound expressions following theorem shows generalized upper bound expression theorem 4 generalised johnson sevciks theorem han et al 17 timedtoken mac protocol protocol constraint 1 l 1 c 1 subject definition shown f proof generalized result found 17 shown previous results johnson sevcik chen et al become special cases result although upper bound expression derived han et al general may produce upper bound tight produced using upper bound expression given zhang burns shown theorem 3 elapse time successive token arrivals particular node due fact upperbound first derived chen et al time elapsed certain number successive token rotations report generalized result cycletime properties timed token mac protocol derived generalized result better previously published ie theorems 1 2 3 4 sense upper bound expression derived report general andor tighter new generalized result shown following theorem whose formal proof presented next section theorem 5 generalised johnson sevciks theorem integers l v l nodes k 1 n 1 k n protocol constraint 1 delta n subject definition 4 shown e f f formally proving theorem 5 need define terms show lemma given following subsection 51 preliminaries definitions terms used later summarized table 1 convenience easy comparison easy understanding similar studies notations adopted chen et al 6 sevcik johnson 5 proofs related timing properties retained quoted notes notations given token visits nodes indexed pair subscripts say c c indicate respectively token cycle node visited visit c denotes tokens c th visit node following natural ordering frequently used proofs later visit c followed visit c visit subscript pair c used denote visit c taken c gamma 1 n similarly taken c 1 1 pairs index visits also used summations instance sum total quantity q visits starting tokens j th visit node k ending tokens w th visit node z 4 note definition theorem 5 exactly defined han et al 17 theorem 4 table 1 glossary terms n number nodes ring ttrt target token rotation time synchronous bandwidth allocated node maximum amount time unavailable message transmission tokens arrival node tokens immediately subsequent arrival node downstream neighbor ie node i1 ie maximum amount time unavailable message transmission ie tightest upper bound sum total various overheads possibly involved one complete token rotation subscripts used index tokens visit nodes c indicating token cycle indicating node visited c indexes tokens c th visit node h ci time spent transmitting synchronous messages tokens c th visit node ci time spent transmitting asynchronous messages tokens c th visit node 0 ci ttrt gamma ci overheads involved unavailable message transmission tokens c th arrival node tokens immediately subsequent arrival node downstream neighbor ie node i1 ci duration tokens c th visit node ie sum h ci ci ci ci time spent one complete token rotation ending tokens c th visit node ie b ci time token makes c th arrival node expressed follows wz ffl signs used link two visits x means visit x visit c ie means visit x earlier visit c case also say visit x visit c x c means visit x later visit c ie either x similarly x c means visit x later visit c x c means visit x earlier visit c ffl let h ci ci respectively represent times spent transmitting synchronous asynchronous traffic token c th visit node let ci denote various overheads possibly involved unavailable message transmission tokens c th arrival node immediately subsequent arrival node downstream neighbor ie c th arrival node 1 duration tokens c th visit node denoted v ci expressed sum h ci ci ci ie let b ci length complete token rotation ending c th visit node ci note according timed token mac protocol described section 3 node transmit synchronous messages time interval assigned synchronous bandwidth h transmit asynchronous messages amount time token arrived early c 1 1 n ci max0 protocol node allowed keep holding token ttrt units time ci combining 5 6 one get ci min f nodes messages either synchronous asynchronous send immediately preceding token rotation ending visit maximum bandwidth possibly available transmit asynchronous mes sages according 5 bounded ttrt gamma ffl similar definition shown theorem 5 represents sum allocated synchronous bandwidths less n successive nodes define sum various overheads incurred less n successive token visits nodes follows f following lemma needed proof theorem 5 lemma 1 token early visit c ie early c th arrival node ci proof since token arrives node early visit c suppose token makes c th arrival node earlier expected ffi according timed token protocol 7 obtain ci minf thus get ci 52 proof theorem 5 theorem 5 generalised johnson sevciks theorem integers l v l nodes k 1 n 1 k n protocol constraint 1 delta n calculated according definition shown e f integers mod n represents modulo n operation f proof time interval exactly corresponds visits l inclusive l v k exclusive two cases consider 1 token late visits visit l inclusive visit l token late every visit asynchronous transmission thus time elapsed complete token rotation bounded since totally v inclusive visit l v k exclusive ie time li time lvk token rotation consists n successive visits number complete token rotations incurred interval given remaining visits starts node ends node k gamma 1 bounded calculated according definition shown theorem 5 based analysis xy hand generalized upperbound given theorem 5 get following derivations delta n delta n delta n protocol constraint 1 clearly theorem 5 follows case inequalities 11 12 2 least one early visit visit l inclusive visit l early visits visit l inclusive visit l exclusive subject following conditions 1 b last early visit visit l c visit last early visit visit p following observations made definitions see 1 visit exclusive visit inclusive least n1 successive visits easy check totally v inclusive visit l exclusive therefore maximum possible number bounded b know visit visit exists late visit visit x late visit thus asynchronous message transmission allowed visit x v xypm q m1 xypm q m1 c similar b c know visit visit l visit p exclusive exists late visit thus l xyps q s1 xyps q s1 definitions see early visits visit l visit inclusive hence asynchronous messages allowed transmit visits exist e lemma 1 see whenever early visit time possibly elapsed n visits ending early visit bounded ttrt plus synchronous bandwidth used amount various overheads incurred early visit convenience proof upper bound elapse time n successive visits easily formed supposing time elapsed first n successive visits form one complete token rotation upper bounded ttrt synchronous transmission n th visit note supposed equivalent situation scenario therefore may match happens reality mostly leads upperbound theoretically derived help simplify proof help follow derivations presented later stressed interested obtaining upper bound elapse time n visits ending early visit one upper bound obtained using ttrt instead first n successive visits ie one complete token rotation plus synchronous bandwidth consumed overhead incurred n th early visit note replacing removing n successive visits break neighboring relationship nodes n successive visits make one complete token rotation node corresponding visit immediately visits node corresponding visit immediately n visits neighbor latter immediately subsequent node former although two corresponding visits onetokenrotation apart realizing important understanding well later derivations particular according analysis definitions ac see early visit node corresponding visit node corresponding visit p q ie node q neighbor since node q immediately subsequent node node q gamma 1 removed n visits replaced ttrt visits based upon far visit 1 visit l several different cases considered later derivations following analysis helps follow derivations different cases case n successive token visits connected early visits subject definitions ac ie totally theta n1 visits fall within visits l inclusive l exclusive according e see one early visit one replacement n successive visits ie one rotation ttrt final derived upper bound elapse time visit l inclusive visit l exclusive case include delta ttrt since early visit p q causes removal n visits ie one rotation replaced ttrt total number remaining visits total number visits minus number removed visits ie vn seeking upper bound remaining visits consider transmission synchronous messages remaining visits visits either late visit x x 6 assumedsupposed imaginary equivalent scenario synchronous transmission considered accounted n th visit n visits ending early visit ie visit analyzed e convenience proof x unbroken feature neighboring relationship nodes whenever removal n successive nodes happens analyzed e remaining visits treated q imaginary equivalent token rotations r remaining visits 0 r n v thus elapse time q equivalent token rotations either first last q visits remaining visits bounded synchronous transmission happens transmission synchronous messages accounted visits indicated e synchronous bandwidth actually used visit never exceeds allocated amount clearly bound given 17 also part final derived upperbound expression r remaining visits unbroken feature neighboring relationship nodes easy check elapse time r remaining visits bounded also appear final expression case simplify derivations proof n inclusive l divided following two groups group 1 visits group 2 visits l discuss upperbounds visits two groups respectively visits group 1 exactly analysis adopted since totally gamma 1 early visits ie p related n successive visits fall visits group 1 final upperbound expression group 1 include totally l visits group 1 among visits mgamma1 delta n visits replaced mgamma1 delta ttrt number remaining visits calculate q number imaginary equivalent rotations remaining visits r follows ng gamma l similarly time possibly elapsed q equivalent rotations ie q delta n visits upper bounded l delta n r remaining visits never exceed also two bounds together appear final upper bound expression group 1 visits group 2 lemma 1 easily find upper bound elapse time p visits group inclusive follows notice visit l becomes visit group 2 according timedtoken mac protocol see bandwidth consumed single visit say visit x transmission synchronous andor asynchronous messages never exceed ttrt 7 xy ttrt gamma h xy time elapsed visit l bounded ttrt therefore trt definitions ac observations af formally derive upper bound given theorem 5 follows xypm q m1 xypm q m1 14 15 observations b c since 15 observation c xypm q m1 observation e observation f l gamma observation f xy delta n 13 observation fact upper bound increasing function proof process see derived upper bound independent actual synchronous bandwidth used node long protocol constraint 1 holds bound still works even h x realizing fact important realtime communication timed token protocol generalized upperbound expression given theorem 5 useful determining worstcase delivery time realtime message ie arrival source node till arrival destination node therefore helpful guaranteeing endto end applicationtoapplication deadline constraints say synchronous message produced application source node sent another application running destination node k 6 comparison previous results section shall show generalized result given theorem 5 generalizes previous findings cycletime properties timed token mac protocol upper bound derived report general andor tighter existing results upper bounds shown theorems 14 achieve effective comparison related results shall compare generalized upper bound expression derived zhang burns see theorem case successive token arrivals particular node derived han et al see theorem 4 generalized case number successive visits two network nodes approach taken 18 19 zhang burns demonstrated previous findings johnson sevcik see theorem 1 becomes special case generalized result generalized upper bound tighter derived chen et al see theorem 2 number consecutive token rotations grows large enough 17 han et al shown result generalizes previous results johnson sevcik chen et al 1 comparing theorem 5 theorem 3 easy show theorem 5 becomes theorem 3 theorem 5 get following derivations delta n since v deltan c result shown theorem 3 restated exactly form upper bound expression theorem 3 assumed v 2 2 comparing theorem 5 theorem 4 following lemma needed comparison theorems 4 5 lemma 2 two visits l l v integers subject l 1 v 0 k two nodes 1 n get 0 consider following two cases case 1 since case 1 k n case lemma 2 follows following facts case 2 since case 1 case clearly lemma 2 also follows case 2 show generalized upper bound given theorem 5 tighter derived han et al given theorem 4 relax generalized upper bound theorem follows delta n 18 lemma 2 shown even relaxed upper bound given 20 still tighter derived han et al enable comparison need represent exactly according definition delta bi l c given han et al 17 using notation ci defined report simplicity let delay departure token node immediate arrival downstream neighbor node ie node 1 21 definition delta bi l c see 2 section 4 following conversions converted equivalent result relaxed upper bound 20 go obtain upper bound delta bi l c follows b b b b b 20 c c c using defined theorem 5 hand according theorem 4 comparing upper bound obtained theorem 4 case corresponding cases obtained relaxed upper bound 20 see clearly theorem 5 produce tighter upper bound delta bi l c given theorem 4 7 example section simple example given show importance new generalized cycletime property distributed realtime applications consider network supports timed token protocol three nodes numbered 123 assume node n periodicsynchronous message stream characterized period p maximum transmission time c relative deadline messages stream arrive regular intervals period p deadlines must received destination node ie message source node arrives time must completely received destination node k k 6 assume token circulates around ring node 1 nodes 2 3 back node 1 repeat order messages source nodes sent respectively destination nodes 3 3 1 parameters synchronous messages three message streams together synchronous bandwidth h allocated node network listed table 2 simplify calculation also assume table 2 message network parameters clearly given allocation synchronous bandwidths satisfies protocol constraint 1 since shall check given setting network parameters ie h 1 h 2 h 3 ttrt ensure synchronous messages arrive destination nodes deadlines respectively using new generalized cycletime property theorem 5 previously derived han et al theorem 4 clear message deadlines guaranteed judged theorem 5 wrongly judged theorem 4 failing guaranteed reason worstcase message response time message source node reach destination node k defined longest possible time instant message available transmission source node till instant whole message arrives destination node k denoted ri k could much different calculated theorems 4 5 respectively value ri calculated theorem 5 could much shorter obtained theorem 4 v time difference reference time point li tokens l th arrival node time token arrives node k v th time li assume synchronous message comes transmitting buffer node immediately time li time li synchronous message waiting sent transmitting buffer node thus transmission right token either internally passed asynchronous transmission node token early visit l asynchronous traffic waiting sent externally forwarded subsequent node ie node 1 moment transmission right token internally passed externally forwarded message arrives becomes ready transmission actually worst case situation transmission message message misses first chance transmitted visit l c units time needed transmission whole message node use h time units transmitting synchronous messages whenever receives token total dc h e times token arrivals expected order finish transmission whole message divided dc h e frames transmitted separately token arrivals since message misses first chance time li worst case estimate ri k calculating time difference li tokens dc h e1 th arrival destination node k token appended transmitted andor forwarded messages according timed token mac protocol follows c facilitate calculation ri theorems 4 5 convert li v exactly according definition following equivalent forms use theorem 5 23 use theorem 22 23 24 message network parameters shown table 2 calculate r1 3 according theorems 4 5 respectively follows ffl based upon theorem 4 c1 theorem thus ie time possibly elapsed worst case last frame whole message reaches destination node k larger required deadline message deadline stream judged theorem 4 however shown next case ffl based upon theorem 5 c1 b e e theorem 5 150 thus message deadline stream 1 guaranteed judged theorem 5 similar calculation r1 calculate r2 3 r3 1 otain following results interested readers check ffl based theorem 4 r2 ffl based theorem 5 r2 analysis see message deadlines misjudged failing guaranteed every synchronous message stream examined based upon theorem 4 although fact synchronous messages miss deadlines judged theorem 5 ri calculated theorem 5 could much shorter calculated theorem 4 using new generalized result theorem 5 instead previous one theorem substantially increase chance synchronous message deadlines guaranteed 8 conclusion key success using distributed system realtime application timely execution computational tasks usually reside different nodes communicate one another accomplish common goal endtoend deadline guarantees impossible without communication network supports timely delivery intertask messages timed token ring networks fddi suitable distributed realtime application due inherent timing property bounded elapse time number successive token rotations report concise formal proof generalized result cycletime properties timed token mac protocol presented first time particular upper bound elapse time tokens l th arrival node till tokens l th arrival node k v nonnegative integer derived generalized upper bound expression particularly important studies realtime communications timed token ring network better previous related findings cycletime properties due fact general may produce tighter upper bound r guaranteeing synchronous message deadlines timed token medium access control protocol timed token protocol local area networks timed token ring local area network performance characteristics proof timing requirements fddi token ring protocol satisfied cycle time properties fddi token ring protocol properties timed token protocol guaranteeing synchronous message deadlines timed token protocol optimal synchronous capacity allocation hard realtime communications timed token protocol local synchronous capacity allocation schemes guaranteeing message deadlines timed token protocol selection timed token parameters guarantee message deadlines deferring realtime traffic improved nonrealtime communication fddi networks performance evaluation bandwidth allocation scheme guaranteeing synchronous messages arbitrary deadlines fddi net work transmitting timedependent multimedia data fddi net works guaranteeing synchronous messages arbitrary deadline constraints fddi network timedtoken protocol realtime communications synchronous bandwidth allocation fddi networks nonexistence optimal local synchronous bandwidth allocation schemes timing properties timed token protocol optimal synchronous bandwidth allocation scheme guaranteeing synchronous message deadlines timedtoken mac protocol fibre distributed data interface ring media access control mac fddi handbook highspeed networking using fiber media tr ctr sijing zhang alan burns jing chen e stewart lee hard realtime communication timed token protocol current state challenging problems realtime systems v27 n3 p271295 september 2004