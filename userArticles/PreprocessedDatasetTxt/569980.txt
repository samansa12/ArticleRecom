theoretical framework convex regularizers pdebased computation image motion many differential methods recovery optic flow field image sequence expressed terms variational problem optic flow minimizes energy typically energy functionals consist two terms data term requires eg brightness constancy assumption holds regularizer encourages global piecewise smoothness flow field paper present systematic classification rotation invariant convex regularizers exploring connection diffusion filters multichannel images taxonomy provides unifying framework datadriven flowdriven isotropic anisotropic well spatial spatiotemporal regularizers techniques classic methods literature others derived first time prove methods wellposed posses unique solution depends continuous way initial data interesting structural relation isotropic anisotropic flowdriven regularizers identified design criterion proposed constructing anisotropic flowdriven regularizers simple direct way isotropic ones use illustrated several examples b introduction even two decades intensive research robust motion estimation continues key problem computer vision motion linked notion optic ow displacement eld corresponding pixels subsequent frames image sequence optic ow provides information important many applications ranging estimation motion parameters robot navigation design second generation video coding algorithms surveys stateoftheart motion computation found papers mitiche bouthemy 32 stiller konrad 50 performance evaluation popular algorithms refer barron et al 5 galvin et al 20 bertero et al 6 pointed depending formulation optic ow calculations may illconditioned even illposed therefore common use implicit explicit smoothing steps order stabilize regularize process implicit smoothing steps appear instance robust calculation image derivatives one usually applies amount spatial temporal smoothing averaging several frames rare steps described algorithmic details indeed often crucial quality algorithm thus would consequent make role smoothing explicit incorporating already continuous problem formulation way pioneered horn schunck 25 improved nagel 34 many others approaches type calculate optic ow minimizer energy functional consists data term smoothness term formulations terms energy functionals allow conceptually clear formalism without hidden model assumptions several evaluations shown methods perform well 5 20 data term energy functional involves optic ow constraints assumption corresponding pixels dierent frames reveal grey value smoothness term usually requires optic ow eld vary smoothly space 25 term may modied imagedriven way order suppress smoothing across image boundaries 1 34 alternative owdriven modications proposed reduce smoothing across ow discontinuities 8 12 14 29 40 43 54 smoothness terms require spatial smoothness spatiotemporal smoothness terms considered much smaller extent 7 33 36 56 since smoothness terms information regions reliable ow estimates exist regions estimates possible create dense ow elds many applications desirable quality distinguishes regularization methods optic ow algorithms latter ones create nondense ow elds postprocessed interpolation 100 density required modeling optic ow recovery problem terms continuous energy functionals oers advantage formulation independent pixel grid possible correct continuous model rotation invariant use wellestablished numerical methods shows rotation invariance approximated mathematically consistent way theoretical practical point view attractive use energy functionals convex unique minimum global minimum found stable way using standard techniques convex optimization instance gradient descent methods unique minimum allows use globally convergent algorithms every arbitrary ow initialization leads solu tion global minimum functional property important quality robust algorithm nonconvex energy functionals hand may many local minima dicult nd algorithms ecient converge global minimum typical algorithms converge global minimum simulated annealing 30 computationally expensive methods ecient graduated nonconvexity algorithms 9 may get trapped local minimum minimizing continuous energy functionals leads natural way partial dierential equations pdes applying gradient descent instance yields system coupled diusionreactions equations two ow components fastly emerging use pdebased image restoration methods 22 39 nonlinear diusion ltering total variation denoising motivated many researchers apply similar ideas estimate optic ow 1 4 12 14 24 29 38 40 43 54 systematic framework links diusion optic ow paradigms however studied far furthermore framework diusion ltering also wellknown anisotropic lters diusion tensor degrees freedom isotropic ones scalarvalued diusivities additional degrees freedom used obtain better results specic situations 53 however similar nonlinear anisotropic regularizers considered optic ow literature far goal present paper address issues present theoretical framework broad class regularization methods optic ow estimation reasons explained focus models allow formulation terms convex rotation invariant continuous energy functionals consider imagedriven owdriven models isotropic anisotropic ones well models spatial spatiotemporal smoothing terms prove approaches wellposed sense hadamard unique solution depends continuous therefore predictable way input data shall see taxonomy includes many existing models also interesting novel ones particular derive novel regularization functionals optic ow estimation owdriven anisotropic optic ow analogues anisotropic diusion lters diusion tensor many spatiotemporal methods proposed well increased computational possibilities modern computers likely become important future present paper also focus interesting relations isotropic anisotropic owdriven methods allow us formulate general design principle explains one create anisotropic optic ow regularizers isotropic ones paper organized follows section 2 rst review classify existing imagedriven isotropic owdriven models derive novel energy functional leading anisotropic ow driven models show one modify models spatial smoothness term order obtain methods spatiotemporal regularization unifying energy functional derived incorporates previous models well novel ones wellposedness established section 3 section 4 take advantage structural similarities isotropic anisotropic approaches order formulate design principle anisotropic optic ow regularizers paper concluded summary section 5 framework convex regularizers 21 spatial regularizers 211 basic structure order formalize optic ow estimation problem let us consider realvalued image sequence fx denotes location within image domain time parameter 2 0 species frame optic ow eld describes displacement two subsequent frames depict image detail frequently assumed image objects keep grey value time 0 1 model assumes illumination changes appear occlusions disocclusions happen numerous generalizations multiple constraint equations andor dierent conserved quantities replacing intensity exist see eg 18 51 ever since goal present paper study dierent regularizers restrict 1 spatial temporal sampling suciently ne may replace 1 rst order taylor approximation subscripts x denote partial derivatives socalled optic ow constraint forms basis many dierential methods estimating optic ow evidently single equation sucient determine two unknown functions order recover unique ow eld need additional assumption regularizationbased optic ow methods use additional assumption requirement optic ow eld smooth least piecewise smooth basic idea recover optic ow minimizer energy functional type z dx dy 3 r x denotes spatial nabla operator u rst term energy functional data term requiring ofc fullled second term penalizes deviations piecewise smoothness smoothness term called regularizer positive smoothness weight regularization parameter one would expect specic choice regularizer strong uence result therefore let us discuss dierent classes convex regularizers next 212 homogeneous regularization 1981 horn schunck 25 pioneered eld regularization methods optic ow computations used regularizer classic result calculus variations 13 16 mild regularity conditions minimizer z satises necessarily socalled eulerlagrange equations homogeneous neumann boundary conditions hereby n vector normal image boundary applying framework minimization horn schunck functional leads pdes xx denotes laplace operator equations regarded steady state 1 diusionreaction system denotes articial evolution parameter mixed time image sequence equations also arise minimizing horn schunck functional using steepest descent schnorr 41 established wellposedness showing functional unique minimizer depends continuously input data f recently hinterberger 24 proved similar wellposedness results related model dierent data term observe underlying diusion process horn schunck approach linear diusion equation 2 equation wellknown regularizing properties extensively used context gaussian scalespace see 48 references therein smoothes however completely homogeneous way since diusivity consequence also blurs across semantically important ow discontinuities reason horn schunck approach creates rather blurry optic ow elds regularizers described sequel attempts overcome limitation 213 isotropic imagedriven regularization seems plausible motion boundaries subset image boundaries thus simple way prevent smoothing motion boundaries consists introducing weight function horn schunck regularizers becomes small image edges modication yields regularizer g decreasing strictly positive function regularizer proposed theoretically analysed alvarez et al 1 corresponding diusionreaction equations given underlying diusion process uses scalarvalued diusivity g depends image gradient method therefore classied inhomogeneous isotropic imagedriven isotropic refers fact scalarvalued diusivity guarantees directionindependent smoothing behaviour inhomogeneous means behaviour may spacedependent since diusivity depend ow diusion process linear details terminology diusion ltering image processing refer 53 homogeneous regularization arises special case 15 gjrf considered 214 anisotropic imagedriven regularization early anisotropic modication horn schunck functional due nagel 34 see also 2 17 35 37 41 42 47 basic idea reduce smoothing across image boundaries encouraging smoothing along image boundaries achieved considering regularizer drf regularized projection matrix perpendicular rf denotes unit matrix methods leads diusionreaction equations usage diusion tensor drf instead scalarvalued diusivity allows directiondependent smoothing behaviour method therefore classied anisotropic since diusion tensor depends image f unknown ow purely imagedriven process linear diusion part wellposedness model established schnorr 41 eigenvectors v 1 rf v 2 rf corresponding eigenvalues given interior objects ideal edges jrf 1 thus isotropic behaviour within regions image boundaries process smoothes anisotropically along edge behaviour similar edgeenhancing anisotropic diusion ltering 53 contrast edgeenhancing anisotropic diusion however nagels optic ow technique linear interesting note recently pointed nagel method may regarded early predecessor anisotropic diusion ltering 2 homogeneous isotropic imagedriven regularizers special cases 19 drf drf gjrf j 2 chosen 215 isotropic owdriven regularization imagedriven regularization methods may create oversegmentations strongly textured objects case much image boundaries motion boundaries order reduce smoothing motion boundaries one may consider using purely owdriven regularizer however expense refraining quadratic optimization problems earlier work 43 54 authors considered regularizers type dierentiable increasing function convex instance regularizer type 25 lead diusionreaction system 0 denotes derivative respect argument scalarvalued diusivity shows model isotropic owdriven general diusion process nonlinear specic regularizer 26 instance diusivity given since nonlinear diusivity decreasing argument smoothing ow discontinuities inhibited specic choice homogeneous regularization diusivity 0 recovered preceding diusionreaction system uses common diusivity channels avoids edges formed dierent locations channel coupling also appears isotropic nonlinear diusion lters vectorvalued images considered gerig et al 21 whitaker gerig 57 nonlinear owdriven regularizers dierent diusivities channel discussed section 4 216 anisotropic owdriven regularization seen exist isotropic anisotropic imagedriven regularizers well isotropic owdriven ones thus taxonomy would incomplete without discussed anisotropic owdriven regularizers context nonlinear diusion l tering anisotropic models diusion tensor instead scalarvalued diusivity oer advantages images noisy edges interrupted structures 55 one construct related optic ow methods let us rst look diusion ltering multichannel images nonlinear anisotropic case weickert 52 55 kimmel et al 26 proposed lter multichannel image using joint diusion tensor depends gradients image channels goal thus nd optic ow regularizer leads coupled diusionreaction system uxdependent diusion tensor used equation order derive novel class regularizers introduce deni tions rst previous section consider increasing smooth function convex let us assume symmetric n n matrix orthonormal eigenvectors w 1 w n corresponding eigenvalues 1 n may formally extend scalarvalued function z matrixvalued function dening matrix eigenvectors w 1 w n eigenvalues 1 n denition motivated case z represented power series easy see corresponding matrixvalued power series k eigenvectors w 1 w n eigenvalues 1 n another denition useful considerations trace quadratic matrix sum diagonal elements equivalently sum eigenvalues notations consider regularizer argument symmetric positive semidenite 22 matrix hence exist two orthonormal eigenvectors corresponding nonnegative eigenvalues 1 2 eigenvalues specify contrast vectorvalued image directions v 1 v 2 respec tively concept introduced di zenzo edge analysis multichannel images 15 regarded generalization structure tensor 19 related rst fundamental form dierential geometry 28 result states regularizer 32 leads desired nonlinear anisotropic diusionreaction system proposition 1 anisotropic flowdriven regularization energy functional 3 regularizer 32 corresponding steepest descent diusionreaction system given diusion tensor satises proof eulerlagrange equations minimizing energy z dx dy 37 given order simplify evaluation rst second summand equations replace x unit vector x direction together identities tr ab div follows tr tr tr plugging result eulerlagrange equations concludes proof noted general eigenvalues diusion tensor equal therefore real anisotropic diusion process dierent behaviour dierent directions homogeneous regularization special case regularizer 32 interesting similarity isotropic regularizer 25 anisotropic counterpart 32 becomes explicit writing 25 shows sucient exchange role trace operator penalty function switch regularization techniques another structural similarity discussed section 4 22 unifying framework let us make synthesis previously discussed models table 1 gives overview smoothness terms investigated far table 1 classication regularizers optic ow models isotropic anisotropic imagedriven owdriven tr one may regard regularizers special cases two general models using compact notation ru rst model structure model comprises pure imagedriven models regardless whether isotropic drf gjrf j 2 anisotropic isotropic owdriven models arise general case model may imagedriven owdriven second model written comprises anisotropic owdriven case combinations imagedriven approaches note large structural similarities 45 46 models assembled regularizer paramter 2 0 1 determines anisotropy regularizer embedded general optic ow functional z dx dy 48 23 spatiotemporal regularizers regularizers discussed far use spatial smoothness constraints thus would natural impose amount piecewise temporal smoothness well using results previous section straightforward extend smoothness constraint temporal domain instead calculating optic ow minimizer twodimensional integral 48 time frame minimize single threedimensional integral whose solution optic ow frames 2 0 eu z dx dy 49 denotes spatiotemporal nabla operator corresponding diusionreaction systems spatiotemporal energy functionals structure pure spatial ones investigated far dierence spatial nabla operator r replaced spatiotemporal analogue r thus one solve 3d diusionreaction systems instead 2d ones many spatiotemporal regularizers studied literature far best knowledge attempts investigate rotation invariant spatiotemporal models use homogeneous isotropic imagedriven anisotropic owdriven regularizers nagel 36 suggested extension anisotropic imagedriven smoothness con straint diusion tensor 20 replaced dr f 1 eigenvalues given isotropic owdriven spatiotemporal regularizers studied authors 56 showed outperforms corresponding spatial regularizer low additional computing time entire image stack processed appears limited memory previous computer architectures prevented many researchers studying approaches spatiotemporal regularizers since require keep entire image stack computer memory contemporary pcs workstations however longer problem typical stack sizes used eg frames 256 256 pixels thus likely spatiotemporal regularizers become important future 3 wellposedness properties section shall prove energy functionals 48 49 respectively admit unique solution continuously depends initial data favourable properties consequence embedding optic ow constraint 2 convex regularization approach perspective regularization table 1 reveals another useful classication context imagedriven models correspond class quadratic regularizers 6 owdriven models belong general class nonquadratic convex regularizers latter class suggested 11 45 49 generalizing wellknown quadratic regularization approaches cf 6 used early computational vision 31 assumptions following distinguish approaches 48 49 since results hold true arbitrary n furthermore assume function strictly convex respect exist constants c consider matrices drf symmetric positive denite dene space admissible optic ow elds set endowed scalar product z induced norm follows hf ui denotes action linear continuous functional f 2 h ie element dual space h vector eld u 2 h 32 convexity wish show functional eu strictly convex h end may disregard linear constant terms eu consider functional f u dened f u z z c z strict convexity crucial property existence unique global minimizing optical ow eld u eu determined root equation linear functional b 2 h proceed several steps first consider smoothness terms v 1 rf ru v 2 rf ru separately done sum convex functions convex consider terms together functional f u term belongs class smoothness terms considered earlier work isotropic nonlinear diusion multichannel images eg 44 see let vec ru ru 1 denote vector obtained stacking columns ru one upon let denote norm induced scalar product vec ru vec rv rewritten tr ru drfru framework 44 applicable second anisotropic owdriven smoothness term new context optical ow computation note contrast term v 1 function matrixvalued strict convexity v 2 stated proposition 2 matrixvalued convexity strictly convex b two positive semidenite symmetric matrices 6 b 2 0 1 tr proof put symmetric orthonormal systems eigenvectors fu realvalued eigenvalues f g f g f g expanding vectors u respect system fw g gives v obtain v v comparing coecients shows j convex combination f g f g v strictly convex obtain tr v v v concludes convexity proof far shown convexity smoothness term v rf ru 57 show f u strictly convex may use equivalent condition f 0 u strongly monotone 58 note smoothness term fullls condition convex shown concerning remaining rst term 57 cope small technical diculty vector eld u multiplied rf may vanish homogeneous image regions context refer 41 problem dealt 33 existence uniqueness continuous dependence data wellestablished result see eg 58 property 73 together lipschitz continuity operator f 0 holds true mild conditions respect data rf f cf 41 46 ensure existence unique globally minimizing optical vector eld u continuously depends data understand latter property suppose given two image sequences corresponding functionals cf 57 minimizers virtue 73 thus equation states slight change image sequence data corresponding optical ow eld cannot arbitrarily jump gradually changes therefore important robustness property extensions regularizers discussed far motivated existing nonlinear diusion methods multichannel images joint diusivity diusion tensor channels used one might expect way construct useful optic ow regularizers particular exists general design principle anisotropic owdriven regularizers discuss next key observation deriving principle interesting relation anisotropic owdriven regularizers isotropic owdriven ones anisotropic regularizer tr j expressed means eigenvalues 1 2 j isotropic counterpart tr j written observation motivates us formulate following design principle rotationally invariant anisotropic owdriven regularizers design principle rotationally invariant anisotropic regularizers assume given isotropic regularizer function decomposition argument j rotationally invariant expressions regularizer rotationally invariant anisotropic examples 1 decomposion used 78 79 transit isotropic anisotropic model trace identity 1 2 eigenvalues proposed regularizer sh u applying design principle one derive expression identity 27 using regularizer 82 functional 3 leads highly anisotropic diusionreaction system u 2x note coupling equations complicated previous cases joint diusivity joint diusion tensor used aware similar diusion lters multichannel images wellposedness properties experimental results optic ow method presented 43 46 3 requiring j 80 rotationally invariant ensures rotation invariance anisotropic regularizer dispense rotation invariance design principle still used example let us study owdriven regularization methods considered 4 12 14 29 use regularizer type according design principle may regard regularizer anisotropic version isotropic regularizer 25 however decomposition argument rotationally invariant corresponding diusionreaction system given shows systems completely decoupled diusion terms thus ow discontinuities may created dierent locations channel decoupling appears also pdebased optic ow methods 40 two diusion processes isotropic overall process reveals anisotropy general two diusivities identical wellposedness results approach modied data term established aubert et al 4 also number related stochastic methods lead discrete models consistent approximations rotation invariant processes 7 8 10 23 31 33 nonconvex regularizers typically used approaches discrete spatiotemporal versions regularizer 86 investigated 7 33 challenging open question whether exist useful rotation invariant convex regularizers ones discussed one current research topics 5 summary conclusions goal paper derive diusion theory optic ow functionals minimizing optic ow functionals steepest descent leads set two coupled diusion reaction systems since similar equations appear diusion ltering multichannel images question arises whether optic ow analogues various kinds diusion lters saw imagedriven optic ow regularizers correspond linear diusion lters owdriven regularizers create nonlinear diusion processes pure spatial regularizers expressed 2d diusionreaction processes spatiotemporal regularizers may regarded generalizations 3d case taxonomy helped us classify existing methods within unifying framework also identify gaps models available current literature lled gaps deriving suitable methods specied properties proved wellposedness class convex diusionbased optic ow regularization methods one important novelty along lines derivation regularizers related anisotropic diusion lters matrixvalued diusion tensor also enabled us propose design principle anisotropic regularizers discovered interesting structural similarity isotropic anisotropic models sucient exchange role trace operator penalty function order switch two models convinced relations starting point many fruitful interactions theories diusion ltering variational optic ow methods diusion ltering progressed much recent years appears appealing incorporate recent results area optic ow methods conversely clear novel optic ow regularizers also regarded energy functionals suitable diusion lters hope systematic taxonomy provides unifying platform algorithms entire class convex variational optic ow methods future plans use platform detailed performance evaluation dierent methods paper systematic comparison dierent numerical algorithms another point agenda investigation alternative rotationinvariant decompositions applied construct useful anisotropic regularizers acknowledgement cs completed doctoral thesis supervision prof nagel 1991 grateful prof nagel introduced eld computer vision r computational framework algorithm measurement visual motion computing optical ow via variational tech niques performance optical ow techniques robust dynamic motion estimation time robust estimation multiple motions parametric piecewise smooth ow cambridge mass nonlinear variational method optical ow computation methods mathematical physics note gradient multiimage calculus variations investigation multigrid algorithms estimation optical ow computation component image velocity local phase information recovering motion multimodal estimation discontinuous optical ow using markov random generierung eines films zwischen zwei bildern mit hilfe des op tischen flusses images embedded maps minimal surfaces movies invariant properties motion parallax curve evolution approach theory applications computation analysis image motion synopsis current problems methods scene segmentation visual motion using global optimization constraints estimation displacement vector estimation optical ow relations di extending oriented smoothness constraint temporal domain estimation derivatives optical ow investigation smoothness constraints estimation displacement vector variational approach optical ow estimation managing discontinuities determination optical ow discontinuities using nonlinear diusion mathematical foundations smoothness constraints determination optical ow surface reconstruction gaussian scalespace theory discontinuity preserving regularization inverse visual problems estimating motion image sequences robust computation optical ow multiscale dierential framework anisotropic di discontinuitypreserving optic ow nonlinear functional analysis applications tr ctr el mostafa kalmoun harald kstler ulrich rde 3d optical flow computation using parallel variational multigrid scheme application cardiac carm ct motion image vision computing v25 n9 p14821494 september 2007 luis alvarez rachid deriche tho papadopoulo javier snchez symmetrical dense optical flow estimation occlusions detection international journal computer vision v75 n3 p371385 december 2007 joan condell bryan scotney philip morrow adaptive grid refinement procedures efficient optical flow computation international journal computer vision v61 n1 p3154 january 2005 nils papenberg andrs bruhn thomas brox stephan didas joachim weickert highly accurate optic flow computation theoretically justified warping international journal computer vision v67 n2 p141158 april 2006 joachim weickert christoph schnrr variational optic flow computation spatiotemporal smoothness constraint journal mathematical imaging vision v14 n3 p245255 may 2001 daniel cremers stefano soatto motion competition variational approach piecewise parametric motion segmentation international journal computer vision v62 n3 p249265 may 2005 andrs bruhn joachim weickert timo kohlberger christoph schnrr multigrid platform realtime motion computation discontinuitypreserving variational methods international journal computer vision v70 n3 p257277 december 2006 andrs bruhn joachim weickert christoph schnrr lucaskanade meets hornschunck combining local global optic flow methods international journal computer vision v61 n3 p211231 februarymarch 2005 david tschumperl rachid deriche orthonormal vector sets regularization pdes applications international journal computer vision v50 n3 p237252 december 2002