interactive virtual relighting real scenes abstractcomputer augmented reality car rapidly emerging field enables users mix real virtual worlds goal provide interactive tools perform common illumination ie light interactions real virtual objects including shadows relighting real virtual light source modification particular concentrate virtually modifying real light source intensities inserting virtual lights objects real scene changes useful virtual lighting design prototyping achieve present threestep method first reconstruct simplified representation real scene geometry using semiautomatic visionbased techniques simplified geometry adapting recent hierarchical radiosity algorithms construct approximation real scene light exchanges next perform preprocessing step based radiosity system create unoccluded illumination textures replace original scene textures contained real light effects shadows real lights texture modulated ratio radiosity changed display factor corresponds radiosity occlusion ignored since goal achieve convincing relighting effect rather accurate solution present heuristic correction process results visually plausible renderings finally perform interactive process compute new illumination modified real virtual light intensities results show able virtually relight real scenes interactively including modifications additions virtual light sources objects b lighting designer system provides realistic tools experiment illumination enhanced real environment required photographs real scene reconstruction small number objects system preprocess described paper designer interactively manipulate real light intensities insert manipulate virtual lights objects figure 1 example modeled real scene shown b real illumination mod ified switching two lights moreover virtual light source inserted real scene modifying real object shadows virtual object also inserted real scene casting shadows onto real objects virtual object moved interactively 3 frames per second1 b figure 1 original real scene b virtual modification illumination real scene enhanced virtual object orange box floor moves 3 frames per second following sections first present previous work several domains related work augmented reality 3d reconstruction real scenes hierarchical radiosity previous common illumination approaches 1see quicktime video sequences web httpwww imagisimagfrpublicationsloscostvcg00indexhtmlthen discussed detail proceed explain build 3d geometric model representing real scene present overview algorithm interactive relighting preprocess phase presented detail followed description interactive relighting pro cess describe results relighting interactive modification real light intensities insertion virtual lights conclude discussion future work previous work work draws multiple fields particular augmented reality vision based reconstruction global il lumination following first give rapid overview augmented reality concentrates gen eral registration calibration aspects next briefly discuss 3d reconstruction method use build simplified model real scene use hierarchical radiosity create representation realworld illumination also permit interactive updates moving virtual objects modifying illumination thus introduce basic concepts approach central understanding algorithm finally detail previous work global common illumination insisting particular closely related approaches use radiosity methods 21 introduction augmented reality two main approaches augmented reality virtual real environments combined superimposing virtual objects real world viewed semitransparent glasses alternatively virtual real environments merged video images result reprojected onto screen two approaches presented detail survey azuma 2 also provides extensive references related literature first approach involves calibration registration display virtual objects real time avoid delays projected images perceived real world second approach allows interaction real virtual objects geometric representation real scene created images therefore handle occlusion real virtual objects well visual effects common illumination interaction light virtual synthetic objects nevertheless achieving real time interactive display effects remains challenging problem 22 reconstruction real models simulation common illumination effects requires geometric representation real world much research subject exists field computer vision chosen use advanced visionbased technique allows semiautomatic reconstruction based multiple views approach use presented 11 order build representation real scene several vision techniques combined automatic calibration camera mosaicing computation epipolar geometry results polygonal reconstruction scene projection textures first step calibration camera consists retrieving intrinsic parameters nonplanar calibration pattern image using automatic algorithm 21 user provides approximate positions 6 reference points system retrieves intrinsic extrinsic parameters camera four sets three photographs taken mosaic built automatically set presented 33 four mosaics 3d model defined using totalcalib system 1 developed robotvis group system shown figure 2 combines several techniques point correspondences provided user clicks one image create reference point matched points 3 mosaics given automatically system correspondences fundamental matrices computed using nonlinear method 32 polygonal regions next manually selected user point correspondences system provides 3d coordinates polygons projection equations finally textures projected allow correct perspective effects fixed viewpoint 11 reconstructed polygon texture image computed dewarping original image given viewpoint mapping plane polygon main advantage system user intervention restricted choice reference matches polygon vertex selection system however without limitations resulting model real scene approximate may contain artifacts since guarantee geometric properties parallel edges orthogonal angles preserved drawback removed taking account additional user input presented work debevec et al 7 poulin et al 20 work debevec et al 7 reconstruction based hierarchy blocks main idea build polyhedra include geometric constraints figure 2 totalcalib system build 3d models real scenes using automatic calibration epipolar geometry parallelism orthogonality size aspects polyhedra provide good approximations many objects real world especially outdoor architectural scenes also allows reconstruction vertices invisible original images correspond hidden vertices polyhedra another approach described 20 primitives points lines poly gons constraints parallelism orthogonality coplanarity determined user 23 hierarchical radiosity achieve interactive relighting need efficient description light exchanges scene including shadow information chosen use hierarchical radiosity approach clustering 15 23 extensions dynamic environments 9 next introduce certain basic concepts radiosity methods radiosity method based energy exchanges used computer graphics simulate light interactions synthetic environments 25 including indirect illumination since radiosity method finiteelement approach mesh representation scene required usually constructed quadtrees hierarchical radiosity 15 uses multiresolution representation light creating hierarchy patches surface light exchanges established appropriate levels patch hierarchy via link data struc ture resulting efficient solution generalization approach achieved using clusters 26 24 represent groups objects entire scene contained single root cluster clusters patches linked appropriate level depending refinement criterion decides whether link represents light transfer suitable user defined level accuracy light exchange sufficiently well represented link refined patches clusters subdivided links established incoming irradiance gathered patch followed pushpull step performed maintain coherent multiresolution representation radiant exchanges 15 clusterbased hierarchical radiosity starts root cluster linked algorithm described sillion 23 performs refine ment step establishing links appropriate levels followed gather pushpull steps irradiance pushed leaves patch hierarchy radiosity pulled averaging 23 repeated convergence visibility information form factors stored links visibility information three types visible invisible partial computing radiosity exchanges two patches incoming irradiance multiplied form factor attenuation varies zero patches mutually completely occluded one patches entirely mutually visible attenuation factor represents degree occlusion two patches typically estimated shooting rays two patches counting percentage rays blocked occluders hierarchical representation links adapted allow fast radiosity modification 9 augmenting links shaft data structure 14 addi tion previously subdivided links called passive links maintained passive links contain necessary information allowing reactivated cost required geometry change see figure 3 example b c figure 3 original subdivision links purple b adding dynamic object updating hierarchy elements links eight links shown blue cre ated c passive links shafts maintained hierarchy allowing fast identification dynamic object movement case two passive links shown green maintained corresponding shaft outlined grey24 common illumination augmented reality retrieval simulation common illumination virtual real objects treated several researchers previous work 28 19 31 16 4 12 8 30 22 use form 3d representation real scene state et al 28 use composition visionbased magnetic tracking methods accurate registration real environment virtual objects inserted real scene common illumination performed moving real point light source shadow maps used allowing updates real time direct illumination sharp shadows point sources nakamae et al 19 developed solution merging virtual objects background photographs estimated sun location simulate common illumination effects outdoors environments recently yu 31 proposed solution virtually modify illumination different virtual positions sun outdoors scenes pseudobrdf first estimated function incident radiance reflected differential ra diance diffuse specular reflectances retrieved using multiple images multiple viewpoints various virtual positions sun modified sky environment illumination modified outdoors illumination performed pixel pixel reconstructed trian gle however certain applications approximation diffuse reflectance sufficient indoors environments jancene et al 16 used visionbased techniques retrieve geometry real scene video sequence common illumination virtual real objects simulated allows creation video sequences animated virtual objects cloth modification reflective properties real objects final rendering performed using raytracing system images merged using masking algorithm debevec 4 also simulates common illumination effects using radiance 29 ray tracing based global illumination system work real environment decomposed distant scene local scene distant scene used evaluate global radiance source emittance 6 approximate geometric model local scene built using methods previously developed author 7 since radiance accurately retrieved images rendering mixed images done using difference desired effects original image value method adapted indoors outdoors environments finally sato et al 22 propose solution insert virtual objects real scene used radiance images estimate luminance surface 6 rendering done raycasting color pixel modified factor corresponding change illumination common illumination methods presented geared towards highquality image generation requiring order minutes per frame allow relighting need several images different lighting con ditions several viewpoints approach complementary want use simple data single image single viewpoint original lighting conditions want provide interactive common illumination effects allow designer modify experiment different lighting conditions digital prototyping mockups require type interactive capability final highquality animation one previous methods always used radiositybased systems common illumination closely related previous work fournier et al 12 interactive extension 8 system presented permits retrieval radiosity parameters textures extracted real scene images approach use fournier et als basic derivations extraction quantities required initialize radiosity solution thus describe work detail first real scene modeled manually using simpli fied representation given model subdivided patches reflectance extracted image textures reflectance patch chosen ba bi average intensity pixels image corresponding projected patch ba average intensity real image average reflectance scene given user estimation flectance depends color texture ie photograph real scene darker patches shadow emittance ei source estimated following equation ai area patch approximation based estimated ambient term progressive radiosity algorithm 3 simplify approximately case scenes consider thesources intensity however system equations could solved nonhomogeneous intensities reflectances emittances ei estimated progressive radiosity solution applied result simulation radiosity bi patch display done using display correction factor di patch first initialized radiosity bi scene modified current radiosity bi updated reflect change example virtual object inserted patches shadow cast bi di modifications scene notably addition virtual lights objects performed modulating texture ti pixel follows important note accuracy radiosity estimation bi irrelevant since ratio used 1 change requirement modifications bi consistent note raycasting used rendering 12 approach adapted 8 context hierarchical radiosity system allows common illumination dynamic virtual object real scene interactive update illumination virtual object moves uses dynamic hierarchical radiosity solution described 9 example results obtained method 8 shown figure 4 red dynamic virtual object inserted real scene top desk shadows virtually projected onto table using display ratio described eq 3 b c figure 4 virtual object floating table inserted real scene using 8 565 seconds shadows projected onto table using display ratio eq 3 b c dynamic object moves table links radiosity updated interactively 3 frames per second 25 shortcomings previous approaches use method 12 8 change intensity real light source result unsatisfactory clearly seen figure 5b b figure 5 original illumination real scene two sources left right illuminate wall causing shadow table cast wall b using method 8 turn lefthand light preexisting shadows removed quality relighting unsatisfactory shadow due lefthand light still clearly visible see recall display performed using initial real world photograph 12 textures 8 image textures modulated ratio current radiosity value bi changed example turning light originally computed radiosity value di since texture modulated snapshot real global illumination scene real shadows already represented consider figure 5b lefthand light turned observe region blue square contains region wall shadow respect lefthand light region since lefthand light turned current radiosity value bi reduced regions amounts close value since vary corresponding form factors textures regions modulated ratio current radiosity bi original radiosity value light switched since texture photo corresponding region originally shadow much darker begin shadow still visible change correct image displayed need way make texture shadowed unshadowed similar values reveals limitation previous texture modulation approaches treat modifications virtual objects sources since modification real lighting conditions requires modification original images textures scene3 common illumination system goal approach allow interactive modifica tion real source intensities insertion modifica tion virtual sources insertion interactive manipulation virtual objects interactive updates performed consistent update shadows real virtual objects system consists 3 steps 3d reconstruction real scene preprocessing initialization stage interactive modification stage user modify enhance real scene entire algorithm summarized figure 6 reconstruction build simplified 3d model real scene preprocess hierarchical radiosity system set refinement shadow boundaries creation unoccluded illumination textures system reinitialization shadow reprojection additional preprocess insertion virtual objects interactive modification modification real virtual lights update virtual object moves figure complete algorithm representation real scene real scene represented system approximation geometry projected textures model scene built semiautomatically using advanced vision techniques 11 8 described section 22 process allows reconstruction basic 3d model visible captured images example mosaics shown figure 7 rest scene visible images built points measured manually approximate textures used map polygons part positions light sources also measured manually inserted 3d model model approximation captured room precise model visible part scene coarse model rest example resulting reconstruction shown figure 8 limitation approach projection textures done single point view therefore restricted viewing scene static viewpoint figure 8a model viewed b c figure 7 four mosaics four different points view system b complete model shown including nonvisible part b figure 8 real scene viewed system b complete model including four lights b c preprocess enable interactive relighting main contribution approach preprocessing algorithm results generation modified original textures approximating unoccluded radiosity scene call unoccluded illumination tex tures original values textures taken initial scene photograph thus modified represent illumination shadows real objects taken account shadows due real light sources secondary reflector objects created unoccluded illumination tex ture perform rapid relighting modulating texture ratio corresponding increase decrease illumination due lighting changes achieved using mesh elements created radiosity algorithm elements finer regions shadow sufficient capture changes illumination example due indirect light preprocess begins setting necessary parameters estimation real scene illumination 8 suitably subdivided mesh essential appropriate modulation texture achieve texturebased refinement applied create unoccluded light textures information contained radiosity solution used due inaccuracies capture reconstruction process use heuristic correction pro cess based shadow boundaries appropriately inferred radiosity solution result process unoccluded illumination textures modulated ratio final radiosity unoccluded radiosity reproject shadows illumination effects preprocess explained detail next section virtual objects virtual light sources inserted desired insertion dynamic objects performed using method 8 algorithm used insert virtual light sources described section 45 interactive relighting entire preprocessing step completed interactively modify illumination light sources algorithm used presented section 5 inter face shown figure 9 allows user choose new emittance rgb channel real virtual light sources similar interface also exists insertion real virtual lights objects 2 figure 9 screen snapshot interactive system user manually select new light intensities real virtual light sources using sliders shown inset 2see quicktime video sequences web httpwww imagisimagfrpublicationsloscostvcg00indexhtml 4 preprocessing virtual interactive relighting 8 start initializing hierarchical radiosity system based textures extracted original pho tographs presented detail section 24 improve estimation average reflectance first use manually set value 12 followed additional step uses average computed reflectances achieve modification real lighting need construct unoccluded illumination textures textures capturing approximation illumination environment occlusion light sources secondary sources creation textures two steps first add blocked light using information contained radiosity solution since gives imperfect results due numerous approximations performed heuristic correction applied finding appropriate reference patch give us strong indication desired final color steps important appropriate mesh subdivision radiosity notably shadows objects visible given viewpoint begin describing texturebased refinement proceed describe two steps unoccluded illumination texture generation 41 texturebased refinement shadow boundaries use standard refinement criteria bf finement 15 errordriven refinement 13 obtain suitable radiosity mesh subdivision main problem approaches always guarantee good shadow boundaries even using visibility factor 15 addition problem apparent case since geometry reconstruction visibility computation via raycasting completely accurate discontinuity meshing 17 unsuitable rea sons since discontinuity lines would geometrically accurate consequence use quadtree subdivision new texturebased refinement main idea use color information contained original textures ie photos real scene reprojected texture onto reconstructed polygons combined visibility information provided radiosity system initialized real shadows already exist textures correspond regions darker using visibility type visible partial occluded see section 23 contained links topatches penumbra color differences neighboring patches force refinement regions corresponding real shadow refinement occurs first approximation radiosity solution real scene using approach 12 8 first radiosity solution used initialize several parameters reflectances light source tensities shown figure 10a initial subdivision obtained using bf refinement coarse links attached leaves hierarchy patches figure 10b provide accurately visibility information respect source patches b figure 10 coarse mesh refinement b links leaves texturebased refinement algorithm compares visibility color two neighboring leaves patch hierarchy visibility must consistent color differences consider two cases patch neighbors meaning similar color visibility defined 1 two patches similar colors also visibility type respect real light sources case subdivide patch 2 two patches different colors also different visibility types subdivide patch patch subdivided examine children created change visibility patch subdivision cancelled patch leaf patch hierarchy case 1 occurs limits shadow boundaries helps producing finer elements regions process stop reach maximum subdivision level patches separated visible shadow case 2 occurs raycasting failed identify correct visibility type patch may unsubdivided however color difference due visibility change different texture case orange poster back wall figure 11a figure 12 shows refinement algorithm recursively traverses hierarchy elements compares pair neighboring hierarchy leaves consider visibility similar difference attenuation factor less visibility threshold fixed user similarly consider two patches color distance color less color threshold also fixed user compute distance first convert rgb values cielab values 10 distance two colors simply computed b figure 11 patch pink different color neighbors visibility patch sub divided b mesh texturebased refinement improved shadow boundaries compare figure 10 end refinement process set necessary parameters reflectance display correc tion factor equal original radiosity texture original texture correction ie extracted directly original photographs links real light sources fixed leaves patch hierarchy radiosity step gatherpushpull computed corresponding new subdivision texturebased refinement results welldefined shadow boundaries important subsequent texture modification step resulting refinement shown figure 11b 42 creating unoccluded illumination tex adding blocked light appropriate refinement performed radiosity solution proceed creation therefinement shadow boundaries leaf compare neighbor leaves n similar color n different light source visibility subdivide else different color n similar light source visibility subdivide else visibility type partial subdivide subdivided light source visibility differences children remove subdivision leaf else redo process new child figure 12 texturebased refinement shadow boundaries unoccluded illumination textures mentioned first step consists adding blocked light result step generation modified tex ture blocked light incorporated define eis irradiance source blocked patch due occlusion source either primary light source secondary source ie reflecting patch additional irradiance sum radiosity source times form factor fis complement attenuation factor equal 1vis primary secondary source considering real source additional irradiance ei patch fis fact links patch hierarchy leaves allows satisfactory estimation ei since formfactor visibility information relatively accurate accuracy take account occluded indirect illu mination however since reconstructed every object scene since geometric model ap proximate occluded irradiance due indirect illumination less accurate tests effect adding indirect light step decisive generate new texture blocked light added original texture modulated correction factor computed vertices leaf radiosity patches modulating texture patch vertices results smooth modified textures b c inter final figure 13 original texture b resulting texture c resulting texture b c inter figure 14 original texture b resulting texture real occluded illumination removed mapped onto final geometry real scene c final texture texturebased correction correction factor based additional irradiance described eq 5 include blocked radiosity modulate original texture follows equation ei potentially blocked irradiance direct plus indirect bi di iei however ei computed approximate values fis vis es thus modulation eq 6 sufficiently accurate inter intermediate texture generated rendering leaves radiosity hierarchy appropriate modulation values eq 6 modulation factor greater one multipass approach used described appendix figure 13b show example texture generated addition blocked light floors original texture shown clearly seen values computed far bright regions shadow due inaccuracies different processes used texture obtained first step used update new reflectance values inter extracted manner original photographs section 24 eq inter 1 radiosity values b updated using new reflectance values well display correction factor inter set equal newly computed radiosity plus blocked light demonstrated example figure 14b resulting textures cannot used typically resulting texture bright implying overestimation radiosity believe due insufficient accuracy emittance reflectance estimation actual radiosity calculation includes formfactor visibility computation approximate geometric representation may also add problems compensate inaccuracies initial step subsequent heuristic correction factor applied based texture color 43 creating unoccluded illumination tex 2 texture color based correction intuition behind heuristic correction step estimate desired color unoccluded texture given element shadow based truly unoccluded element elsewhere surface would like color pixel occluded part texture color similar unoccluded pixel similarity modulated form factors since want keep unoccluded illumination effects final texture consider patch shadow patch r chosen appropriately unoccluded r position would want corresponding texture values tr equal since position differ ent instead equality want ti equal tr modulated ratio formfactors patch source light sources resulting desired value texture follows fis frs since operate context polygonbased hardware rendering perform correction perpatch basis modulate texture patch using correction factor instead using color texture use reflectance values stored radiosity system computed directly textures eq 1 associate occluded mesh radiosity element reference patch serve correct texture radiosity mesh element shadow thus attempt find corresponding unoccluded mesh element attempt find patch close similar reflectance values first determine frontier occluded unoccluded patches according light sources links leaves ensures classifica tion visible invisible partial given patch respect given source therefore able define frontier composed completely unoccluded patches occluded neighbors respect real light sources frontier usually encloses regions need modify texture however algorithm depend creation closed gion frontier elements used references explained selected elements keep visible viewpoint restriction due viewdependent property textures use example frontier patches shown figure 15a occluded patch define reference patch chosen frontier unoccluded patches reference patch r chosen similar color occluded patch minimum distance occluded red patch shown figure 15b algorithm chooses black patch reference patch frontier list unoccluded elements shown figure 15a black frontier patch closest patch similar color red occluded patch see algorithm figure 16 define colors similar distance less threshold defined user b figure 15 frontier green composed unoccluded patches enclosed shadow regions b black patch chosen frontier reference red selected patch shadow leaf mindistance mincolor patch frontier list n distancei n mindistance distancecolorn mincolor figure algorithm choose reference patches refinement reflectances converted lab values distance distancecolor computed using eq 4 patch frontier unoccluded elements found certain patch reference patch default reference patch previously selected user polygon texture correction process reference patch chosen use eq 7 determine correction factor applied texture patch since reference patch cer b c final final final figure 17 display correction corresponding new texture b radiosity b corresponding final new texture c resulting final texture shadows removed resulting reprojection using final values tain distance occluded patch modulate reflectance reference patch ratio form factors fis patch frs patch r respect source first corrected reflectance corr computed corr fis frs using corrected reflectance generate final unoccluded illumination texture generate texture render textured leaf patches patch hierarchy appropriate modulation factor adding blocked light inter occluded patches texture modulated ratio correction factor corr patch intermediate reflectance inter computed directly inter intermediate textures final ci orr inter corr greater inter use multipass display method described appendix step 1 final final unoccluded illumination texture recompute new reflectance values final occluded patches perform radiosity step resulting new ra final diosity values b based new reflectance final compute new display correction factor equal new reflectance times sum occluded irradiance eifinal additional irradiance ei see eq 5 note display factor take account shadow calculations final illustration given figure 17a final b shown figure 17b result final textures shown figure 17c note shadows mostly removed texture effectively represent illumination shadows computed 44 shadow reprojection steps previously described texture representing unoccluded illumination need way reproject original shadows ii modify intensity add virtual objects light sources achieved modulating unoccluded illumi final nation texture tfinal ratio bi intuitively final ratio radiosity including shadow calculations final radiosity without shadows since b smaller final value regions shadow areas darker result shadows appropriately reprojected resulting image close original photo graph result process shown figure 17d usually unnecessary maintain subdivision used modify textures preprocess since needs fine interactive updates wasteful nonetheless cases mesh used preprocess satisfactory generate coarser mesh clear everything previously computed reflectances radiosity display correction factor also clear subdivision link hierarchy recompute solution based simple bfv refinement 15 results coarser final mesh compute b di two radiosity solutions actually performed end first solu tion display correction factor di computed links leaves hierarchy mesh allow accurate blocked light computation second radiosity solution computed keeping mesh permits final initialization b using fewer links resulting mesh shown figure 18 sively removing radiosity stored level hier archy perform complete radiosity step without performing additional refinement gather radiosity across links perform pushpull step maintain coherent representation radiosity hierarchy iterative process stopped global illumination stable process interactive since costly refinement step includes visibility formfactor computa tion avoided update time depends initial level subdivision note however insertion figure 18 texture modification radiosity solu virtual object may result additional subdivision tion may computed using bfv refinement result date rate modify one several lights exing mesh coarser shadow regions one used ample update rates shown figure 19 discussed correct texture following section detail 45 modified refinement insert virtual sources 6 results treat insertion virtual light source adapt method 8 virtual object inserted real scene interactively manipulated 9 results projection shadows due virtual source real objects influence virtual light often significant thus force additional refinement establishing links virtual sources polygons opposed allowing links virtual sources clusters done polygons visible captured images polygons corresponding hidden parts scene affected forced refine ment additional light sources brighten scene multipass method appendix used achieve effect virtual light source insertion illustrated figures 26 21 22 24 final relighting stage completed preprocess mod ifications based changes radiosity system links patches clusters radiosity hierarchy already established including form factor computation visibility determination order achieve fast updates subdivision links maintained relighting since modify intensity light sources subdivision links still fit illumination even modification keeping hierarchy may result overly fine mesh subdivision lights switched since user may switch later however prefer maintain mesh subdivision modification process consists recur tested algorithm two different real scenes one also use radiance images obtained using adapted version algorithm debevec et al 6 see appendix b scene present results relighting adding virtual light virtual objects performed interactively timings reported sgi onyx2 infinite reality workstation r10000 running 195mhz first scene shown figure 20a original illumination first switch two back lights c shown figure 8 resulting image figure 20b scene darker original illumination shown figure 20a change shadows switch front left light double intensity right light b see figure 20 resulting shadow table homogeneous umbra regions expected shadow due left light disappeared part scene illuminated light source darker compare new result method 8 previously shown figure 5c inexact since real shadows removed textures switch left light double original intensity switch right light see figure 20d shadows expected ie shadow boundary right light longer visible light modification whole process radiosity step dis play takes 08 seconds accompanying video3 shows light modifications recorded real time sgi onyx2 infinite reality workstation 3see quicktime video sequences web httpwww imagisimagfrpublicationsloscostvcg00indexhtml refinement decrease light intensity time modification 02 sec 03 sec 07 sec time display 02 sec 02 sec 06 sec number leaveslinks 348611246 578116807 824750787 figure 19 interactive modification virtual light source intensity time rate depends level subdivi sion number established active links leaves bottom elements subdivision hierarchy b c figure 20 original scene lit shadow reprojection b back lights virtually switched c left light virtually switched right light double intensity right light virtually switched left light double intensity note case mesh used texture correction sufficient also insert virtual source modify intensity described insertion light source takes 78 seconds interesting test switch real lights illuminate real scene virtual source see figure 21a b notice real shadows real light sources longer seen however real objects table cast new shadows floor walls due virtual light new illumination still able interactively move dynamic virtual object orange box floor previously inserted 142 seconds figure 22 updates take approximately 03 sec per frame moving virtual object subdivision shown figure 22a real virtual il lumination virtual object casts shadows onto real scene b figure 21 insert virtual light switch real lights real scene lit virtual light b decrease intensity virtual light also tested method another real scene4 shown figure 23a b removed real shadows textures scene another interesting test compare results algorithm real photographs turned real lights scene right column b c figure 24 show original photographs taken different lighting conditions left show simulation resulting method lighting conditions5 first performed real relighting e switching two back lights f switched left front light g switched right front light reprojected shadows softer original picture however overall lighting effect similar h inserted virtual light original lights turned test scene took photograph real scene using 4this real scene modeled using rekon system developed montreal 20 5we applied appropriate scalefactor correction account differences overall lighting levels b c figure 22 insertion virtual object consequent subdivision b c orange virtual object moving interactive rates real light used basis modeling virtual source show images side side scene performed modifications using radiance images textures radiance images obtained using algorithm debevec et al 6 adapted automatic camera 6 described appendix b results texture modification shown figure 23c lighting modification also performed results shown figure 24i j k l similar obtained using rgb images believe cases presented highdynamic range images seem provide significant advantage probably due relatively low dynamic range specific test images cases difference could significant 7 discussion future work concurrently work since original submission article two new closely related methods developed briefly discuss approach relates present ideas future work b c figure 23 original real scene viewed system reprojection b real shadows removed real world textures c original real scene viewed system using radiance images textures real shadows removed real world textures 71 discussion recent work recent method developed yu et al 30 permits relighting indoors environments well addition virtual objects method reflectances estimated accurately diffuse specular components using relatively large number photographs around 3040 usercontrolled constrained lighting however rendering computed using radiance 29 therefore far interactive 18 also developed completely different ap proach based taking several photographs real scene using different usercontrolled lighting con ditions used estimate diffuse reflectance relighting adding virtual objects method allows interactivity scene modifications based raytracing thus subject limitations number sources resolution image approach present many ways complementary first approach simplest capture process since methods require usercontrolled specific lighting input photographs approach simply photograph scene single viewpoint illumination processing 7 sec ond attempt perform reflectance estima tion since use simple texture modulation approach display finally thanks use graphics hardware display achieve faster update rates fewer speed limitations noted however approach yu et al handles viewpoint environment albeit non interactively significant advantage ap proach method 18 notably allows removal real objects using texture generation estimated flectance 7as methods course several photos required geometric reconstruction 72 future work since majority work done preprocessing step relighting process interactive allows fast manipulation real scene two main issues need addressed speed updates quality shadow removal multipass display takes time could also optimized radiosity steps could also optimized avoiding complete traversal hierarchy spirit 9 relighting quality shadow removal directly related subdivision effected hierarchical radiosity algo rithm texturebased refinement greatly improved resulting quadtrees compared traditional refine ment approaches still prone problems mainly due inaccurate geometric reconstruction another limitation system constraint fixed view point users modifying illumination real scene would like change point view better appreciate light effects building recent work 20 5 believe could develop solution least limited set viewpoints another interesting research direction allow removal replacement real objects approach developed 18 shows pixelbypixel basis even though extension polygonhardware based rendering nontrivial believe feasible 8 conclusion paper addressed difficult problem common illumination real virtual scenes virtual relighting problem hard since realworld photographs already contain real lighting effects shadows need correctly identified modified real simulated rgb images simulated radiance e b f j c g k h l figure 24 b c real photographs taken different lighting conditions e f g h simulated images respectively lighting conditions real photograph j k l simulation using radiance images presented solution enabling interactive mod ification real virtual illumination reconstructed real scenes algorithm presented three 5 main steps first step real scene reconstruction 3d geometric model using advanced visionbased tech niques second step preprocessing algorithm first initialize radiosity system use structure 6 detect shadow regions appropriately refine mesh regions identified modify real world textures include real primary secondary source illumination blocked real occluders thus brightening dark shadow regions additional heuristic cor rection modulate unoccluded illumination textures reproject real shadows appropriately resulting simulated images similar original 8 photographs ability select change intensity real virtual light source also add virtual objects scene results convincing 9 shadow boundaries due switchedoff real lights disap pear modify light source intensities move virtual objects modifications interactive diffuse common illumination effects shadows 10 tween real virtual objects correctly represented acknowledgments work funded part esprit reactive ltr project arcade 24944 european union would like thank sylvain bougnoux providing totalcalib system pierre poulin colleagues use rekon also would like thank cyril soler francois 13 sillion many discussions help many thanks bruce walter invaluable input project anonymous reviewers whose comments greatly improved revised 14 document results r httpwww survey augmented reality greenberg progressive refinement approach fast radiosity image generation rendering synthetic objects real scenes bridging traditional imagebased graphics global illumination high dynamic range photography recovering high dynamic range radiance maps photographs rendering architecture photographs hybrid common illumination computer augmented reality rendering techniques eg workshop rendering held st global illumination using linespace hierarchy color appearance models reconstruction urban scenes image sequences illumination real computer generated scenes finement clustering radiosity complex environments computer graphics forum rendering techniques computer graphics 2nd eg workshop rendering rapid hierarchical graphics siggraph anne real virtual objects video sequences ieee workshop networked realities frsyntimtextesnr95eng computer graphics montage method overlaying computer generated images onto background photograph interactively modeling photogrammetry camera calibration without feature extraction acquiring radiance distribution superimpose virtual objects onto real scene clustering algorithm radiosity complex environments cyril soler franc superior augmented reality registration integrating landmark tracking magnetic tracking radiance lighting simulation rendering system inverse global illumination recovering reflectance models real scenes photographs recovering photometric properties architectural scenes photographs using geometric corners build 2d mosaic set images algorithm color display insufficient bi greater di due limitation glcolor function opengl requires color value zero one special treatment done bi di greater one automatically clipped one figure 25 multipass display integer part bi di bi di glblend function opengl texture color bi di multipass algorithm described figure 25 approach display time increased light modification pass virtual light source added scene figure 26 insertion virtual light source passes 03 seconds several weighted textures create single one textures direct illumination use rgb textures extracted camera several highdynamic range photographs 6 priced digital camera kodak dc260 costs ten times less professional level digital cameras cameras price range lack precise control create radiance images adapt algorithm debevec provides nine different picture settings using parameters aperture ev negative positive ev values shutter speeds according reference time set ev 0 ranges2ev exposure time t4 t2 2 t2 2 exposure time 2t 2t 2 2t 4t results adapted algorithm quite satisfactory camera response function extracted seems reasonable avoid problems saturation low dynamic range computer science university grenoble currently postdoctoral university college london uk interests include inverse illumination global illumination rendering general inria rho gravirimaginria project since october year1995year supervision projects visibility shadow calculations treatment complex environments eurographics expertise multiple 2d images roberts published numerous articles computer vision regular participant scientific conferences tr ctr vincent masselus philip dutr frederik anrys freeform light stage proceedings 13th eurographics workshop rendering june 2628 2002 pisa italy enhua wu qimin sun xuehui liu recovery material complex illumination conditions proceedings 2nd international conference computer graphics interactive techniques australasia south east asia june 1518 2004 singapore byong mok oh max chen julie dorsey frdo durand imagebased modeling photo editing proceedings 28th annual conference computer graphics interactive techniques p433442 august 2001 samuel boivin andre gagalowicz imagebased rendering diffuse specular glossy surfaces single image proceedings 28th annual conference computer graphics interactive techniques p107116 august 2001 zhouchen lin tientsin wong heungyeung shum relighting reflected irradiance field representation sampling reconstruction international journal computer vision v49 n23 p229246 septemberoctober 2002 raphael grasset laurence boissieux jean gascuel dieter schmalstieg interactive mediated reality proceedings sixth australasian conference user interface p2129 january 30february 03 2005 newcastle australia oliver bimber ramesh raskar modern approaches augmented reality acm siggraph 2005 courses july 31august